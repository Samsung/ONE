<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ONE - On-device Neural Engine: onert::compiler::train::StaticBackwardShapeInferer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ONE - On-device Neural Engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classonert_1_1compiler_1_1train_1_1_static_backward_shape_inferer.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">onert::compiler::train::StaticBackwardShapeInferer Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class to infer shape before running kernels. It does the following:  
 <a href="classonert_1_1compiler_1_1train_1_1_static_backward_shape_inferer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_static_backward_shape_inferer_8h_source.html">StaticBackwardShapeInferer.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for onert::compiler::train::StaticBackwardShapeInferer:</div>
<div class="dyncontent">
<div class="center"><img src="classonert_1_1compiler_1_1train_1_1_static_backward_shape_inferer__coll__graph.png" border="0" usemap="#aonert_1_1compiler_1_1train_1_1_static_backward_shape_inferer_coll__map" alt="Collaboration graph"/></div>
<map name="aonert_1_1compiler_1_1train_1_1_static_backward_shape_inferer_coll__map" id="aonert_1_1compiler_1_1train_1_1_static_backward_shape_inferer_coll__map">
<area shape="rect" title="Class to infer shape before running kernels. It does the following:" alt="" coords="5,93,200,133"/>
<area shape="rect" href="structonert_1_1ir_1_1train_1_1_trainable_operation_visitor.html" title=" " alt="" coords="25,5,180,45"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a53d2a6d3ef67b99f2bda95370d9a6833"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classonert_1_1compiler_1_1train_1_1_static_backward_shape_inferer.html#a53d2a6d3ef67b99f2bda95370d9a6833">StaticBackwardShapeInferer</a> (<a class="el" href="classonert_1_1compiler_1_1train_1_1_lowered_trainable_graph.html">compiler::train::LoweredTrainableGraph</a> *lowered_subg)</td></tr>
<tr class="separator:a53d2a6d3ef67b99f2bda95370d9a6833"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9000327ee0157d504a70a4210b591d37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classonert_1_1compiler_1_1train_1_1_static_backward_shape_inferer.html#a9000327ee0157d504a70a4210b591d37">infer</a> (void)</td></tr>
<tr class="memdesc:a9000327ee0157d504a70a4210b591d37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Infer shape of operands belonging to ops and set the output shape. If output shape cannot be known without running op, mark it so that it can be allocated when running kernel.  <a href="classonert_1_1compiler_1_1train_1_1_static_backward_shape_inferer.html#a9000327ee0157d504a70a4210b591d37">More...</a><br /></td></tr>
<tr class="separator:a9000327ee0157d504a70a4210b591d37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a24f7a31954b81756ec25f01a620e83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classonert_1_1compiler_1_1train_1_1_static_backward_shape_inferer.html#a1a24f7a31954b81756ec25f01a620e83">dump</a> ()</td></tr>
<tr class="separator:a1a24f7a31954b81756ec25f01a620e83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_structonert_1_1ir_1_1train_1_1_trainable_operation_visitor"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_structonert_1_1ir_1_1train_1_1_trainable_operation_visitor')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="structonert_1_1ir_1_1train_1_1_trainable_operation_visitor.html">onert::ir::train::TrainableOperationVisitor</a></td></tr>
<tr class="memitem:a01d7b9967b2cd3dee02c6ee33fd9cebd inherit pub_methods_structonert_1_1ir_1_1train_1_1_trainable_operation_visitor"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structonert_1_1ir_1_1train_1_1_trainable_operation_visitor.html#a01d7b9967b2cd3dee02c6ee33fd9cebd">~TrainableOperationVisitor</a> ()=default</td></tr>
<tr class="separator:a01d7b9967b2cd3dee02c6ee33fd9cebd inherit pub_methods_structonert_1_1ir_1_1train_1_1_trainable_operation_visitor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Class to infer shape before running kernels. It does the following: </p>
<ul>
<li>re-calculate and set output shape at compile time (before running kernels)</li>
<li>if calculation cannot be done at compile time, mark the outputs to be dynamic, meaning shapes of outputs will be calculated during running kernels </li>
</ul>

<p class="definition">Definition at line <a class="el" href="_static_backward_shape_inferer_8h_source.html#l00041">41</a> of file <a class="el" href="_static_backward_shape_inferer_8h_source.html">StaticBackwardShapeInferer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a53d2a6d3ef67b99f2bda95370d9a6833" name="a53d2a6d3ef67b99f2bda95370d9a6833"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53d2a6d3ef67b99f2bda95370d9a6833">&#9670;&#160;</a></span>StaticBackwardShapeInferer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">onert::compiler::train::StaticBackwardShapeInferer::StaticBackwardShapeInferer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classonert_1_1compiler_1_1train_1_1_lowered_trainable_graph.html">compiler::train::LoweredTrainableGraph</a> *&#160;</td>
          <td class="paramname"><em>lowered_subg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_static_backward_shape_inferer_8h_source.html#l00044">44</a> of file <a class="el" href="_static_backward_shape_inferer_8h_source.html">StaticBackwardShapeInferer.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   45</span>    : _lowered_subg{lowered_subg}</div>
<div class="line"><span class="lineno">   46</span>  {</div>
<div class="line"><span class="lineno">   47</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1a24f7a31954b81756ec25f01a620e83" name="a1a24f7a31954b81756ec25f01a620e83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a24f7a31954b81756ec25f01a620e83">&#9670;&#160;</a></span>dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void onert::compiler::train::StaticBackwardShapeInferer::dump </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_static_backward_shape_inferer_8cc_source.html#l00055">55</a> of file <a class="el" href="_static_backward_shape_inferer_8cc_source.html">StaticBackwardShapeInferer.cc</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   56</span>{</div>
<div class="line"><span class="lineno">   57</span>  <span class="comment">// TODO dump</span></div>
<div class="line"><span class="lineno">   58</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9000327ee0157d504a70a4210b591d37" name="a9000327ee0157d504a70a4210b591d37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9000327ee0157d504a70a4210b591d37">&#9670;&#160;</a></span>infer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void onert::compiler::train::StaticBackwardShapeInferer::infer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Infer shape of operands belonging to ops and set the output shape. If output shape cannot be known without running op, mark it so that it can be allocated when running kernel. </p>

<p class="definition">Definition at line <a class="el" href="_static_backward_shape_inferer_8cc_source.html#l00033">33</a> of file <a class="el" href="_static_backward_shape_inferer_8cc_source.html">StaticBackwardShapeInferer.cc</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   34</span>{</div>
<div class="line"><span class="lineno">   35</span>  <span class="comment">// It is not determined to iterate in reverse order.</span></div>
<div class="line"><span class="lineno">   36</span>  <span class="keyword">auto</span> sorted_ops = _lowered_subg-&gt;<a class="code hl_function" href="classonert_1_1compiler_1_1train_1_1_lowered_trainable_graph.html#a73cfb7d0caf2754f5b14c9a33d500b60">graph</a>().<a class="code hl_function" href="classonert_1_1ir_1_1_graph.html#a0bb6bcdff8092785afb4f8dca50ecfc5">topolSortOperations</a>();</div>
<div class="line"><span class="lineno">   37</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = sorted_ops.rbegin(); it != sorted_ops.rend(); ++it)</div>
<div class="line"><span class="lineno">   38</span>  {</div>
<div class="line"><span class="lineno">   39</span>    <span class="keyword">const</span> <span class="keyword">auto</span> op_idx = *it;</div>
<div class="line"><span class="lineno">   40</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;op = _lowered_subg-&gt;<a class="code hl_function" href="classonert_1_1compiler_1_1train_1_1_lowered_trainable_graph.html#a9a33f880864f3595b7a88afc5bf67625">trainable_graph</a>().<a class="code hl_function" href="classonert_1_1ir_1_1train_1_1_trainable_graph.html#a0efe89ac2a129ae975957af5ba0ae525">operation</a>(op_idx);</div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordflow">if</span> (checkDynamicInput(op))</div>
<div class="line"><span class="lineno">   42</span>    {</div>
<div class="line"><span class="lineno">   43</span>      std::stringstream msg;</div>
<div class="line"><span class="lineno">   44</span>      msg &lt;&lt; <span class="stringliteral">&quot;StaticBackwardShapeInferer does not support dynamic shape yet, &quot;</span>;</div>
<div class="line"><span class="lineno">   45</span>      msg &lt;&lt; op.<a class="code hl_function" href="structonert_1_1ir_1_1_i_operation.html#ae08d5a0280ec4bbc5fcada43e0b2ea93">name</a>() &lt;&lt; <span class="stringliteral">&quot;(op index: &quot;</span> &lt;&lt; op_idx &lt;&lt; <span class="stringliteral">&quot;) has dynamic shape.&quot;</span>;</div>
<div class="line"><span class="lineno">   46</span>      <span class="keywordflow">throw</span> std::runtime_error(msg.str());</div>
<div class="line"><span class="lineno">   47</span>    }</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>    checkOutput(op);</div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span>    op.accept(*<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">   52</span>  }</div>
<div class="line"><span class="lineno">   53</span>}</div>
<div class="ttc" id="aclassonert_1_1compiler_1_1train_1_1_lowered_trainable_graph_html_a73cfb7d0caf2754f5b14c9a33d500b60"><div class="ttname"><a href="classonert_1_1compiler_1_1train_1_1_lowered_trainable_graph.html#a73cfb7d0caf2754f5b14c9a33d500b60">onert::compiler::train::LoweredTrainableGraph::graph</a></div><div class="ttdeci">ir::Graph &amp; graph() override</div><div class="ttdef"><b>Definition:</b> <a href="_lowered_trainable_graph_8h_source.html#l00045">LoweredTrainableGraph.h:45</a></div></div>
<div class="ttc" id="aclassonert_1_1compiler_1_1train_1_1_lowered_trainable_graph_html_a9a33f880864f3595b7a88afc5bf67625"><div class="ttname"><a href="classonert_1_1compiler_1_1train_1_1_lowered_trainable_graph.html#a9a33f880864f3595b7a88afc5bf67625">onert::compiler::train::LoweredTrainableGraph::trainable_graph</a></div><div class="ttdeci">ir::train::TrainableGraph &amp; trainable_graph()</div><div class="ttdef"><b>Definition:</b> <a href="_lowered_trainable_graph_8h_source.html#l00047">LoweredTrainableGraph.h:47</a></div></div>
<div class="ttc" id="aclassonert_1_1ir_1_1_graph_html_a0bb6bcdff8092785afb4f8dca50ecfc5"><div class="ttname"><a href="classonert_1_1ir_1_1_graph.html#a0bb6bcdff8092785afb4f8dca50ecfc5">onert::ir::Graph::topolSortOperations</a></div><div class="ttdeci">std::vector&lt; ir::OperationIndex &gt; topolSortOperations() const</div><div class="ttdef"><b>Definition:</b> <a href="_graph_8cc_source.html#l00184">Graph.cc:184</a></div></div>
<div class="ttc" id="aclassonert_1_1ir_1_1train_1_1_trainable_graph_html_a0efe89ac2a129ae975957af5ba0ae525"><div class="ttname"><a href="classonert_1_1ir_1_1train_1_1_trainable_graph.html#a0efe89ac2a129ae975957af5ba0ae525">onert::ir::train::TrainableGraph::operation</a></div><div class="ttdeci">const ITrainableOperation &amp; operation(OperationIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="_trainable_graph_8cc_source.html#l00122">TrainableGraph.cc:122</a></div></div>
<div class="ttc" id="astructonert_1_1ir_1_1_i_operation_html_ae08d5a0280ec4bbc5fcada43e0b2ea93"><div class="ttname"><a href="structonert_1_1ir_1_1_i_operation.html#ae08d5a0280ec4bbc5fcada43e0b2ea93">onert::ir::IOperation::name</a></div><div class="ttdeci">virtual std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="_i_operation_8h_source.html#l00038">IOperation.h:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_lowered_trainable_graph_8h_source.html#l00045">onert::compiler::train::LoweredTrainableGraph::graph()</a>, <a class="el" href="_i_operation_8h_source.html#l00038">onert::ir::IOperation::name()</a>, <a class="el" href="_trainable_graph_8cc_source.html#l00122">onert::ir::train::TrainableGraph::operation()</a>, <a class="el" href="_graph_8cc_source.html#l00184">onert::ir::Graph::topolSortOperations()</a>, and <a class="el" href="_lowered_trainable_graph_8h_source.html#l00047">onert::compiler::train::LoweredTrainableGraph::trainable_graph()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>runtime/onert/core/src/compiler/train/<a class="el" href="_static_backward_shape_inferer_8h_source.html">StaticBackwardShapeInferer.h</a></li>
<li>runtime/onert/core/src/compiler/train/<a class="el" href="_static_backward_shape_inferer_8cc_source.html">StaticBackwardShapeInferer.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceonert.html">onert</a></li><li class="navelem"><a class="el" href="namespaceonert_1_1compiler.html">compiler</a></li><li class="navelem"><a class="el" href="namespaceonert_1_1compiler_1_1train.html">train</a></li><li class="navelem"><a class="el" href="classonert_1_1compiler_1_1train_1_1_static_backward_shape_inferer.html">StaticBackwardShapeInferer</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
