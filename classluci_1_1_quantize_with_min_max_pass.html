<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ONE - On-device Neural Engine: luci::QuantizeWithMinMaxPass Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ONE - On-device Neural Engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classluci_1_1_quantize_with_min_max_pass.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">luci::QuantizeWithMinMaxPass Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Pass to quantize activation, weights, and bias.  
 <a href="classluci_1_1_quantize_with_min_max_pass.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_quantize_with_min_max_pass_8h_source.html">QuantizeWithMinMaxPass.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for luci::QuantizeWithMinMaxPass:</div>
<div class="dyncontent">
<div class="center"><img src="classluci_1_1_quantize_with_min_max_pass__coll__graph.png" border="0" usemap="#aluci_1_1_quantize_with_min_max_pass_coll__map" alt="Collaboration graph"/></div>
<map name="aluci_1_1_quantize_with_min_max_pass_coll__map" id="aluci_1_1_quantize_with_min_max_pass_coll__map">
<area shape="rect" title="Pass to quantize activation, weights, and bias." alt="" coords="5,79,205,104"/>
<area shape="rect" href="classlogo_1_1_pass.html" title=" " alt="" coords="64,5,147,31"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structluci_1_1_quantize_with_min_max_pass_1_1_context.html">Context</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac4f951df7942ebdf19db806a84a46c56"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classluci_1_1_quantize_with_min_max_pass.html#ac4f951df7942ebdf19db806a84a46c56">QuantizeWithMinMaxPass</a> (<a class="el" href="namespaceloco.html#ad30d86ce5bd365deae8ef4398fb16d3c">loco::DataType</a> input_model_dtype, <a class="el" href="namespaceloco.html#ad30d86ce5bd365deae8ef4398fb16d3c">loco::DataType</a> output_model_dtype, <a class="el" href="namespaceluci.html#a1dbbe7778504a3210934cf9f1415315a">QuantizationGranularity</a> granularity)</td></tr>
<tr class="separator:ac4f951df7942ebdf19db806a84a46c56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37f7528f78fa5f715fcdf9520b1ef33f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classluci_1_1_quantize_with_min_max_pass.html#a37f7528f78fa5f715fcdf9520b1ef33f">QuantizeWithMinMaxPass</a> (std::unique_ptr&lt; <a class="el" href="structluci_1_1_quantize_with_min_max_pass_1_1_context.html">Context</a> &gt; &amp;&amp;ctx)</td></tr>
<tr class="separator:a37f7528f78fa5f715fcdf9520b1ef33f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a625f75bada3b6fe3f2a1546bf7df6300"><td class="memItemLeft" align="right" valign="top">virtual const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classluci_1_1_quantize_with_min_max_pass.html#a625f75bada3b6fe3f2a1546bf7df6300">name</a> (void) const</td></tr>
<tr class="separator:a625f75bada3b6fe3f2a1546bf7df6300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a153fc10df41b30e89f916f705c338242"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classluci_1_1_quantize_with_min_max_pass.html#a153fc10df41b30e89f916f705c338242">run</a> (<a class="el" href="classloco_1_1_graph.html">loco::Graph</a> *graph)</td></tr>
<tr class="separator:a153fc10df41b30e89f916f705c338242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classlogo_1_1_pass"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classlogo_1_1_pass')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classlogo_1_1_pass.html">logo::Pass</a></td></tr>
<tr class="memitem:a6210601a99e987952ee399948fd15186 inherit pub_methods_classlogo_1_1_pass"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlogo_1_1_pass.html#a6210601a99e987952ee399948fd15186">~Pass</a> ()=default</td></tr>
<tr class="separator:a6210601a99e987952ee399948fd15186 inherit pub_methods_classlogo_1_1_pass"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c40912ff3bad046c4b07ca2b4aadec1 inherit pub_methods_classlogo_1_1_pass"><td class="memItemLeft" align="right" valign="top">virtual const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlogo_1_1_pass.html#a5c40912ff3bad046c4b07ca2b4aadec1">name</a> (void) const</td></tr>
<tr class="separator:a5c40912ff3bad046c4b07ca2b4aadec1 inherit pub_methods_classlogo_1_1_pass"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3076e513d3bf84dafeb158a028725374 inherit pub_methods_classlogo_1_1_pass"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlogo_1_1_pass.html#a3076e513d3bf84dafeb158a028725374">run</a> (<a class="el" href="classloco_1_1_graph.html">loco::Graph</a> *graph)=0</td></tr>
<tr class="memdesc:a3076e513d3bf84dafeb158a028725374 inherit pub_methods_classlogo_1_1_pass"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the pass.  <a href="classlogo_1_1_pass.html#a3076e513d3bf84dafeb158a028725374">More...</a><br /></td></tr>
<tr class="separator:a3076e513d3bf84dafeb158a028725374 inherit pub_methods_classlogo_1_1_pass"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Pass to quantize activation, weights, and bias. </p>

<p class="definition">Definition at line <a class="el" href="_quantize_with_min_max_pass_8h_source.html#l00034">34</a> of file <a class="el" href="_quantize_with_min_max_pass_8h_source.html">QuantizeWithMinMaxPass.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac4f951df7942ebdf19db806a84a46c56" name="ac4f951df7942ebdf19db806a84a46c56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4f951df7942ebdf19db806a84a46c56">&#9670;&#160;</a></span>QuantizeWithMinMaxPass() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">luci::QuantizeWithMinMaxPass::QuantizeWithMinMaxPass </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceloco.html#ad30d86ce5bd365deae8ef4398fb16d3c">loco::DataType</a>&#160;</td>
          <td class="paramname"><em>input_model_dtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceloco.html#ad30d86ce5bd365deae8ef4398fb16d3c">loco::DataType</a>&#160;</td>
          <td class="paramname"><em>output_model_dtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceluci.html#a1dbbe7778504a3210934cf9f1415315a">QuantizationGranularity</a>&#160;</td>
          <td class="paramname"><em>granularity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_quantize_with_min_max_pass_8h_source.html#l00051">51</a> of file <a class="el" href="_quantize_with_min_max_pass_8h_source.html">QuantizeWithMinMaxPass.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   53</span>  {</div>
<div class="line"><span class="lineno">   54</span>    _ctx = std::make_unique&lt;Context&gt;();</div>
<div class="line"><span class="lineno">   55</span>    {</div>
<div class="line"><span class="lineno">   56</span>      _ctx-&gt;input_model_dtype = input_model_dtype;</div>
<div class="line"><span class="lineno">   57</span>      _ctx-&gt;output_model_dtype = output_model_dtype;</div>
<div class="line"><span class="lineno">   58</span>      _ctx-&gt;granularity = granularity;</div>
<div class="line"><span class="lineno">   59</span>      _ctx-&gt;input_type = output_model_dtype;</div>
<div class="line"><span class="lineno">   60</span>      _ctx-&gt;output_type = output_model_dtype;</div>
<div class="line"><span class="lineno">   61</span>      _ctx-&gt;TF_style_maxpool = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   62</span>    }</div>
<div class="line"><span class="lineno">   63</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a37f7528f78fa5f715fcdf9520b1ef33f" name="a37f7528f78fa5f715fcdf9520b1ef33f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37f7528f78fa5f715fcdf9520b1ef33f">&#9670;&#160;</a></span>QuantizeWithMinMaxPass() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">luci::QuantizeWithMinMaxPass::QuantizeWithMinMaxPass </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="structluci_1_1_quantize_with_min_max_pass_1_1_context.html">Context</a> &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_quantize_with_min_max_pass_8h_source.html#l00066">66</a> of file <a class="el" href="_quantize_with_min_max_pass_8h_source.html">QuantizeWithMinMaxPass.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   66</span>                                                       : _ctx{std::move(ctx)}</div>
<div class="line"><span class="lineno">   67</span>  {</div>
<div class="line"><span class="lineno">   68</span>    <span class="comment">// DO NOTHING</span></div>
<div class="line"><span class="lineno">   69</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a625f75bada3b6fe3f2a1546bf7df6300" name="a625f75bada3b6fe3f2a1546bf7df6300"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a625f75bada3b6fe3f2a1546bf7df6300">&#9670;&#160;</a></span>name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const char * luci::QuantizeWithMinMaxPass::name </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classlogo_1_1_pass.html#a5c40912ff3bad046c4b07ca2b4aadec1">logo::Pass</a>.</p>

<p class="definition">Definition at line <a class="el" href="_quantize_with_min_max_pass_8h_source.html#l00071">71</a> of file <a class="el" href="_quantize_with_min_max_pass_8h_source.html">QuantizeWithMinMaxPass.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   71</span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;luci::QuantizeWithMinMaxPass&quot;</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a153fc10df41b30e89f916f705c338242" name="a153fc10df41b30e89f916f705c338242"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a153fc10df41b30e89f916f705c338242">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool luci::QuantizeWithMinMaxPass::run </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classloco_1_1_graph.html">loco::Graph</a> *&#160;</td>
          <td class="paramname"><em>g</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >How QuantizeWithMinMax works?</p>
<p >We categorized tensors into four groups</p><ul>
<li>Activation: Feature maps (both Const/Non-const)</li>
<li>Weights: Const tensors of specific Ops (Conv, FC, ...)</li>
<li>Bias: Const tensors of specific Ops (Conv, FC, ...)</li>
<li>Others: padding value, one_hot value, axis, ..</li>
</ul>
<p >Activation is quantized in different ways</p><ol type="1">
<li>For non-constant activation, quantize using recorded min/max</li>
<li>For constant activation, quantize using min/max of its value</li>
<li>For some Ops (ex: pad_v2), output qparam is used as input qparam (backward propagation)</li>
<li>For some Ops (ex: reshape), input qparam is used as output qparam (forward propagation)</li>
<li>For some Ops (ex: tanh), output qparam has pre-defined values</li>
</ol>
<p >Weights is quantized using min/max of its value</p>
<p >Bias is quantized using input scale (s_i) and weights scale (s_w)</p><ul>
<li>Therefore, activation and weights should be quantized earlier than bias</li>
</ul>
<p >Overall Quantization Steps</p><ol type="1">
<li>Quantize Activation<ul>
<li>Quantize using recorded min/max (QuantizeActivation)</li>
<li>Insert Quantize Ops for mixed-precision quantization (InsertQuantizeOp)</li>
<li>Remove redundant Quantize Ops (RemoveRedundantQuantizePass)</li>
<li>Propagate qparam backward (PropagateQParamBackwardPass)</li>
<li>Quantize const inputs (QuantizeConstInputActivation)</li>
<li>Quantize using pre-defined values (QuantizeSpecialActivation)</li>
<li>Propagate qparam forward (PropagateQParamForwardPass)</li>
</ul>
</li>
<li>Quantize Weights</li>
<li>Quantize Bias</li>
<li>Set input dtype</li>
<li>Set output dtype</li>
</ol>
<p >Why quantization sequence was determined as above?</p><ul>
<li>Activation and weights should be quantized before bias (1-&gt;2-&gt;3). Input/Output dtype can be updated at the end (4-&gt;5).</li>
<li>During activation quantization,<ul>
<li>Backward propagation is performed earlier than forward propagation. This allows backward-propagated qpram to be overwritten during forward propagation. We made this decision as Ops for forward propagation (reshape, transpose, ..) are more common than backward propagation. TODO Check this decision is safe.</li>
<li>QuantizeSpecialActivation is called before forward propagation to make sure that the pre-defined qparam values are propagated. </li>
</ul>
</li>
</ul>

<p>Implements <a class="el" href="classlogo_1_1_pass.html#a3076e513d3bf84dafeb158a028725374">logo::Pass</a>.</p>

<p class="definition">Definition at line <a class="el" href="_quantize_with_min_max_pass_8cpp_source.html#l00531">531</a> of file <a class="el" href="_quantize_with_min_max_pass_8cpp_source.html">QuantizeWithMinMaxPass.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  532</span>{</div>
<div class="line"><span class="lineno">  533</span>  <a class="code hl_define" href="circlechef_2log_2include_2_log_8h.html#a5495ed6c3fae204a397f0edad87f820e">LOGGER</a>(l);</div>
<div class="line"><span class="lineno">  534</span>  <a class="code hl_define" href="circlechef_2log_2include_2_log_8h.html#a7af9b9d1a859db99acb5e3447167b029">INFO</a>(l) &lt;&lt; <span class="stringliteral">&quot;QuantizeWithMinMaxPass Start&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  535</span> </div>
<div class="line"><span class="lineno">  536</span>  <span class="keyword">auto</span> info_by_name = <a class="code hl_function" href="namespaceluci.html#a22258d95f19cad911e52309c50613e07">layer_info_map</a>(g, _ctx-&gt;layers_info);</div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>  <span class="keyword">auto</span> quantize_dtype = [&amp;](<span class="keyword">const</span> <a class="code hl_struct" href="structluci_1_1_circle_node.html">luci::CircleNode</a> *node) {</div>
<div class="line"><span class="lineno">  539</span>    <span class="keyword">auto</span> iter = info_by_name.find(node-&gt;name());</div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  541</span>    <span class="comment">// Return designated quantization dtype</span></div>
<div class="line"><span class="lineno">  542</span>    <span class="keywordflow">if</span> (iter != info_by_name.end())</div>
<div class="line"><span class="lineno">  543</span>      <span class="keywordflow">return</span> iter-&gt;second.dtype;</div>
<div class="line"><span class="lineno">  544</span> </div>
<div class="line"><span class="lineno">  545</span>    <span class="comment">// Return default quantization dtype</span></div>
<div class="line"><span class="lineno">  546</span>    <span class="keywordflow">return</span> _ctx-&gt;output_model_dtype;</div>
<div class="line"><span class="lineno">  547</span>  };</div>
<div class="line"><span class="lineno">  548</span> </div>
<div class="line"><span class="lineno">  549</span>  <span class="keyword">auto</span> quantize_granularity = [&amp;](<span class="keyword">const</span> <a class="code hl_struct" href="structluci_1_1_circle_node.html">luci::CircleNode</a> *node) {</div>
<div class="line"><span class="lineno">  550</span>    <span class="keyword">auto</span> iter = info_by_name.find(node-&gt;name());</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>    <span class="comment">// Return designated quantization granularity</span></div>
<div class="line"><span class="lineno">  553</span>    <span class="keywordflow">if</span> (iter != info_by_name.end())</div>
<div class="line"><span class="lineno">  554</span>      <span class="keywordflow">return</span> iter-&gt;second.granularity;</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>    <span class="comment">// Return default quantization granularity</span></div>
<div class="line"><span class="lineno">  557</span>    <span class="keywordflow">return</span> _ctx-&gt;granularity;</div>
<div class="line"><span class="lineno">  558</span>  };</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>  <span class="comment">// Quantize activation</span></div>
<div class="line"><span class="lineno">  561</span>  <span class="comment">// Why all_nodes?</span></div>
<div class="line"><span class="lineno">  562</span>  <span class="comment">// Models can have inactive (unused) inputs.</span></div>
<div class="line"><span class="lineno">  563</span>  <span class="comment">// We do not reject such models, but quantize them too</span></div>
<div class="line"><span class="lineno">  564</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> node : <a class="code hl_function" href="namespaceloco.html#a2316705571d54991d81041a0b9cbc557">loco::all_nodes</a>(g))</div>
<div class="line"><span class="lineno">  565</span>  {</div>
<div class="line"><span class="lineno">  566</span>    <span class="keyword">auto</span> circle_node = loco::must_cast&lt;luci::CircleNode *&gt;(node);</div>
<div class="line"><span class="lineno">  567</span>    <a class="code hl_struct" href="structluci_1_1_quantize_activation.html">QuantizeActivation</a> qa(_ctx-&gt;input_model_dtype, quantize_dtype(circle_node));</div>
<div class="line"><span class="lineno">  568</span>    circle_node-&gt;accept(&amp;qa);</div>
<div class="line"><span class="lineno">  569</span>  }</div>
<div class="line"><span class="lineno">  570</span> </div>
<div class="line"><span class="lineno">  571</span>  <span class="comment">// Insert Quantize Op</span></div>
<div class="line"><span class="lineno">  572</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> node : <a class="code hl_function" href="namespaceloco.html#a91be999912c01878c820e684adc124da">loco::active_nodes</a>(<a class="code hl_function" href="namespaceloco.html#ac026f76015947855f2cecfd0aab1d23a">loco::output_nodes</a>(g)))</div>
<div class="line"><span class="lineno">  573</span>  {</div>
<div class="line"><span class="lineno">  574</span>    <span class="keyword">auto</span> circle_node = loco::must_cast&lt;luci::CircleNode *&gt;(node);</div>
<div class="line"><span class="lineno">  575</span>    <span class="keyword">auto</span> op_dtype = quantize_dtype(circle_node);</div>
<div class="line"><span class="lineno">  576</span>    <span class="keywordflow">if</span> (op_dtype != _ctx-&gt;output_model_dtype)</div>
<div class="line"><span class="lineno">  577</span>    {</div>
<div class="line"><span class="lineno">  578</span>      InsertQuantizeOp iqo(_ctx-&gt;output_model_dtype, op_dtype);</div>
<div class="line"><span class="lineno">  579</span>      circle_node-&gt;accept(&amp;iqo);</div>
<div class="line"><span class="lineno">  580</span>    }</div>
<div class="line"><span class="lineno">  581</span>  }</div>
<div class="line"><span class="lineno">  582</span> </div>
<div class="line"><span class="lineno">  583</span>  <span class="comment">// Remove redundant Quantize Op</span></div>
<div class="line"><span class="lineno">  584</span>  {</div>
<div class="line"><span class="lineno">  585</span>    <a class="code hl_typedef" href="namespacelogo.html#ad0979fe288c253875f561bc041393cd4">logo::Phase</a> phase;</div>
<div class="line"><span class="lineno">  586</span> </div>
<div class="line"><span class="lineno">  587</span>    phase.emplace_back(std::make_unique&lt;luci::RemoveRedundantQuantizePass&gt;());</div>
<div class="line"><span class="lineno">  588</span> </div>
<div class="line"><span class="lineno">  589</span>    <a class="code hl_class" href="classluci_1_1_progress_reporter.html">ProgressReporter</a> prog(g, <a class="code hl_enumvalue" href="namespacelogo.html#a9a8b3c8cbccc78429eb48d016d4eadb6afbf427bdeb4244eecca41246de32b36d">logo::PhaseStrategy::Saturate</a>);</div>
<div class="line"><span class="lineno">  590</span>    <a class="code hl_class" href="classlogo_1_1_phase_runner.html">logo::PhaseRunner&lt;logo::PhaseStrategy::Saturate&gt;</a> phase_runner{<a class="code hl_variable" href="namespace_gen_h5_random_inputs.html#a7210f017c15aa9fb47b012adefcf31dd">g</a>};</div>
<div class="line"><span class="lineno">  591</span>    phase_runner.attach(&amp;prog);</div>
<div class="line"><span class="lineno">  592</span>    phase_runner.run(phase);</div>
<div class="line"><span class="lineno">  593</span>  }</div>
<div class="line"><span class="lineno">  594</span> </div>
<div class="line"><span class="lineno">  595</span>  <span class="comment">// Backward propagation of activation qparam</span></div>
<div class="line"><span class="lineno">  596</span>  {</div>
<div class="line"><span class="lineno">  597</span>    <a class="code hl_struct" href="structluci_1_1_propagate_q_param_backward_pass.html">PropagateQParamBackwardPass</a> pqbp(_ctx-&gt;output_model_dtype);</div>
<div class="line"><span class="lineno">  598</span>    pqbp.run(g);</div>
<div class="line"><span class="lineno">  599</span>  }</div>
<div class="line"><span class="lineno">  600</span> </div>
<div class="line"><span class="lineno">  601</span>  <span class="comment">// Quantize const input activation</span></div>
<div class="line"><span class="lineno">  602</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> node : <a class="code hl_function" href="namespaceloco.html#a91be999912c01878c820e684adc124da">loco::active_nodes</a>(<a class="code hl_function" href="namespaceloco.html#ac026f76015947855f2cecfd0aab1d23a">loco::output_nodes</a>(g)))</div>
<div class="line"><span class="lineno">  603</span>  {</div>
<div class="line"><span class="lineno">  604</span>    <span class="keyword">auto</span> circle_node = loco::must_cast&lt;luci::CircleNode *&gt;(node);</div>
<div class="line"><span class="lineno">  605</span>    <a class="code hl_struct" href="structluci_1_1_quantize_const_input_activation.html">QuantizeConstInputActivation</a> qcia(quantize_dtype(circle_node));</div>
<div class="line"><span class="lineno">  606</span>    circle_node-&gt;accept(&amp;qcia);</div>
<div class="line"><span class="lineno">  607</span>  }</div>
<div class="line"><span class="lineno">  608</span> </div>
<div class="line"><span class="lineno">  609</span>  <span class="comment">// Update qparam of output of special Ops</span></div>
<div class="line"><span class="lineno">  610</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> node : <a class="code hl_function" href="namespaceloco.html#a91be999912c01878c820e684adc124da">loco::active_nodes</a>(<a class="code hl_function" href="namespaceloco.html#ac026f76015947855f2cecfd0aab1d23a">loco::output_nodes</a>(g)))</div>
<div class="line"><span class="lineno">  611</span>  {</div>
<div class="line"><span class="lineno">  612</span>    <span class="keyword">auto</span> circle_node = loco::must_cast&lt;luci::CircleNode *&gt;(node);</div>
<div class="line"><span class="lineno">  613</span>    <a class="code hl_struct" href="structluci_1_1_quantize_special_activation.html">QuantizeSpecialActivation</a> qsa(_ctx-&gt;input_model_dtype, quantize_dtype(circle_node));</div>
<div class="line"><span class="lineno">  614</span>    circle_node-&gt;accept(&amp;qsa);</div>
<div class="line"><span class="lineno">  615</span>  }</div>
<div class="line"><span class="lineno">  616</span> </div>
<div class="line"><span class="lineno">  617</span>  <span class="comment">// Forward propagation of activation qparam</span></div>
<div class="line"><span class="lineno">  618</span>  <a class="code hl_typedef" href="namespacelogo.html#ad0979fe288c253875f561bc041393cd4">logo::Phase</a> phase;</div>
<div class="line"><span class="lineno">  619</span> </div>
<div class="line"><span class="lineno">  620</span>  phase.emplace_back(std::make_unique&lt;luci::PropagateQParamForwardPass&gt;(_ctx-&gt;TF_style_maxpool));</div>
<div class="line"><span class="lineno">  621</span> </div>
<div class="line"><span class="lineno">  622</span>  <a class="code hl_class" href="classluci_1_1_progress_reporter.html">ProgressReporter</a> prog(g, <a class="code hl_enumvalue" href="namespacelogo.html#a9a8b3c8cbccc78429eb48d016d4eadb6afbf427bdeb4244eecca41246de32b36d">logo::PhaseStrategy::Saturate</a>);</div>
<div class="line"><span class="lineno">  623</span>  <a class="code hl_class" href="classlogo_1_1_phase_runner.html">logo::PhaseRunner&lt;logo::PhaseStrategy::Saturate&gt;</a> phase_runner{<a class="code hl_variable" href="namespace_gen_h5_random_inputs.html#a7210f017c15aa9fb47b012adefcf31dd">g</a>};</div>
<div class="line"><span class="lineno">  624</span>  phase_runner.attach(&amp;prog);</div>
<div class="line"><span class="lineno">  625</span>  phase_runner.run(phase);</div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span>  <span class="comment">// Quantize weights</span></div>
<div class="line"><span class="lineno">  628</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> node : <a class="code hl_function" href="namespaceloco.html#a91be999912c01878c820e684adc124da">loco::active_nodes</a>(<a class="code hl_function" href="namespaceloco.html#ac026f76015947855f2cecfd0aab1d23a">loco::output_nodes</a>(g)))</div>
<div class="line"><span class="lineno">  629</span>  {</div>
<div class="line"><span class="lineno">  630</span>    <span class="keyword">auto</span> circle_node = loco::must_cast&lt;luci::CircleNode *&gt;(node);</div>
<div class="line"><span class="lineno">  631</span>    <a class="code hl_struct" href="structluci_1_1_quantize_weights.html">QuantizeWeights</a> qw(_ctx-&gt;input_model_dtype, quantize_dtype(circle_node),</div>
<div class="line"><span class="lineno">  632</span>                       quantize_granularity(circle_node));</div>
<div class="line"><span class="lineno">  633</span>    circle_node-&gt;accept(&amp;qw);</div>
<div class="line"><span class="lineno">  634</span>  }</div>
<div class="line"><span class="lineno">  635</span> </div>
<div class="line"><span class="lineno">  636</span>  <span class="comment">// Quantize bias</span></div>
<div class="line"><span class="lineno">  637</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> node : <a class="code hl_function" href="namespaceloco.html#a91be999912c01878c820e684adc124da">loco::active_nodes</a>(<a class="code hl_function" href="namespaceloco.html#ac026f76015947855f2cecfd0aab1d23a">loco::output_nodes</a>(g)))</div>
<div class="line"><span class="lineno">  638</span>  {</div>
<div class="line"><span class="lineno">  639</span>    <span class="keyword">auto</span> circle_node = loco::must_cast&lt;luci::CircleNode *&gt;(node);</div>
<div class="line"><span class="lineno">  640</span>    <a class="code hl_struct" href="structluci_1_1_quantize_bias.html">QuantizeBias</a> qb(_ctx-&gt;input_model_dtype, quantize_dtype(circle_node),</div>
<div class="line"><span class="lineno">  641</span>                    quantize_granularity(circle_node));</div>
<div class="line"><span class="lineno">  642</span>    circle_node-&gt;accept(&amp;qb);</div>
<div class="line"><span class="lineno">  643</span>  }</div>
<div class="line"><span class="lineno">  644</span> </div>
<div class="line"><span class="lineno">  645</span>  <span class="comment">// Update output dtype</span></div>
<div class="line"><span class="lineno">  646</span>  <span class="keyword">auto</span> graph_outputs = <a class="code hl_variable" href="namespace_gen_h5_random_inputs.html#a7210f017c15aa9fb47b012adefcf31dd">g</a>-&gt;outputs();</div>
<div class="line"><span class="lineno">  647</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> node : <a class="code hl_function" href="namespaceloco.html#ac026f76015947855f2cecfd0aab1d23a">loco::output_nodes</a>(g))</div>
<div class="line"><span class="lineno">  648</span>  {</div>
<div class="line"><span class="lineno">  649</span>    <span class="keyword">auto</span> circle_node = loco::must_cast&lt;luci::CircleOutput *&gt;(node);</div>
<div class="line"><span class="lineno">  650</span>    <span class="keywordflow">if</span> (<span class="keyword">static_cast&lt;</span><a class="code hl_struct" href="structluci_1_1_circle_node.html">luci::CircleNode</a> *<span class="keyword">&gt;</span>(circle_node-&gt;from())-&gt;dtype() == _ctx-&gt;output_model_dtype)</div>
<div class="line"><span class="lineno">  651</span>    {</div>
<div class="line"><span class="lineno">  652</span>      circle_node-&gt;dtype(_ctx-&gt;output_model_dtype);</div>
<div class="line"><span class="lineno">  653</span>      <span class="keyword">auto</span> graph_output = graph_outputs-&gt;at(circle_node-&gt;index());</div>
<div class="line"><span class="lineno">  654</span>      graph_output-&gt;dtype(_ctx-&gt;output_model_dtype);</div>
<div class="line"><span class="lineno">  655</span>    }</div>
<div class="line"><span class="lineno">  656</span>  }</div>
<div class="line"><span class="lineno">  657</span> </div>
<div class="line"><span class="lineno">  658</span>  <span class="comment">// Set input type</span></div>
<div class="line"><span class="lineno">  659</span>  set_input_type(g);</div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>  <span class="comment">// Set output type</span></div>
<div class="line"><span class="lineno">  662</span>  set_output_type(g);</div>
<div class="line"><span class="lineno">  663</span> </div>
<div class="line"><span class="lineno">  664</span>  <span class="comment">// Remove redundant Quantize Op</span></div>
<div class="line"><span class="lineno">  665</span>  {</div>
<div class="line"><span class="lineno">  666</span>    <a class="code hl_typedef" href="namespacelogo.html#ad0979fe288c253875f561bc041393cd4">logo::Phase</a> phase;</div>
<div class="line"><span class="lineno">  667</span> </div>
<div class="line"><span class="lineno">  668</span>    phase.emplace_back(std::make_unique&lt;luci::RemoveRedundantQuantizePass&gt;());</div>
<div class="line"><span class="lineno">  669</span> </div>
<div class="line"><span class="lineno">  670</span>    <a class="code hl_class" href="classluci_1_1_progress_reporter.html">ProgressReporter</a> prog(g, <a class="code hl_enumvalue" href="namespacelogo.html#a9a8b3c8cbccc78429eb48d016d4eadb6afbf427bdeb4244eecca41246de32b36d">logo::PhaseStrategy::Saturate</a>);</div>
<div class="line"><span class="lineno">  671</span>    <a class="code hl_class" href="classlogo_1_1_phase_runner.html">logo::PhaseRunner&lt;logo::PhaseStrategy::Saturate&gt;</a> phase_runner{<a class="code hl_variable" href="namespace_gen_h5_random_inputs.html#a7210f017c15aa9fb47b012adefcf31dd">g</a>};</div>
<div class="line"><span class="lineno">  672</span>    phase_runner.attach(&amp;prog);</div>
<div class="line"><span class="lineno">  673</span>    phase_runner.run(phase);</div>
<div class="line"><span class="lineno">  674</span>  }</div>
<div class="line"><span class="lineno">  675</span> </div>
<div class="line"><span class="lineno">  676</span>  <span class="comment">// Remove min/max values</span></div>
<div class="line"><span class="lineno">  677</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> node : <a class="code hl_function" href="namespaceloco.html#a91be999912c01878c820e684adc124da">loco::active_nodes</a>(<a class="code hl_function" href="namespaceloco.html#ac026f76015947855f2cecfd0aab1d23a">loco::output_nodes</a>(g)))</div>
<div class="line"><span class="lineno">  678</span>  {</div>
<div class="line"><span class="lineno">  679</span>    <span class="keyword">auto</span> circle_node = loco::must_cast&lt;luci::CircleNode *&gt;(node);</div>
<div class="line"><span class="lineno">  680</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span> qparam = circle_node-&gt;quantparam())</div>
<div class="line"><span class="lineno">  681</span>    {</div>
<div class="line"><span class="lineno">  682</span>      <a class="code hl_function" href="namespaceluci.html#a1ef77fe953130949713bdae6c170b133">warn_accuracy_with_range</a>(circle_node);</div>
<div class="line"><span class="lineno">  683</span>      qparam-&gt;min.clear();</div>
<div class="line"><span class="lineno">  684</span>      qparam-&gt;max.clear();</div>
<div class="line"><span class="lineno">  685</span>    }</div>
<div class="line"><span class="lineno">  686</span>  }</div>
<div class="line"><span class="lineno">  687</span> </div>
<div class="line"><span class="lineno">  688</span>  <a class="code hl_define" href="circlechef_2log_2include_2_log_8h.html#a7af9b9d1a859db99acb5e3447167b029">INFO</a>(l) &lt;&lt; <span class="stringliteral">&quot;QuantizeWithMinMaxPass End&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  689</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// one time run</span></div>
<div class="line"><span class="lineno">  690</span>}</div>
<div class="ttc" id="acirclechef_2log_2include_2_log_8h_html_a5495ed6c3fae204a397f0edad87f820e"><div class="ttname"><a href="circlechef_2log_2include_2_log_8h.html#a5495ed6c3fae204a397f0edad87f820e">LOGGER</a></div><div class="ttdeci">#define LOGGER(name)</div><div class="ttdef"><b>Definition:</b> <a href="circlechef_2log_2include_2_log_8h_source.html#l00065">Log.h:65</a></div></div>
<div class="ttc" id="acirclechef_2log_2include_2_log_8h_html_a7af9b9d1a859db99acb5e3447167b029"><div class="ttname"><a href="circlechef_2log_2include_2_log_8h.html#a7af9b9d1a859db99acb5e3447167b029">INFO</a></div><div class="ttdeci">#define INFO(name)</div><div class="ttdef"><b>Definition:</b> <a href="circlechef_2log_2include_2_log_8h_source.html#l00068">Log.h:68</a></div></div>
<div class="ttc" id="aclasslogo_1_1_phase_runner_html"><div class="ttname"><a href="classlogo_1_1_phase_runner.html">logo::PhaseRunner</a></div><div class="ttdef"><b>Definition:</b> <a href="compiler_2logo-core_2include_2logo_2_phase_8h_source.html#l00158">Phase.h:158</a></div></div>
<div class="ttc" id="aclassluci_1_1_progress_reporter_html"><div class="ttname"><a href="classluci_1_1_progress_reporter.html">luci::ProgressReporter</a></div><div class="ttdef"><b>Definition:</b> <a href="luci_2export_2src_2_progress_reporter_8h_source.html#l00027">ProgressReporter.h:28</a></div></div>
<div class="ttc" id="anamespace_gen_h5_random_inputs_html_a7210f017c15aa9fb47b012adefcf31dd"><div class="ttname"><a href="namespace_gen_h5_random_inputs.html#a7210f017c15aa9fb47b012adefcf31dd">GenH5RandomInputs.g</a></div><div class="ttdeci">g</div><div class="ttdef"><b>Definition:</b> <a href="_gen_h5_random_inputs_8py_source.html#l00062">GenH5RandomInputs.py:62</a></div></div>
<div class="ttc" id="anamespaceloco_html_a2316705571d54991d81041a0b9cbc557"><div class="ttname"><a href="namespaceloco.html#a2316705571d54991d81041a0b9cbc557">loco::all_nodes</a></div><div class="ttdeci">std::set&lt; Node * &gt; all_nodes(Graph *)</div><div class="ttdoc">Enumerate all the nodes in a given graph.</div><div class="ttdef"><b>Definition:</b> <a href="loco_2src_2_i_r_2_graph_8cpp_source.html#l00059">Graph.cpp:59</a></div></div>
<div class="ttc" id="anamespaceloco_html_a91be999912c01878c820e684adc124da"><div class="ttname"><a href="namespaceloco.html#a91be999912c01878c820e684adc124da">loco::active_nodes</a></div><div class="ttdeci">std::set&lt; loco::Node * &gt; active_nodes(const std::vector&lt; loco::Node * &gt; &amp;roots)</div><div class="ttdoc">Enumerate all the nodes required to compute &quot;roots&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="_algorithm_8cpp_source.html#l00112">Algorithm.cpp:112</a></div></div>
<div class="ttc" id="anamespaceloco_html_ac026f76015947855f2cecfd0aab1d23a"><div class="ttname"><a href="namespaceloco.html#ac026f76015947855f2cecfd0aab1d23a">loco::output_nodes</a></div><div class="ttdeci">std::vector&lt; Node * &gt; output_nodes(Graph *)</div><div class="ttdef"><b>Definition:</b> <a href="loco_2src_2_i_r_2_graph_8cpp_source.html#l00101">Graph.cpp:101</a></div></div>
<div class="ttc" id="anamespacelogo_html_a9a8b3c8cbccc78429eb48d016d4eadb6afbf427bdeb4244eecca41246de32b36d"><div class="ttname"><a href="namespacelogo.html#a9a8b3c8cbccc78429eb48d016d4eadb6afbf427bdeb4244eecca41246de32b36d">logo::PhaseStrategy::Saturate</a></div><div class="ttdeci">@ Saturate</div></div>
<div class="ttc" id="anamespacelogo_html_ad0979fe288c253875f561bc041393cd4"><div class="ttname"><a href="namespacelogo.html#ad0979fe288c253875f561bc041393cd4">logo::Phase</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; Pass &gt; &gt; Phase</div><div class="ttdef"><b>Definition:</b> <a href="compiler_2logo-core_2include_2logo_2_phase_8h_source.html#l00031">Phase.h:31</a></div></div>
<div class="ttc" id="anamespaceluci_html_a1ef77fe953130949713bdae6c170b133"><div class="ttname"><a href="namespaceluci.html#a1ef77fe953130949713bdae6c170b133">luci::warn_accuracy_with_range</a></div><div class="ttdeci">void warn_accuracy_with_range(luci::CircleNode *n)</div><div class="ttdef"><b>Definition:</b> <a href="_quantization_utils_8cpp_source.html#l00496">QuantizationUtils.cpp:496</a></div></div>
<div class="ttc" id="anamespaceluci_html_a22258d95f19cad911e52309c50613e07"><div class="ttname"><a href="namespaceluci.html#a22258d95f19cad911e52309c50613e07">luci::layer_info_map</a></div><div class="ttdeci">LayerInfoMap layer_info_map(loco::Graph *g, std::vector&lt; LayerInfo &gt; &amp;layers_info)</div><div class="ttdef"><b>Definition:</b> <a href="_layer_info_map_8cpp_source.html#l00142">LayerInfoMap.cpp:142</a></div></div>
<div class="ttc" id="astructluci_1_1_circle_node_html"><div class="ttname"><a href="structluci_1_1_circle_node.html">luci::CircleNode</a></div><div class="ttdef"><b>Definition:</b> <a href="luci_2lang_2include_2luci_2_i_r_2_circle_node_decl_8h_source.html#l00037">CircleNodeDecl.h:40</a></div></div>
<div class="ttc" id="astructluci_1_1_propagate_q_param_backward_pass_html"><div class="ttname"><a href="structluci_1_1_propagate_q_param_backward_pass.html">luci::PropagateQParamBackwardPass</a></div><div class="ttdoc">Class to propagate quantization parameters of an operator's output to input.</div><div class="ttdef"><b>Definition:</b> <a href="_propagate_q_param_backward_pass_8h_source.html#l00028">PropagateQParamBackwardPass.h:29</a></div></div>
<div class="ttc" id="astructluci_1_1_quantize_activation_html"><div class="ttname"><a href="structluci_1_1_quantize_activation.html">luci::QuantizeActivation</a></div><div class="ttdoc">Quantize non-const activation using recorded min/max values.</div><div class="ttdef"><b>Definition:</b> <a href="_quantize_activation_8h_source.html#l00028">QuantizeActivation.h:29</a></div></div>
<div class="ttc" id="astructluci_1_1_quantize_bias_html"><div class="ttname"><a href="structluci_1_1_quantize_bias.html">luci::QuantizeBias</a></div><div class="ttdoc">QuantizeBias quantizes tensors for bias.</div><div class="ttdef"><b>Definition:</b> <a href="_quantize_bias_8h_source.html#l00030">QuantizeBias.h:31</a></div></div>
<div class="ttc" id="astructluci_1_1_quantize_const_input_activation_html"><div class="ttname"><a href="structluci_1_1_quantize_const_input_activation.html">luci::QuantizeConstInputActivation</a></div><div class="ttdef"><b>Definition:</b> <a href="_quantize_activation_8h_source.html#l00069">QuantizeActivation.h:70</a></div></div>
<div class="ttc" id="astructluci_1_1_quantize_special_activation_html"><div class="ttname"><a href="structluci_1_1_quantize_special_activation.html">luci::QuantizeSpecialActivation</a></div><div class="ttdoc">Quantize non-const activaion using pre-defined scale/zp for special Ops.</div><div class="ttdef"><b>Definition:</b> <a href="_quantize_activation_8h_source.html#l00045">QuantizeActivation.h:46</a></div></div>
<div class="ttc" id="astructluci_1_1_quantize_weights_html"><div class="ttname"><a href="structluci_1_1_quantize_weights.html">luci::QuantizeWeights</a></div><div class="ttdoc">QuantizeWeights quantizes tensors for weights.</div><div class="ttdef"><b>Definition:</b> <a href="_quantize_weights_8h_source.html#l00030">QuantizeWeights.h:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_algorithm_8cpp_source.html#l00112">loco::active_nodes()</a>, <a class="el" href="loco_2src_2_i_r_2_graph_8cpp_source.html#l00059">loco::all_nodes()</a>, <a class="el" href="circlechef_2log_2include_2_log_8h_source.html#l00068">INFO</a>, <a class="el" href="_layer_info_map_8cpp_source.html#l00142">luci::layer_info_map()</a>, <a class="el" href="circlechef_2log_2include_2_log_8h_source.html#l00065">LOGGER</a>, <a class="el" href="luci_2lang_2include_2luci_2_i_r_2_circle_node_decl_8h_source.html#l00049">luci::CircleNode::name()</a>, <a class="el" href="loco_2src_2_i_r_2_graph_8cpp_source.html#l00101">loco::output_nodes()</a>, <a class="el" href="_propagate_q_param_backward_pass_8cpp_source.html#l00458">luci::PropagateQParamBackwardPass::run()</a>, <a class="el" href="namespacelogo.html#a9a8b3c8cbccc78429eb48d016d4eadb6afbf427bdeb4244eecca41246de32b36d">logo::Saturate</a>, and <a class="el" href="_quantization_utils_8cpp_source.html#l00496">luci::warn_accuracy_with_range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="luci_2pass_2src_2_circle_quantizer_8cpp_source.html#l00170">luci::CircleQuantizer::quantize()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>compiler/luci/pass/include/luci/Pass/<a class="el" href="_quantize_with_min_max_pass_8h_source.html">QuantizeWithMinMaxPass.h</a></li>
<li>compiler/luci/pass/src/<a class="el" href="_quantize_with_min_max_pass_8cpp_source.html">QuantizeWithMinMaxPass.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceluci.html">luci</a></li><li class="navelem"><a class="el" href="classluci_1_1_quantize_with_min_max_pass.html">QuantizeWithMinMaxPass</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
