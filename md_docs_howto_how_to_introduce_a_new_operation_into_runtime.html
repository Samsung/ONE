<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ONE - On-device Neural Engine: How To Introduce a New Operation Into Runtime</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ONE - On-device Neural Engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_howto_how_to_introduce_a_new_operation_into_runtime.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">How To Introduce a New Operation Into Runtime </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><b>ONE</b>'s runtime has three main modules: <b>core</b>, <b>frontend</b> and <b>backend</b>. This document provides some lightweight guidance about how to introduce a new operation into these modules to make onert support the operation.</p>
<h1>Index</h1>
<ul>
<li>How To Introduce a New Operation Into Runtime<ul>
<li><a class="el" href="index.html">Index</a></li>
<li>Core</li>
<li>Frontend<ul>
<li>Loaders<ul>
<li>Base Loader</li>
<li>TFLite Loader</li>
<li>Circle Loader</li>
</ul>
</li>
<li>NNAPI</li>
</ul>
</li>
<li>Backend<ul>
<li>ShapeFixer<ul>
<li>acl_cl</li>
<li>acl_neon</li>
<li>cpu</li>
</ul>
</li>
<li>KernelGenerator<ul>
<li>acl_cl</li>
<li>acl_neon</li>
<li>cpu</li>
</ul>
</li>
<li>ConstantInitializer (in some cases)<ul>
<li>cpu</li>
</ul>
</li>
</ul>
</li>
<li>Samples (to be updated)</li>
</ul>
</li>
</ul>
<h1>Core</h1>
<p >This module has graph-based IR(intermediate representation). You have to add IR for the new operation.</p>
<ol type="1">
<li>Add name of new operation at <a href="/runtime/onert/core/include/ir/Operations.lst">Operations.lst</a></li>
</ol>
<div class="fragment"><div class="line"><a class="code hl_define" href="_op_8h.html#af4b897c94610035ef1fcaccd251a8eaa">OP</a>(Select)</div>
<div class="ttc" id="a_op_8h_html_af4b897c94610035ef1fcaccd251a8eaa"><div class="ttname"><a href="_op_8h.html#af4b897c94610035ef1fcaccd251a8eaa">OP</a></div><div class="ttdeci">#define OP(Name)</div><div class="ttdef"><b>Definition:</b> <a href="_op_8h_source.html#l00136">Op.h:136</a></div></div>
</div><!-- fragment --><ol type="1">
<li>Create a class for node of new operation in <a href="/runtime/onert/core/include/ir/operation/">here</a></li>
</ol>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;ir/Operation.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceonert.html">onert</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">namespace </span>ir</div>
<div class="line">{</div>
<div class="line"><span class="keyword">namespace </span>operation</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>Select : <span class="keyword">public</span> <a class="code hl_struct" href="struct_operation.html">Operation</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <span class="keyword">enum</span> <a class="code hl_enumeration" href="classonert_1_1ir_1_1operation_1_1_select.html#a57feacffca5a5139ac1733628b4c22dd">Input</a></div>
<div class="line">  {</div>
<div class="line">    COND = 0,</div>
<div class="line">    INPUT1 = 1,</div>
<div class="line">    INPUT2 = 2</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">enum</span> Output</div>
<div class="line">  {</div>
<div class="line">    OUTPUT = 0,</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <a class="code hl_function" href="classonert_1_1ir_1_1operation_1_1_select.html#a22884620d65a66205ba7dde9e3f0b6a4">Select</a>(<span class="keyword">const</span> OperandIndexSequence &amp;inputs, <span class="keyword">const</span> OperandIndexSequence &amp;outputs);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <span class="keywordtype">void</span> <a class="code hl_function" href="classonert_1_1ir_1_1operation_1_1_select.html#ac4dd35bf895ecd15b877d988d5bea4ca">accept</a>(OperationVisitor &amp;v) <span class="keyword">const override</span>;</div>
<div class="line">  <a class="code hl_enumeration" href="namespaceonert_1_1ir.html#a587a2982319cf192bc7a6e6e44cde3b7">OpCode</a> <a class="code hl_function" href="classonert_1_1ir_1_1operation_1_1_select.html#a8fc03268e62426ee2386df26b5e9e8c6">opcode</a>() const final { <span class="keywordflow">return</span> OpCode::Select; }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">} <span class="comment">// namespace operation</span></div>
<div class="line">} <span class="comment">// namespace ir</span></div>
<div class="line">} <span class="comment">// namespace onert</span></div>
<div class="ttc" id="aclassonert_1_1ir_1_1operation_1_1_select_html_a22884620d65a66205ba7dde9e3f0b6a4"><div class="ttname"><a href="classonert_1_1ir_1_1operation_1_1_select.html#a22884620d65a66205ba7dde9e3f0b6a4">onert::ir::operation::Select::Select</a></div><div class="ttdeci">Select(const OperandIndexSequence &amp;inputs, const OperandIndexSequence &amp;outputs)</div><div class="ttdef"><b>Definition:</b> <a href="_select_8cc_source.html#l00030">Select.cc:30</a></div></div>
<div class="ttc" id="aclassonert_1_1ir_1_1operation_1_1_select_html_a57feacffca5a5139ac1733628b4c22dd"><div class="ttname"><a href="classonert_1_1ir_1_1operation_1_1_select.html#a57feacffca5a5139ac1733628b4c22dd">onert::ir::operation::Select::Input</a></div><div class="ttdeci">Input</div><div class="ttdef"><b>Definition:</b> <a href="runtime_2onert_2core_2include_2ir_2operation_2_select_8h_source.html#l00032">Select.h:33</a></div></div>
<div class="ttc" id="aclassonert_1_1ir_1_1operation_1_1_select_html_a8fc03268e62426ee2386df26b5e9e8c6"><div class="ttname"><a href="classonert_1_1ir_1_1operation_1_1_select.html#a8fc03268e62426ee2386df26b5e9e8c6">onert::ir::operation::Select::opcode</a></div><div class="ttdeci">OpCode opcode() const final</div><div class="ttdef"><b>Definition:</b> <a href="runtime_2onert_2core_2include_2ir_2operation_2_select_8h_source.html#l00044">Select.h:44</a></div></div>
<div class="ttc" id="aclassonert_1_1ir_1_1operation_1_1_select_html_ac4dd35bf895ecd15b877d988d5bea4ca"><div class="ttname"><a href="classonert_1_1ir_1_1operation_1_1_select.html#ac4dd35bf895ecd15b877d988d5bea4ca">onert::ir::operation::Select::accept</a></div><div class="ttdeci">void accept(OperationVisitor &amp;v) const override</div><div class="ttdef"><b>Definition:</b> <a href="_select_8cc_source.html#l00028">Select.cc:28</a></div></div>
<div class="ttc" id="anamespaceonert_1_1ir_html_a587a2982319cf192bc7a6e6e44cde3b7"><div class="ttname"><a href="namespaceonert_1_1ir.html#a587a2982319cf192bc7a6e6e44cde3b7">onert::ir::OpCode</a></div><div class="ttdeci">OpCode</div><div class="ttdef"><b>Definition:</b> <a href="_op_code_8h_source.html#l00029">OpCode.h:30</a></div></div>
<div class="ttc" id="anamespaceonert_html"><div class="ttname"><a href="namespaceonert.html">onert</a></div><div class="ttdef"><b>Definition:</b> <a href="_custom_kernel_8cc_source.html#l00019">CustomKernel.cc:20</a></div></div>
<div class="ttc" id="astruct_operation_html"><div class="ttname"><a href="struct_operation.html">Operation</a></div><div class="ttdef"><b>Definition:</b> <a href="compiler_2ann-ref_2src_2_operation_8h_source.html#l00026">Operation.h:26</a></div></div>
</div><!-- fragment --><p >You can also define the class in other source file like below</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="runtime_2onert_2core_2include_2ir_2operation_2_select_8h.html">ir/operation/Select.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_operation_visitor_8h.html">ir/OperationVisitor.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceonert.html">onert</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">namespace </span>ir</div>
<div class="line">{</div>
<div class="line"><span class="keyword">namespace </span>operation</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classonert_1_1ir_1_1operation_1_1_select.html#ac4dd35bf895ecd15b877d988d5bea4ca">Select::accept</a>(OperationVisitor &amp;v)<span class="keyword"> const </span>{ v.visit(*<span class="keyword">this</span>); }</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="classonert_1_1ir_1_1operation_1_1_select.html#a22884620d65a66205ba7dde9e3f0b6a4">Select::Select</a>(<span class="keyword">const</span> OperandIndexSequence &amp;inputs, <span class="keyword">const</span> OperandIndexSequence &amp;outputs)</div>
<div class="line">    : <a class="code hl_struct" href="struct_operation.html">Operation</a>{OperandConstraint::createExact(3u), inputs, outputs}</div>
<div class="line">{</div>
<div class="line">}</div>
<div class="ttc" id="a_operation_visitor_8h_html"><div class="ttname"><a href="_operation_visitor_8h.html">OperationVisitor.h</a></div></div>
<div class="ttc" id="aruntime_2onert_2core_2include_2ir_2operation_2_select_8h_html"><div class="ttname"><a href="runtime_2onert_2core_2include_2ir_2operation_2_select_8h.html">Select.h</a></div></div>
</div><!-- fragment --><ul>
<li><a href="/runtime/onert/core/include/ir/Operations.Include.h">Operations.Include.h</a></li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="runtime_2onert_2core_2include_2ir_2operation_2_select_8h.html">ir/operation/Select.h</a>&quot;</span></div>
</div><!-- fragment --><ol type="1">
<li>Add to the OperationValidator to check if the node is valid.<ul>
<li><a href="/runtime/onert/core/src/compiler/OperationValidator.h">OperationValidator.h</a></li>
</ul>
</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> visit(<span class="keyword">const</span> operation::Select &amp;node) <span class="keyword">override</span>;</div>
</div><!-- fragment --><ul>
<li><a href="/runtime/onert/core/src/compiler/OperationValidator.cc">OperationValidator.cc</a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> OperationValidator::visit(<span class="keyword">const</span> ir::operation::Select &amp;node)</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> output_index{node.getOutputs().at(ir::operation::Select::Output::OUTPUT)};</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> cond_index{node.getInputs().at(ir::operation::Select::Input::COND)};</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> input1_index{node.getInputs().at(ir::operation::Select::Input::INPUT1)};</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> input2_index{node.getInputs().at(ir::operation::Select::Input::INPUT2)};</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_define" href="compute_2cker_2include_2cker_2_shape_8h.html#a044d7f999713173dd3360b0aa40370fd">UNUSED_RELEASE</a>(output_index);</div>
<div class="line">  <a class="code hl_define" href="compute_2cker_2include_2cker_2_shape_8h.html#a044d7f999713173dd3360b0aa40370fd">UNUSED_RELEASE</a>(cond_index);</div>
<div class="line">  <a class="code hl_define" href="compute_2cker_2include_2cker_2_shape_8h.html#a044d7f999713173dd3360b0aa40370fd">UNUSED_RELEASE</a>(input1_index);</div>
<div class="line">  <a class="code hl_define" href="compute_2cker_2include_2cker_2_shape_8h.html#a044d7f999713173dd3360b0aa40370fd">UNUSED_RELEASE</a>(input2_index);</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_variable" href="namespacevalidate__onnx2circle.html#a77a6e2a2481a4974cacf87f336d85e1e">output_type</a> = _ctx.at(output_index).typeInfo();</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> cond_type = _ctx.at(cond_index).typeInfo();</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> input1_type = _ctx.at(input1_index).typeInfo();</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> input2_type = _ctx.at(input2_index).typeInfo();</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_define" href="compute_2cker_2include_2cker_2_shape_8h.html#a044d7f999713173dd3360b0aa40370fd">UNUSED_RELEASE</a>(output_type);</div>
<div class="line">  <a class="code hl_define" href="compute_2cker_2include_2cker_2_shape_8h.html#a044d7f999713173dd3360b0aa40370fd">UNUSED_RELEASE</a>(cond_type);</div>
<div class="line">  <a class="code hl_define" href="compute_2cker_2include_2cker_2_shape_8h.html#a044d7f999713173dd3360b0aa40370fd">UNUSED_RELEASE</a>(input1_type);</div>
<div class="line">  <a class="code hl_define" href="compute_2cker_2include_2cker_2_shape_8h.html#a044d7f999713173dd3360b0aa40370fd">UNUSED_RELEASE</a>(input2_type);</div>
<div class="line"> </div>
<div class="line">  assert(cond_type.type() == ir::DataType::BOOL8);</div>
<div class="line">  assert(<a class="code hl_variable" href="namespacevalidate__onnx2circle.html#a77a6e2a2481a4974cacf87f336d85e1e">output_type</a>.type() == ir::DataType::FLOAT32 || <a class="code hl_variable" href="namespacevalidate__onnx2circle.html#a77a6e2a2481a4974cacf87f336d85e1e">output_type</a>.type() == ir::DataType::INT32 ||</div>
<div class="line">         <a class="code hl_variable" href="namespacevalidate__onnx2circle.html#a77a6e2a2481a4974cacf87f336d85e1e">output_type</a>.type() == ir::DataType::QUANT8_ASYMM);</div>
<div class="line">  assert(<a class="code hl_variable" href="namespacevalidate__onnx2circle.html#a77a6e2a2481a4974cacf87f336d85e1e">output_type</a>.type() == input1_type.type());</div>
<div class="line">  assert(<a class="code hl_variable" href="namespacevalidate__onnx2circle.html#a77a6e2a2481a4974cacf87f336d85e1e">output_type</a>.type() == input2_type.type());</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_variable" href="namespacepart__eval__one.html#aa000372729756a2ed1c28a613ed7cb88">output_shape</a> = _ctx.at(output_index).shape();</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> cond_shape = _ctx.at(cond_index).shape();</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> input1_shape = _ctx.at(input1_index).shape();</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> input2_shape = _ctx.at(input2_index).shape();</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_define" href="compute_2cker_2include_2cker_2_shape_8h.html#a044d7f999713173dd3360b0aa40370fd">UNUSED_RELEASE</a>(output_shape);</div>
<div class="line">  <a class="code hl_define" href="compute_2cker_2include_2cker_2_shape_8h.html#a044d7f999713173dd3360b0aa40370fd">UNUSED_RELEASE</a>(cond_shape);</div>
<div class="line">  <a class="code hl_define" href="compute_2cker_2include_2cker_2_shape_8h.html#a044d7f999713173dd3360b0aa40370fd">UNUSED_RELEASE</a>(input1_shape);</div>
<div class="line">  <a class="code hl_define" href="compute_2cker_2include_2cker_2_shape_8h.html#a044d7f999713173dd3360b0aa40370fd">UNUSED_RELEASE</a>(input2_shape);</div>
<div class="line"> </div>
<div class="line">  assert(output_shape == input1_shape);</div>
<div class="line">  assert(cond_shape == input1_shape);</div>
<div class="line">  assert(input2_shape == input1_shape);</div>
<div class="line">}</div>
<div class="ttc" id="acompute_2cker_2include_2cker_2_shape_8h_html_a044d7f999713173dd3360b0aa40370fd"><div class="ttname"><a href="compute_2cker_2include_2cker_2_shape_8h.html#a044d7f999713173dd3360b0aa40370fd">UNUSED_RELEASE</a></div><div class="ttdeci">#define UNUSED_RELEASE(a)</div><div class="ttdef"><b>Definition:</b> <a href="compute_2cker_2include_2cker_2_shape_8h_source.html#l00026">Shape.h:26</a></div></div>
<div class="ttc" id="anamespacepart__eval__one_html_aa000372729756a2ed1c28a613ed7cb88"><div class="ttname"><a href="namespacepart__eval__one.html#aa000372729756a2ed1c28a613ed7cb88">part_eval_one.output_shape</a></div><div class="ttdeci">list output_shape</div><div class="ttdef"><b>Definition:</b> <a href="part__eval__one_8py_source.html#l00115">part_eval_one.py:115</a></div></div>
<div class="ttc" id="anamespacevalidate__onnx2circle_html_a77a6e2a2481a4974cacf87f336d85e1e"><div class="ttname"><a href="namespacevalidate__onnx2circle.html#a77a6e2a2481a4974cacf87f336d85e1e">validate_onnx2circle.output_type</a></div><div class="ttdeci">output_type</div><div class="ttdef"><b>Definition:</b> <a href="validate__onnx2circle_8py_source.html#l00123">validate_onnx2circle.py:123</a></div></div>
</div><!-- fragment --><ol type="1">
<li>Add to the Dumper to dump IR information of new operation.</li>
</ol>
<ul>
<li><a href="/runtime/onert/core/src/ir/dumper/Dumper.cc">Dumper.cc</a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> Dumper::visit(<span class="keyword">const</span> Select &amp;node)</div>
<div class="line">{</div>
<div class="line">  <a class="code hl_define" href="luci_2log_2include_2luci_2_log_8h.html#a212d71bce44cd84d4fe678058cd5eccd">VERBOSE</a>(LIR) &lt;&lt; <span class="stringliteral">&quot;* Select&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  <a class="code hl_define" href="luci_2log_2include_2luci_2_log_8h.html#a212d71bce44cd84d4fe678058cd5eccd">VERBOSE</a>(LIR) &lt;&lt; <span class="stringliteral">&quot;  - Inputs : Cond(&quot;</span> &lt;&lt; node.getInputs().at(Select::Input::COND).value()</div>
<div class="line">               &lt;&lt; <span class="stringliteral">&quot;) Input1&quot;</span> &lt;&lt; node.getInputs().at(Select::Input::INPUT1).value() &lt;&lt; <span class="stringliteral">&quot;) Input2&quot;</span></div>
<div class="line">               &lt;&lt; node.getInputs().at(Select::Input::INPUT2).value() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  <a class="code hl_define" href="luci_2log_2include_2luci_2_log_8h.html#a212d71bce44cd84d4fe678058cd5eccd">VERBOSE</a>(LIR) &lt;&lt; <span class="stringliteral">&quot;  - Output : Output(&quot;</span> &lt;&lt; node.getOutputs().at(Select::Output::OUTPUT).value()</div>
<div class="line">               &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">}</div>
<div class="ttc" id="aluci_2log_2include_2luci_2_log_8h_html_a212d71bce44cd84d4fe678058cd5eccd"><div class="ttname"><a href="luci_2log_2include_2luci_2_log_8h.html#a212d71bce44cd84d4fe678058cd5eccd">VERBOSE</a></div><div class="ttdeci">#define VERBOSE(name, lv)</div><div class="ttdef"><b>Definition:</b> <a href="luci_2log_2include_2luci_2_log_8h_source.html#l00071">Log.h:71</a></div></div>
</div><!-- fragment --><ol type="1">
<li>Add code for shape inference</li>
</ol>
<ul>
<li>ONE runtime tries to calculate shapes and allocate memory during compilation time. For some calculations of output shapes that cannot be done during compilation time, ONE runtime will calculate shapes and allocate memory during execution time.</li>
<li>Calculation of shapes during compilation time is called <em>static shape inference</em> and calculation of shapes during execution time is called <em>dynamic shape inference</em>.</li>
<li><a href="`/runtime/onert/compiler/StaticShapeInferer.h`"><code>StaticShapeInferer.h</code></a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> visit(<span class="keyword">const</span> ir::operation::Select &amp;op) <span class="keyword">override</span>;</div>
</div><!-- fragment --><ul>
<li><a href="/runtime/onert/core/src/compiler/StaticShapeInferer.cc"><code>StaticShapeInferer.cc</code></a> <div class="fragment"><div class="line"><span class="keywordtype">void</span> StaticShapeInferer::visit(<span class="keyword">const</span> ir::operation::Select &amp;op)</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> input_cond_idx{op.getInputs().at(ir::operation::Select::Input::CONDITION)};</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;input_cond = _operands.at(input_cond_idx);</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;input_true = ...</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;input_false = ...</div>
<div class="line">  ir::Operand &amp;output = ...</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Select output shpae</span></div>
<div class="line">  ir::Shape new_shape = shape_inference::inferSelectShape(</div>
<div class="line">      input_cond.info().shape(), input_true.info().shape(), input_false.info().shape());</div>
<div class="line">  output.info().shape(new_shape);</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li><a href="/runtime/onert/core/include/exec/DynamicShapeInference.h"><code>DynamicShapeInference.h</code></a> <div class="fragment"><div class="line"><span class="keywordtype">void</span> visit(<span class="keyword">const</span> ir::operation::Select &amp;op) <span class="keyword">override</span>;</div>
</div><!-- fragment --></li>
<li><a href="/runtime/onert/core/src/exec/DynamicShapeInference.cc"><code>DynamicShapeInference.cc</code></a> <div class="fragment"><div class="line"><span class="keywordtype">void</span> DynamicShapeInferer::visit(<span class="keyword">const</span> ir::operation::Select &amp;op)</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> input_cond_idx = op.getInputs().at(ir::operation::Select::Input::CONDITION);</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;input_cond = _tensor_registry-&gt;getITensor(input_cond_idx);</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;input_true = ...</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;input_false = ...</div>
<div class="line">  <span class="keyword">auto</span> output = ...</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> ((!input_cond-&gt;is_dynamic()) &amp;&amp; (!input_true-&gt;is_dynamic()) &amp;&amp; (!input_false-&gt;is_dynamic()))</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> input_cond_shape = input_cond-&gt;getShape();</div>
<div class="line">  <span class="keyword">auto</span> input_true_shape = input_true-&gt;getShape();</div>
<div class="line">  <span class="keyword">auto</span> input_false_shape = input_false-&gt;getShape();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Select output shpae</span></div>
<div class="line">  ir::Shape new_shape =</div>
<div class="line">      shape_inference::inferSelectShape(input_cond_shape, input_true_shape, input_false_shape);</div>
<div class="line"> </div>
<div class="line">  output-&gt;applyShape(new_shape);</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
<h1>Frontend</h1>
<p >This module generates IR from a model. There are two kinds of frontend: Loader and NNAPI. First, Loader loads a model file and generates IR from it. Second, NNAPI generates IR from a model set via <a href="https://developer.android.com/ndk/guides/neuralnetworks">Neural Networks API of android</a></p>
<h2>Loaders</h2>
<h3>Base Loader</h3>
<p >This is where the common parts of loaders are implemented.</p>
<ol type="1">
<li>Add to base_loader to load new operation and to generate IR from it</li>
</ol>
<ul>
<li><a href="/runtime/onert/frontend/base_loader/include/base_loader.h">base_loader</a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordflow">case</span> BuiltinOperator::BuiltinOperator_SELECT:</div>
<div class="line">  loadSelect(op);</div>
<div class="line">  <span class="keywordflow">return</span>;</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> LoaderDomain, <span class="keyword">typename</span> SpecificLoader&gt;</div>
<div class="line"><span class="keywordtype">void</span> BaseLoader&lt;LoaderDomain, SpecificLoader&gt;::loadSelect(<span class="keyword">const</span> Operator *op)</div>
<div class="line">{</div>
<div class="line">  ir::OperandIndexSequence inputs;</div>
<div class="line">  ir::OperandIndexSequence outputs;</div>
<div class="line"> </div>
<div class="line">  loadOperationIO(op, inputs, outputs);</div>
<div class="line"> </div>
<div class="line">  std::unique_ptr&lt;ir::Operation&gt; new_op{<span class="keyword">new</span> ir::operation::Select{inputs, outputs}};</div>
<div class="line">  _graph.addOperation(std::move(new_op));</div>
<div class="line">}</div>
</div><!-- fragment --><h3>TFLite Loader</h3>
<p >This loads a tflite file. If you want new operation to be loaded on only TFLite Loader, you only need to implement loading the operation here.</p>
<h3>Circle Loader</h3>
<p >This loads a circle file generated by the compiler. If you want new operation to be loaded on only Circle Loader, you only need to implement loading the operation here.</p>
<h2>NNAPI</h2>
<ol type="1">
<li>Add to the OperationFactory to generate IR of new operation</li>
</ol>
<ul>
<li><a href="/runtime/onert/frontend/nnapi/wrapper/OperationFactory.cc">OperationFactory</a></li>
</ul>
<div class="fragment"><div class="line">_map[<a class="code hl_enumvalue" href="group___neural_networks.html#ggaabbe492c60331b13038e39d4207940e0a49b2dc37ea9219789a6d82f281499dbb">ANEURALNETWORKS_SELECT</a>] = [](<span class="keyword">const</span> <a class="code hl_struct" href="struct_operation_factory_1_1_param.html">OperationFactory::Param</a> &amp;init_param, Operands &amp;) {</div>
<div class="line">  assert(init_param.<a class="code hl_variable" href="struct_operation_factory_1_1_param.html#a1635aa6fe1c0b96fdc1817afb6c72db8">input_count</a> == 3 &amp;&amp; init_param.<a class="code hl_variable" href="struct_operation_factory_1_1_param.html#a336dc8ab60fc30258dad34f1cecba205">output_count</a> == 1);</div>
<div class="line"> </div>
<div class="line">  OperandIndexSequence outputs{init_param.<a class="code hl_variable" href="struct_operation_factory_1_1_param.html#a555662a0c5f413825cade997366e0939">outputs</a>[0]};</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Each input should be interpreted as follows:</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">//  0 -&gt; Cond Tensor Index</span></div>
<div class="line">  <span class="comment">//  1 -&gt; Input1 Tensor Index</span></div>
<div class="line">  <span class="comment">//  2 -&gt; Input2 Tensor Index</span></div>
<div class="line">  OperandIndexSequence inputs;</div>
<div class="line">  <span class="keywordflow">for</span> (uint32_t n = 0; n &lt; init_param.<a class="code hl_variable" href="struct_operation_factory_1_1_param.html#a1635aa6fe1c0b96fdc1817afb6c72db8">input_count</a>; ++n)</div>
<div class="line">  {</div>
<div class="line">    inputs.append(OperandIndex{init_param.<a class="code hl_variable" href="struct_operation_factory_1_1_param.html#a0f03800d1bbf8253c4e6b6aa40360703">inputs</a>[n]});</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">new</span> operation::Select{<a class="code hl_variable" href="namespace_gen_h5_random_inputs.html#abcab13752e1826b70991e56f8e9a834d">inputs</a>, outputs};</div>
<div class="line">};</div>
<div class="ttc" id="agroup___neural_networks_html_ggaabbe492c60331b13038e39d4207940e0a49b2dc37ea9219789a6d82f281499dbb"><div class="ttname"><a href="group___neural_networks.html#ggaabbe492c60331b13038e39d4207940e0a49b2dc37ea9219789a6d82f281499dbb">ANEURALNETWORKS_SELECT</a></div><div class="ttdeci">@ ANEURALNETWORKS_SELECT</div><div class="ttdef"><b>Definition:</b> <a href="runtime_2nnapi-header_2include_2_neural_networks_8h_source.html#l04736">NeuralNetworks.h:4736</a></div></div>
<div class="ttc" id="anamespace_gen_h5_random_inputs_html_abcab13752e1826b70991e56f8e9a834d"><div class="ttname"><a href="namespace_gen_h5_random_inputs.html#abcab13752e1826b70991e56f8e9a834d">GenH5RandomInputs.inputs</a></div><div class="ttdeci">inputs</div><div class="ttdef"><b>Definition:</b> <a href="_gen_h5_random_inputs_8py_source.html#l00049">GenH5RandomInputs.py:49</a></div></div>
<div class="ttc" id="astruct_operation_factory_1_1_param_html"><div class="ttname"><a href="struct_operation_factory_1_1_param.html">OperationFactory::Param</a></div><div class="ttdef"><b>Definition:</b> <a href="_operation_factory_8h_source.html#l00033">OperationFactory.h:34</a></div></div>
<div class="ttc" id="astruct_operation_factory_1_1_param_html_a0f03800d1bbf8253c4e6b6aa40360703"><div class="ttname"><a href="struct_operation_factory_1_1_param.html#a0f03800d1bbf8253c4e6b6aa40360703">OperationFactory::Param::inputs</a></div><div class="ttdeci">const uint32_t * inputs</div><div class="ttdef"><b>Definition:</b> <a href="_operation_factory_8h_source.html#l00036">OperationFactory.h:36</a></div></div>
<div class="ttc" id="astruct_operation_factory_1_1_param_html_a1635aa6fe1c0b96fdc1817afb6c72db8"><div class="ttname"><a href="struct_operation_factory_1_1_param.html#a1635aa6fe1c0b96fdc1817afb6c72db8">OperationFactory::Param::input_count</a></div><div class="ttdeci">uint32_t input_count</div><div class="ttdef"><b>Definition:</b> <a href="_operation_factory_8h_source.html#l00035">OperationFactory.h:35</a></div></div>
<div class="ttc" id="astruct_operation_factory_1_1_param_html_a336dc8ab60fc30258dad34f1cecba205"><div class="ttname"><a href="struct_operation_factory_1_1_param.html#a336dc8ab60fc30258dad34f1cecba205">OperationFactory::Param::output_count</a></div><div class="ttdeci">uint32_t output_count</div><div class="ttdef"><b>Definition:</b> <a href="_operation_factory_8h_source.html#l00037">OperationFactory.h:37</a></div></div>
<div class="ttc" id="astruct_operation_factory_1_1_param_html_a555662a0c5f413825cade997366e0939"><div class="ttname"><a href="struct_operation_factory_1_1_param.html#a555662a0c5f413825cade997366e0939">OperationFactory::Param::outputs</a></div><div class="ttdeci">const uint32_t * outputs</div><div class="ttdef"><b>Definition:</b> <a href="_operation_factory_8h_source.html#l00038">OperationFactory.h:38</a></div></div>
</div><!-- fragment --><ol type="1">
<li>If you want that NNAPI supports new operation of TFLite's model, you need to update the things related to the operation in <a href="/runtime/libs/tflite/port/1.13.1/src/nnapi_delegate.cpp">nnapi_delegate</a> like below</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordflow">case</span> tflite::BuiltinOperator_SELECT:</div>
<div class="line">  nnapi_version = 12;  <span class="comment">// require NNAPI 1.2</span></div>
<div class="line">  nn_op_type = <a class="code hl_enumvalue" href="group___neural_networks.html#ggaabbe492c60331b13038e39d4207940e0a49b2dc37ea9219789a6d82f281499dbb">ANEURALNETWORKS_SELECT</a>;</div>
<div class="line">  <span class="keywordflow">break</span>;</div>
</div><!-- fragment --><h1>Backend</h1>
<p >This module generates kernels and tensors of backend such as <a href="https://github.com/ARM-software/ComputeLibrary/">ComputeLibrary</a> from generated graph-based IR. For this, the runtime fairly works on it internally. But this is not enough because of dependence on backend. So, there are several components that require additional implementation on each backend.</p>
<h2>ShapeFixer</h2>
<p >Even for tensors of the same operation, the shape required for each backend can be different. Therefore, this component modifies and fixes shape of tensors of the backend.</p>
<h3>acl_cl</h3>
<p >The kernel of the ACL for the Add operation needs to match the same rank to support the broadcast.</p><ul>
<li><a href="/runtime/onert/backend/acl_cl/ShapeFixer.h">ShapeFixer.h</a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> visit(<span class="keyword">const</span> ir::operation::Add &amp;) <span class="keyword">override</span>;</div>
</div><!-- fragment --><ul>
<li><a href="/runtime/onert/backend/acl_cl/ShapeFixer.cc">ShapeFixer.cc</a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> ShapeFixer::visit(<span class="keyword">const</span> ir::operation::Add &amp;node)</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> lhs_index{node.getInputs().at(ir::operation::Add::Input::LHS)};</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> rhs_index{node.getInputs().at(ir::operation::Add::Input::RHS)};</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (!(_ctx.at(lhs_index).shape() == _ctx.at(rhs_index).shape()))</div>
<div class="line">  {</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> broadcast_rank =</div>
<div class="line">        std::max(_ctx.at(lhs_index).shape().rank(), _ctx.at(rhs_index).shape().rank());</div>
<div class="line">    <span class="keyword">const_cast&lt;</span>ir::Shape &amp;<span class="keyword">&gt;</span>(_ctx.at(lhs_index).shape()).extendRank(broadcast_rank);</div>
<div class="line">    <span class="keyword">const_cast&lt;</span>ir::Shape &amp;<span class="keyword">&gt;</span>(_ctx.at(rhs_index).shape()).extendRank(broadcast_rank);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h3>acl_neon</h3>
<p >Same implementation as acl_cl is required.</p>
<h3>cpu</h3>
<p >This backend doesn't usually require a change of shape.</p><ul>
<li><a href="/runtime/onert/backend/cpu/ShapeFixer.h">ShapeFixer.h</a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> visit(<span class="keyword">const</span> ir::operation::Select &amp;) <span class="keyword">override</span>;</div>
</div><!-- fragment --><ul>
<li><a href="/runtime/onert/backend/cpu/ShapeFixer.cc">ShapeFixer.cc</a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> ShapeFixer::visit(<span class="keyword">const</span> ir::operation::Select &amp;) { <span class="comment">/* DO NOTHING */</span>}</div>
</div><!-- fragment --><h2>KernelGenerator</h2>
<p >This component generates kernels of backend. You have to generate kernel of new operation. And then append it to execution builder. You can obtain information of the node from IR and necessary tensors from tensor builder.</p>
<h3>acl_cl</h3>
<ul>
<li><a href="/runtime/onert/backend/acl_cl/KernelGenerator.h">KernelGenerator.h</a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> visit(<span class="keyword">const</span> ir::operation::Select &amp;) <span class="keyword">override</span>;</div>
</div><!-- fragment --><ul>
<li><a href="/runtime/onert/backend/acl_cl/KernelGenerator.cc">KernelGenerator.cc</a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> KernelGenerator::visit(<span class="keyword">const</span> ir::operation::Select &amp;node)</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> output_index{node.getOutputs().at(ir::operation::Select::Output::OUTPUT)};</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> cond_index{node.getInputs().at(ir::operation::Select::Input::COND)};</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> input1_index{node.getInputs().at(ir::operation::Select::Input::INPUT1)};</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> input2_index{node.getInputs().at(ir::operation::Select::Input::INPUT2)};</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> output_alloc = _tensor_builder-&gt;at(output_index).get();</div>
<div class="line">  <span class="keyword">auto</span> cond_alloc = _tensor_builder-&gt;at(cond_index).get();</div>
<div class="line">  <span class="keyword">auto</span> input1_alloc = _tensor_builder-&gt;at(input1_index).get();</div>
<div class="line">  <span class="keyword">auto</span> input2_alloc = _tensor_builder-&gt;at(input2_index).get();</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> fn = std::make_unique&lt;::arm_compute::CLSelect&gt;();</div>
<div class="line"> </div>
<div class="line">  fn-&gt;configure(cond_alloc-&gt;handle(), input1_alloc-&gt;handle(), input2_alloc-&gt;handle(),</div>
<div class="line">                output_alloc-&gt;handle());</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> acl_fn = <a class="code hl_function" href="namespaceonert_1_1backend_1_1acl__common.html#ad332f86012f1af93ea4b0d773112e41c">asAclFunction</a>(std::move(fn));</div>
<div class="line"> </div>
<div class="line">  _execution_builder-&gt;append(std::move(acl_fn));</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceonert_1_1backend_1_1acl__common_html_ad332f86012f1af93ea4b0d773112e41c"><div class="ttname"><a href="namespaceonert_1_1backend_1_1acl__common.html#ad332f86012f1af93ea4b0d773112e41c">onert::backend::acl_common::asAclFunction</a></div><div class="ttdeci">std::unique_ptr&lt; AclFunction &gt; asAclFunction(std::unique_ptr&lt;::arm_compute::IFunction &gt; &amp;&amp;layer)</div><div class="ttdef"><b>Definition:</b> <a href="acl__common_2_convert_8cc_source.html#l00274">Convert.cc:274</a></div></div>
</div><!-- fragment --><h3>acl_neon</h3>
<p >Similar implementation as acl_cl is required.</p>
<h3>cpu</h3>
<ul>
<li><a href="/runtime/onert/backend/cpu/KernelGenerator.h">KernelGenerator.h</a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> visit(<span class="keyword">const</span> ir::operation::Select &amp;) <span class="keyword">override</span>;</div>
</div><!-- fragment --><ul>
<li><a href="/runtime/onert/backend/cpu/KernelGenerator.cc">KernelGenerator.cc</a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> KernelGenerator::visit(<span class="keyword">const</span> ir::operation::Select &amp;node)</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> output_index{node.getOutputs().at(0)};</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> condition_index{node.getInputs().at(ir::operation::Select::Input::CONDITION)};</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> true_index{node.getInputs().at(ir::operation::Select::Input::INPUT_TRUE)};</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> false_index{node.getInputs().at(ir::operation::Select::Input::INPUT_FALSE)};</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> <a class="code hl_variable" href="namespacepart__eval__one.html#a187620ffdf72abdf0acf204385501746">output_tensor</a> = _tensor_reg-&gt;getPortableTensor(output_index);</div>
<div class="line">  <span class="keyword">auto</span> condition_tensor = _tensor_reg-&gt;getPortableTensor(condition_index);</div>
<div class="line">  <span class="keyword">auto</span> true_tensor = _tensor_reg-&gt;getPortableTensor(true_index);</div>
<div class="line">  <span class="keyword">auto</span> false_tensor = _tensor_reg-&gt;getPortableTensor(false_index);</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> fn = std::make_unique&lt;ops::SelectLayer&gt;();</div>
<div class="line"> </div>
<div class="line">  fn-&gt;configure(condition_tensor, true_tensor, false_tensor, output_tensor);</div>
<div class="line"> </div>
<div class="line">  _return_fn = std::move(fn);</div>
<div class="line">}</div>
<div class="ttc" id="anamespacepart__eval__one_html_a187620ffdf72abdf0acf204385501746"><div class="ttname"><a href="namespacepart__eval__one.html#a187620ffdf72abdf0acf204385501746">part_eval_one.output_tensor</a></div><div class="ttdeci">output_tensor</div><div class="ttdef"><b>Definition:</b> <a href="part__eval__one_8py_source.html#l00117">part_eval_one.py:117</a></div></div>
</div><!-- fragment --><h2>ConstantInitializer (in some cases)</h2>
<p >This component registers function initializing constant tensors and initialize constant tensor layer. Most tensors will be automatically registered internally. And there are some exceptions.</p>
<h3>cpu</h3>
<ul>
<li><a href="/runtime/onert/backend/cpu/ConstantInitializer.h">ConstantInitializer.h</a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> visit(<span class="keyword">const</span> ir::operation::Conv2D &amp;) <span class="keyword">override</span>;</div>
</div><!-- fragment --><ul>
<li><a href="/runtime/onert/backend/cpu/ConstantInitializer.cc">ConstantInitializer.cc</a></li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> ConstantInitializer::visit(<span class="keyword">const</span> ir::operation::Conv2D &amp;node)</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;kernel_index = node.getInputs().at(ir::operation::Conv2D::KERNEL);</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;kernel_obj = _operands.at(kernel_index);</div>
<div class="line">  registerCopyInitializer(kernel_index, kernel_obj);</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;bias_index = node.getInputs().at(ir::operation::Conv2D::BIAS);</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;bias_obj = _operands.at(bias_index);</div>
<div class="line">  registerCopyInitializer(bias_index, bias_obj);</div>
<div class="line">}</div>
</div><!-- fragment --><h1>Samples (to be updated)</h1>
<ul>
<li><code>Select</code> operation<ul>
<li>Simple explanation : <code>Output[i] = Condition[i] ? input1[i] : input2[i]</code></li>
<li>PR : <a href="https://github.com/Samsung/ONE/pull/XXX">https://github.com/Samsung/ONE/pull/XXX</a> </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
