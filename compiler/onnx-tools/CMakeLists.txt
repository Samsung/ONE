set(ONNX_TOOL_FILES
    onnx-dump.py
    onnx-ops.py
    onnx-si.py
)

foreach(ONNX_TOOL IN ITEMS ${ONNX_TOOL_FILES})

  set(ONNX_TOOL_FILE ${ONNX_TOOL})
  set(ONNX_TOOL_SRC "${CMAKE_CURRENT_SOURCE_DIR}/${ONNX_TOOL_FILE}")
  set(ONNX_TOOL_BIN "${CMAKE_CURRENT_BINARY_DIR}/${ONNX_TOOL_FILE}")
  set(ONNX_TOOL_TARGET "${ONNX_TOOL}_target")

  add_custom_command(OUTPUT ${ONNX_TOOL_BIN}
    COMMAND ${CMAKE_COMMAND} -E copy "${ONNX_TOOL_SRC}" "${ONNX_TOOL_BIN}"
    DEPENDS ${ONNX_TOOL_SRC}
    COMMENT "Generate ${ONNX_TOOL_BIN}"
  )

  add_custom_target(${ONNX_TOOL_TARGET} ALL DEPENDS ${ONNX_TOOL_BIN})

  install(FILES ${ONNX_TOOL_BIN}
          PERMISSIONS OWNER_WRITE OWNER_READ OWNER_EXECUTE
                      GROUP_READ GROUP_EXECUTE
                      WORLD_READ WORLD_EXECUTE
          DESTINATION bin)

endforeach(ONNX_TOOL)
