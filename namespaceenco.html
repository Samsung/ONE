<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ONE - On-device Neural Engine: enco Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ONE - On-device Neural Engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespaceenco.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">enco Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenco_1_1_asm_code.html">AsmCode</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_avg_pool_lowering_pass.html">AvgPoolLoweringPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_backend.html">Backend</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_bag_duplication_pass.html">BagDuplicationPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenco_1_1_bundle.html">Bundle</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_bypass_generation_pass.html">BypassGenerationPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_code.html">Code</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_concat_lowering_pass.html">ConcatLoweringPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_constant_folding_pass.html">ConstantFoldingPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_copy_lowering_pass.html">CopyLoweringPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenco_1_1_cpp_code.html">CppCode</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_data_layout_conversion_pass.html">DataLayoutConversionPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_dead_bag_elimination_pass.html">DeadBagEliminationPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_dead_object_elimination_pass.html">DeadObjectEliminationPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_duplicated_object_reduction_pass.html">DuplicatedObjectReductionPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_feature_unification_pass.html">FeatureUnificationPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_free_instr_elimination_pass.html">FreeInstrEliminationPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_free_op_elimination_pass.html">FreeOpEliminationPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_frontend.html">Frontend</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_global_data.html">GlobalData</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenco_1_1_host_block_compiler.html">HostBlockCompiler</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_identical_object_reduction_pass.html">IdenticalObjectReductionPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_indirect_copy_elimination_pass.html">IndirectCopyEliminationPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_intrinsic_selection_pass.html">IntrinsicSelectionPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenco_1_1_memory_context.html">MemoryContext</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record C/C++ expression that denotes the base and size of memory region dedicated to each bag.  <a href="classenco_1_1_memory_context.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenco_1_1_pass.html">Pass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_phase_construction_pass.html">PhaseConstructionPass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenco_1_1_pipeline.html">Pipeline</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenco_1_1_subnet_block_compiler.html">SubnetBlockCompiler</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate C++ code that invokes Android NN subnet.  <a href="classenco_1_1_subnet_block_compiler.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_subnet_manager.html">SubnetManager</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structenco_1_1_subnet_struct.html">SubnetStruct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A C++ struct that provides Android NN model &amp; compilation.  <a href="structenco_1_1_subnet_struct.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenco_1_1_subnet_struct_builder.html">SubnetStructBuilder</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a846843be0066d3f26c1c218b3f46315f"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a> = uint32_t</td></tr>
<tr class="separator:a846843be0066d3f26c1c218b3f46315f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81b59f2e10a9142e39eaccf332e9b9ef"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a81b59f2e10a9142e39eaccf332e9b9ef">GlobalOffset</a> = uint32_t</td></tr>
<tr class="separator:a81b59f2e10a9142e39eaccf332e9b9ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a577bf7d7b1d4373230201000570e3b13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a577bf7d7b1d4373230201000570e3b13">subst</a> (<a class="el" href="classcoco_1_1_object.html">coco::Object</a> *from, <a class="el" href="classcoco_1_1_object.html">coco::Object</a> *into)</td></tr>
<tr class="memdesc:a577bf7d7b1d4373230201000570e3b13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Substitute all the USE occurrences of an object with another object.  <a href="namespaceenco.html#a577bf7d7b1d4373230201000570e3b13">More...</a><br /></td></tr>
<tr class="separator:a577bf7d7b1d4373230201000570e3b13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66b49465b449bbcf6c0939062122730"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classcoco_1_1_instr.html">coco::Instr</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#ae66b49465b449bbcf6c0939062122730">instr_sequence</a> (<a class="el" href="classcoco_1_1_module.html">coco::Module</a> *<a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>)</td></tr>
<tr class="memdesc:ae66b49465b449bbcf6c0939062122730"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return instructions in execution order.  <a href="namespaceenco.html#ae66b49465b449bbcf6c0939062122730">More...</a><br /></td></tr>
<tr class="separator:ae66b49465b449bbcf6c0939062122730"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5e79df2f445286b1b0624cd1ba6026a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcoco_1_1_feature_shape.html">coco::FeatureShape</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#ab5e79df2f445286b1b0624cd1ba6026a">output_shape</a> (<a class="el" href="classcoco_1_1_conv2_d.html">coco::Conv2D</a> *conv2D)</td></tr>
<tr class="separator:ab5e79df2f445286b1b0624cd1ba6026a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe6f08bb68e612fcf8efcb5aa1c080a9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#abe6f08bb68e612fcf8efcb5aa1c080a9">validate_output_shape</a> (<a class="el" href="structenco_1_1_code.html">Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="separator:abe6f08bb68e612fcf8efcb5aa1c080a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0e745d9916ba307aaa323a54f10c92d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#af0e745d9916ba307aaa323a54f10c92d">validate</a> (<a class="el" href="structenco_1_1_code.html">Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="separator:af0e745d9916ba307aaa323a54f10c92d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefd397d582b84e2ef95c0f755531d502"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#aefd397d582b84e2ef95c0f755531d502">make_session</a> (<a class="el" href="classcoco_1_1_module.html">coco::Module</a> *<a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>, <a class="el" href="structcoco_1_1_data.html">coco::Data</a> *d)</td></tr>
<tr class="separator:aefd397d582b84e2ef95c0f755531d502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a862eb4da6e8b0c8f2bf11c7a8df6d684"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a862eb4da6e8b0c8f2bf11c7a8df6d684">session</a> (const <a class="el" href="classcoco_1_1_module.html">coco::Module</a> *<a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>)</td></tr>
<tr class="separator:a862eb4da6e8b0c8f2bf11c7a8df6d684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4ea7b45ac6067ad00008badfe5ea560"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#ab4ea7b45ac6067ad00008badfe5ea560">session</a> (const <a class="el" href="structcoco_1_1_data.html">coco::Data</a> *d)</td></tr>
<tr class="separator:ab4ea7b45ac6067ad00008badfe5ea560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4807d2384277227645837acf9c92a01"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcoco_1_1_module.html">coco::Module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#ae4807d2384277227645837acf9c92a01">module</a> (const <a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a> &amp;sess)</td></tr>
<tr class="separator:ae4807d2384277227645837acf9c92a01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35ea7676167c563e6a3871f5ac99463f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcoco_1_1_data.html">coco::Data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a35ea7676167c563e6a3871f5ac99463f">data</a> (const <a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a> &amp;sess)</td></tr>
<tr class="separator:a35ea7676167c563e6a3871f5ac99463f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d4e56ec31be86ad47be84f20622bc0e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structenco_1_1_code.html">Code</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a> (const <a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a> &amp;sess)</td></tr>
<tr class="separator:a3d4e56ec31be86ad47be84f20622bc0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04382074922db95f73a7e97c25023937"><td class="memTemplParams" colspan="2">template&lt;typename It &gt; </td></tr>
<tr class="memitem:a04382074922db95f73a7e97c25023937"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a04382074922db95f73a7e97c25023937">concat</a> (std::ostream &amp;os, const std::string &amp;sep, It beg, It end)</td></tr>
<tr class="separator:a04382074922db95f73a7e97c25023937"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca38c629cb6b737e742b54ffc217590b"><td class="memTemplParams" colspan="2">template&lt;typename It &gt; </td></tr>
<tr class="memitem:aca38c629cb6b737e742b54ffc217590b"><td class="memTemplItemLeft" align="right" valign="top">std::string&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceenco.html#aca38c629cb6b737e742b54ffc217590b">concat</a> (const std::string &amp;sep, It beg, It end)</td></tr>
<tr class="separator:aca38c629cb6b737e742b54ffc217590b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f62cafee294961f520182917510c361"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a0f62cafee294961f520182917510c361">lower_avgpool</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *)</td></tr>
<tr class="memdesc:a0f62cafee294961f520182917510c361"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rewrite NN API-incompatible average pooling.  <a href="namespaceenco.html#a0f62cafee294961f520182917510c361">More...</a><br /></td></tr>
<tr class="separator:a0f62cafee294961f520182917510c361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a557ffc07108fac5ea7e599e74175a6d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a557ffc07108fac5ea7e599e74175a6d1">lower_concat</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="memdesc:a557ffc07108fac5ea7e599e74175a6d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lower eval(Concat(...)) as a sequence of shuffle instructions.  <a href="namespaceenco.html#a557ffc07108fac5ea7e599e74175a6d1">More...</a><br /></td></tr>
<tr class="separator:a557ffc07108fac5ea7e599e74175a6d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a001ec80a2b05be0926ea09c1ad6eed1f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a001ec80a2b05be0926ea09c1ad6eed1f">fold_constants</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *)</td></tr>
<tr class="memdesc:a001ec80a2b05be0926ea09c1ad6eed1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate "constant" expressions at compile time.  <a href="namespaceenco.html#a001ec80a2b05be0926ea09c1ad6eed1f">More...</a><br /></td></tr>
<tr class="separator:a001ec80a2b05be0926ea09c1ad6eed1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9096629d7162d7dac7730c489ab5e29a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a9096629d7162d7dac7730c489ab5e29a">lower_copy</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="memdesc:a9096629d7162d7dac7730c489ab5e29a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lower copy(...) instruction into shuffle(...)  <a href="namespaceenco.html#a9096629d7162d7dac7730c489ab5e29a">More...</a><br /></td></tr>
<tr class="separator:a9096629d7162d7dac7730c489ab5e29a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840d3d313a65c9fe95dde3d4428c21fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a840d3d313a65c9fe95dde3d4428c21fa">convert_data_layout</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="memdesc:a840d3d313a65c9fe95dde3d4428c21fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert data reordering if necessary.  <a href="namespaceenco.html#a840d3d313a65c9fe95dde3d4428c21fa">More...</a><br /></td></tr>
<tr class="separator:a840d3d313a65c9fe95dde3d4428c21fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4cf95b3acf6a46e8d8974dcfec0bd71"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#ac4cf95b3acf6a46e8d8974dcfec0bd71">eliminate_dead_bag</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="memdesc:ac4cf95b3acf6a46e8d8974dcfec0bd71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Eliminate dead bags.  <a href="namespaceenco.html#ac4cf95b3acf6a46e8d8974dcfec0bd71">More...</a><br /></td></tr>
<tr class="separator:ac4cf95b3acf6a46e8d8974dcfec0bd71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35fa9b69d5b5ef2c1f76a0621edf2519"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a35fa9b69d5b5ef2c1f76a0621edf2519">eliminate_dead_object</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="memdesc:a35fa9b69d5b5ef2c1f76a0621edf2519"><td class="mdescLeft">&#160;</td><td class="mdescRight">Eliminate dead objects in IR.  <a href="namespaceenco.html#a35fa9b69d5b5ef2c1f76a0621edf2519">More...</a><br /></td></tr>
<tr class="separator:a35fa9b69d5b5ef2c1f76a0621edf2519"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64ffef250ffa33efadd30fe871066da2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a64ffef250ffa33efadd30fe871066da2">duplicate_inout_bag</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="memdesc:a64ffef250ffa33efadd30fe871066da2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Eliminate in/out bags by duplication.  <a href="namespaceenco.html#a64ffef250ffa33efadd30fe871066da2">More...</a><br /></td></tr>
<tr class="separator:a64ffef250ffa33efadd30fe871066da2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9737bdf1cf46deb3c78dc3efae659114"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a9737bdf1cf46deb3c78dc3efae659114">reduce_duplicated_object</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="memdesc:a9737bdf1cf46deb3c78dc3efae659114"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reduce duplicated feature objects as its dominating feature object.  <a href="namespaceenco.html#a9737bdf1cf46deb3c78dc3efae659114">More...</a><br /></td></tr>
<tr class="separator:a9737bdf1cf46deb3c78dc3efae659114"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03d7d5a8f802ca59ce16f241fed0a7e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a03d7d5a8f802ca59ce16f241fed0a7e3">unify_feature</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="memdesc:a03d7d5a8f802ca59ce16f241fed0a7e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove duplicated feature objects inside each bag.  <a href="namespaceenco.html#a03d7d5a8f802ca59ce16f241fed0a7e3">More...</a><br /></td></tr>
<tr class="separator:a03d7d5a8f802ca59ce16f241fed0a7e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaccbaaf5bbeba1ba56d4d9044d5b7a1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#aaccbaaf5bbeba1ba56d4d9044d5b7a1b">eliminate_free_instr</a> (<a class="el" href="classcoco_1_1_module.html">coco::Module</a> *mod)</td></tr>
<tr class="memdesc:aaccbaaf5bbeba1ba56d4d9044d5b7a1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Eliminate free instructions.  <a href="namespaceenco.html#aaccbaaf5bbeba1ba56d4d9044d5b7a1b">More...</a><br /></td></tr>
<tr class="separator:aaccbaaf5bbeba1ba56d4d9044d5b7a1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f74cb35d79da97e807fd6b83c0c3261"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a3f74cb35d79da97e807fd6b83c0c3261">eliminate_free_op</a> (<a class="el" href="classcoco_1_1_module.html">coco::Module</a> *mod)</td></tr>
<tr class="memdesc:a3f74cb35d79da97e807fd6b83c0c3261"><td class="mdescLeft">&#160;</td><td class="mdescRight">Eliminate free op.  <a href="namespaceenco.html#a3f74cb35d79da97e807fd6b83c0c3261">More...</a><br /></td></tr>
<tr class="separator:a3f74cb35d79da97e807fd6b83c0c3261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24990c06c9bf79de7411e1e1d0e4afaa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a24990c06c9bf79de7411e1e1d0e4afaa">generate_global_data</a> (std::ostream &amp;, <a class="el" href="structenco_1_1_code.html">enco::Code</a> *)</td></tr>
<tr class="memdesc:a24990c06c9bf79de7411e1e1d0e4afaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate 'Global' weight array.  <a href="namespaceenco.html#a24990c06c9bf79de7411e1e1d0e4afaa">More...</a><br /></td></tr>
<tr class="separator:a24990c06c9bf79de7411e1e1d0e4afaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2e3c9a7350ce0fde00213ed2e8b34a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#ad2e3c9a7350ce0fde00213ed2e8b34a9">reduce_identical_object</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="memdesc:ad2e3c9a7350ce0fde00213ed2e8b34a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reduce identically copied objects as its original object.  <a href="namespaceenco.html#ad2e3c9a7350ce0fde00213ed2e8b34a9">More...</a><br /></td></tr>
<tr class="separator:ad2e3c9a7350ce0fde00213ed2e8b34a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f0518cc02a4ac36303ba0d03dce5ba0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a4f0518cc02a4ac36303ba0d03dce5ba0">eliminate_indirect_copy</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="memdesc:a4f0518cc02a4ac36303ba0d03dce5ba0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert all the indirect copies as a direct copy.  <a href="namespaceenco.html#a4f0518cc02a4ac36303ba0d03dce5ba0">More...</a><br /></td></tr>
<tr class="separator:a4f0518cc02a4ac36303ba0d03dce5ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab25b418d78ede9bce080ce499afb446a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#ab25b418d78ede9bce080ce499afb446a">select_intrinsic</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *)</td></tr>
<tr class="memdesc:ab25b418d78ede9bce080ce499afb446a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select Intricsic (API) to be used.  <a href="namespaceenco.html#ab25b418d78ede9bce080ce499afb446a">More...</a><br /></td></tr>
<tr class="separator:ab25b418d78ede9bce080ce499afb446a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3cc83e6040b60f16d1cd9e5a61eb0be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#ab3cc83e6040b60f16d1cd9e5a61eb0be">generate_bypass_shuffle</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="memdesc:ab3cc83e6040b60f16d1cd9e5a61eb0be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a bypass Shuffle if two continued Shuffles map same from-into.  <a href="namespaceenco.html#ab3cc83e6040b60f16d1cd9e5a61eb0be">More...</a><br /></td></tr>
<tr class="separator:ab3cc83e6040b60f16d1cd9e5a61eb0be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ec5886b4893e8f1a13f7d13b22f5abc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a3ec5886b4893e8f1a13f7d13b22f5abc">hoist_object</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="memdesc:a3ec5886b4893e8f1a13f7d13b22f5abc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the base bag of each object if possible.  <a href="namespaceenco.html#a3ec5886b4893e8f1a13f7d13b22f5abc">More...</a><br /></td></tr>
<tr class="separator:a3ec5886b4893e8f1a13f7d13b22f5abc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdf064233e67371d5b1f14b576b507de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#abdf064233e67371d5b1f14b576b507de">split_into_phases</a> (<a class="el" href="structenco_1_1_code.html">enco::Code</a> *<a class="el" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>)</td></tr>
<tr class="memdesc:abdf064233e67371d5b1f14b576b507de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Split instructions into a set of phases.  <a href="namespaceenco.html#abdf064233e67371d5b1f14b576b507de">More...</a><br /></td></tr>
<tr class="separator:abdf064233e67371d5b1f14b576b507de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f847509e0324ff458c26b4d5e840399"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="classcoco_1_1_block.html">coco::Block</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#a0f847509e0324ff458c26b4d5e840399">readers</a> (const <a class="el" href="classcoco_1_1_bag.html">coco::Bag</a> *bag)</td></tr>
<tr class="memdesc:a0f847509e0324ff458c26b4d5e840399"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the set of blocks that reads a given bag.  <a href="namespaceenco.html#a0f847509e0324ff458c26b4d5e840399">More...</a><br /></td></tr>
<tr class="separator:a0f847509e0324ff458c26b4d5e840399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac986b450ed8a39d5721a646501b09d46"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="classcoco_1_1_block.html">coco::Block</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceenco.html#ac986b450ed8a39d5721a646501b09d46">updaters</a> (const <a class="el" href="classcoco_1_1_bag.html">coco::Bag</a> *bag)</td></tr>
<tr class="memdesc:ac986b450ed8a39d5721a646501b09d46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the set of blocks that updates a given bag.  <a href="namespaceenco.html#ac986b450ed8a39d5721a646501b09d46">More...</a><br /></td></tr>
<tr class="separator:ac986b450ed8a39d5721a646501b09d46"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a81b59f2e10a9142e39eaccf332e9b9ef" name="a81b59f2e10a9142e39eaccf332e9b9ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81b59f2e10a9142e39eaccf332e9b9ef">&#9670;&#160;</a></span>GlobalOffset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespaceenco.html#a81b59f2e10a9142e39eaccf332e9b9ef">enco::GlobalOffset</a> = typedef uint32_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_global_data_generation_8h_source.html#l00027">27</a> of file <a class="el" href="_global_data_generation_8h_source.html">GlobalDataGeneration.h</a>.</p>

</div>
</div>
<a id="a846843be0066d3f26c1c218b3f46315f" name="a846843be0066d3f26c1c218b3f46315f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a846843be0066d3f26c1c218b3f46315f">&#9670;&#160;</a></span>SessionID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">enco::SessionID</a> = typedef uint32_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="compiler_2enco_2core_2src_2_session_8h_source.html#l00026">26</a> of file <a class="el" href="compiler_2enco_2core_2src_2_session_8h_source.html">Session.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3d4e56ec31be86ad47be84f20622bc0e" name="a3d4e56ec31be86ad47be84f20622bc0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d4e56ec31be86ad47be84f20622bc0e">&#9670;&#160;</a></span>code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structenco_1_1_code.html">Code</a> * enco::code </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a> &amp;&#160;</td>
          <td class="paramname"><em>sess</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">54</a> of file <a class="el" href="enco_2core_2src_2_session_8cpp_source.html">Session.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   54</span>{ <span class="keywordflow">return</span> sess_to_code.at(sess).get(); }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_data_layout_conversion_8cpp_source.html#l00377">convert_data_layout()</a>, <a class="el" href="_duplicate_8cpp_source.html#l00129">duplicate_inout_bag()</a>, <a class="el" href="_dead_bag_elimination_8cpp_source.html#l00050">eliminate_dead_bag()</a>, <a class="el" href="_dead_object_elimination_8cpp_source.html#l00057">eliminate_dead_object()</a>, <a class="el" href="_indirect_copy_elimination_8cpp_source.html#l00055">eliminate_indirect_copy()</a>, <a class="el" href="_constant_folding_8cpp_source.html#l00419">fold_constants()</a>, <a class="el" href="_optimizations_8cpp_source.html#l00025">generate_bypass_shuffle()</a>, <a class="el" href="_global_data_generation_8cpp_source.html#l00109">generate_global_data()</a>, <a class="el" href="_optimizations_8cpp_source.html#l00175">hoist_object()</a>, <a class="el" href="_avg_pool_lowering_8cpp_source.html#l00223">lower_avgpool()</a>, <a class="el" href="_concat_lowering_8cpp_source.html#l00101">lower_concat()</a>, <a class="el" href="_copy_lowering_8cpp_source.html#l00028">lower_copy()</a>, <a class="el" href="_duplicated_object_reduction_8cpp_source.html#l00081">reduce_duplicated_object()</a>, <a class="el" href="_identical_object_reduction_8cpp_source.html#l00025">reduce_identical_object()</a>, <a class="el" href="_avg_pool_lowering_8h_source.html#l00038">enco::AvgPoolLoweringPass::run()</a>, <a class="el" href="_concat_lowering_8h_source.html#l00038">enco::ConcatLoweringPass::run()</a>, <a class="el" href="_constant_folding_8h_source.html#l00038">enco::ConstantFoldingPass::run()</a>, <a class="el" href="_copy_lowering_8h_source.html#l00038">enco::CopyLoweringPass::run()</a>, <a class="el" href="_data_layout_conversion_8h_source.html#l00038">enco::DataLayoutConversionPass::run()</a>, <a class="el" href="_dead_bag_elimination_8h_source.html#l00043">enco::DeadBagEliminationPass::run()</a>, <a class="el" href="_dead_object_elimination_8h_source.html#l00042">enco::DeadObjectEliminationPass::run()</a>, <a class="el" href="_duplicate_8h_source.html#l00038">enco::BagDuplicationPass::run()</a>, <a class="el" href="_duplicated_object_reduction_8h_source.html#l00068">enco::DuplicatedObjectReductionPass::run()</a>, <a class="el" href="_feature_unification_8h_source.html#l00063">enco::FeatureUnificationPass::run()</a>, <a class="el" href="_free_instr_elimination_8h_source.html#l00049">enco::FreeInstrEliminationPass::run()</a>, <a class="el" href="_free_op_elimination_8h_source.html#l00049">enco::FreeOpEliminationPass::run()</a>, <a class="el" href="_identical_object_reduction_8h_source.html#l00064">enco::IdenticalObjectReductionPass::run()</a>, <a class="el" href="_indirect_copy_elimination_8h_source.html#l00055">enco::IndirectCopyEliminationPass::run()</a>, <a class="el" href="_intrinsic_selection_8h_source.html#l00042">enco::IntrinsicSelectionPass::run()</a>, <a class="el" href="_optimizations_8h_source.html#l00056">enco::BypassGenerationPass::run()</a>, <a class="el" href="compiler_2enco_2core_2src_2_transforms_2_split_8h_source.html#l00043">enco::PhaseConstructionPass::run()</a>, <a class="el" href="_intrinsic_selection_8cpp_source.html#l00077">select_intrinsic()</a>, <a class="el" href="compiler_2enco_2core_2src_2_transforms_2_split_8cpp_source.html#l01227">split_into_phases()</a>, <a class="el" href="_feature_unification_8cpp_source.html#l00151">unify_feature()</a>, <a class="el" href="_i_r_validator_8cpp_source.html#l00083">validate()</a>, and <a class="el" href="_i_r_validator_8cpp_source.html#l00051">validate_output_shape()</a>.</p>

</div>
</div>
<a id="aca38c629cb6b737e742b54ffc217590b" name="aca38c629cb6b737e742b54ffc217590b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca38c629cb6b737e742b54ffc217590b">&#9670;&#160;</a></span>concat() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename It &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::string enco::concat </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>sep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">It&#160;</td>
          <td class="paramname"><em>beg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">It&#160;</td>
          <td class="paramname"><em>end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_string_8h_source.html#l00048">48</a> of file <a class="el" href="_string_8h_source.html">String.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   49</span>{</div>
<div class="line"><span class="lineno">   50</span>  std::stringstream ss;</div>
<div class="line"><span class="lineno">   51</span>  <a class="code hl_function" href="namespaceenco.html#a04382074922db95f73a7e97c25023937">concat</a>(ss, sep, beg, end);</div>
<div class="line"><span class="lineno">   52</span>  <span class="keywordflow">return</span> ss.str();</div>
<div class="line"><span class="lineno">   53</span>}</div>
<div class="ttc" id="anamespaceenco_html_a04382074922db95f73a7e97c25023937"><div class="ttname"><a href="namespaceenco.html#a04382074922db95f73a7e97c25023937">enco::concat</a></div><div class="ttdeci">void concat(std::ostream &amp;os, const std::string &amp;sep, It beg, It end)</div><div class="ttdef"><b>Definition:</b> <a href="_string_8h_source.html#l00031">String.h:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_string_8h_source.html#l00031">concat()</a>.</p>

</div>
</div>
<a id="a04382074922db95f73a7e97c25023937" name="a04382074922db95f73a7e97c25023937"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04382074922db95f73a7e97c25023937">&#9670;&#160;</a></span>concat() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename It &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void enco::concat </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>sep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">It&#160;</td>
          <td class="paramname"><em>beg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">It&#160;</td>
          <td class="paramname"><em>end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_string_8h_source.html#l00031">31</a> of file <a class="el" href="_string_8h_source.html">String.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   32</span>{</div>
<div class="line"><span class="lineno">   33</span>  uint32_t count = 0;</div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = beg; it != end; ++it, ++count)</div>
<div class="line"><span class="lineno">   36</span>  {</div>
<div class="line"><span class="lineno">   37</span>    <span class="keywordflow">if</span> (count == 0)</div>
<div class="line"><span class="lineno">   38</span>    {</div>
<div class="line"><span class="lineno">   39</span>      os &lt;&lt; *it;</div>
<div class="line"><span class="lineno">   40</span>    }</div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   42</span>    {</div>
<div class="line"><span class="lineno">   43</span>      os &lt;&lt; sep &lt;&lt; *it;</div>
<div class="line"><span class="lineno">   44</span>    }</div>
<div class="line"><span class="lineno">   45</span>  }</div>
<div class="line"><span class="lineno">   46</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_string_8h_source.html#l00031">concat()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_string_8h_source.html#l00031">concat()</a>.</p>

</div>
</div>
<a id="a840d3d313a65c9fe95dde3d4428c21fa" name="a840d3d313a65c9fe95dde3d4428c21fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840d3d313a65c9fe95dde3d4428c21fa">&#9670;&#160;</a></span>convert_data_layout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::convert_data_layout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Insert data reordering if necessary. </p>

<p class="definition">Definition at line <a class="el" href="_data_layout_conversion_8cpp_source.html#l00377">377</a> of file <a class="el" href="_data_layout_conversion_8cpp_source.html">DataLayoutConversion.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  378</span>{</div>
<div class="line"><span class="lineno">  379</span>  NormalizePass pass;</div>
<div class="line"><span class="lineno">  380</span>  pass.runOnCode(code);</div>
<div class="line"><span class="lineno">  381</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_data_layout_conversion_8h_source.html#l00038">enco::DataLayoutConversionPass::run()</a>.</p>

</div>
</div>
<a id="a35ea7676167c563e6a3871f5ac99463f" name="a35ea7676167c563e6a3871f5ac99463f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35ea7676167c563e6a3871f5ac99463f">&#9670;&#160;</a></span>data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcoco_1_1_data.html">coco::Data</a> * enco::data </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a> &amp;&#160;</td>
          <td class="paramname"><em>sess</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00052">52</a> of file <a class="el" href="enco_2core_2src_2_session_8cpp_source.html">Session.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   52</span>{ <span class="keywordflow">return</span> sess_to_code.at(sess)-&gt;data(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a64ffef250ffa33efadd30fe871066da2" name="a64ffef250ffa33efadd30fe871066da2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64ffef250ffa33efadd30fe871066da2">&#9670;&#160;</a></span>duplicate_inout_bag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::duplicate_inout_bag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Eliminate in/out bags by duplication. </p>

<p class="definition">Definition at line <a class="el" href="_duplicate_8cpp_source.html#l00129">129</a> of file <a class="el" href="_duplicate_8cpp_source.html">Duplicate.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  130</span>{</div>
<div class="line"><span class="lineno">  131</span>  DuplicatePass duplicate;</div>
<div class="line"><span class="lineno">  132</span>  duplicate.runOnCode(code);</div>
<div class="line"><span class="lineno">  133</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_duplicate_8h_source.html#l00038">enco::BagDuplicationPass::run()</a>.</p>

</div>
</div>
<a id="ac4cf95b3acf6a46e8d8974dcfec0bd71" name="ac4cf95b3acf6a46e8d8974dcfec0bd71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4cf95b3acf6a46e8d8974dcfec0bd71">&#9670;&#160;</a></span>eliminate_dead_bag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::eliminate_dead_bag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Eliminate dead bags. </p>
<p >A bag is referred to as dead if it is neither input nor output, and has no read. If a bag is dead, it is unnecessary to updates its values as these values are never used.</p>
<p >"eliminate_dead_bag" removes all the dead bags and its updaters from IR. </p>

<p class="definition">Definition at line <a class="el" href="_dead_bag_elimination_8cpp_source.html#l00050">50</a> of file <a class="el" href="_dead_bag_elimination_8cpp_source.html">DeadBagElimination.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   51</span>{</div>
<div class="line"><span class="lineno">   52</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a> = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">module</a>();</div>
<div class="line"><span class="lineno">   53</span> </div>
<div class="line"><span class="lineno">   54</span>  <span class="comment">// Destroy a dead bag and its updaters</span></div>
<div class="line"><span class="lineno">   55</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> bag : dead_bags(<a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>))</div>
<div class="line"><span class="lineno">   56</span>  {</div>
<div class="line"><span class="lineno">   57</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> updater : <a class="code hl_function" href="namespacecoco.html#a3a41e99ef1a6fd7f98187d240886b8a8">coco::updaters</a>(bag))</div>
<div class="line"><span class="lineno">   58</span>    {</div>
<div class="line"><span class="lineno">   59</span>      <span class="keyword">auto</span> ins = updater-&gt;loc();</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>      assert(ins != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>      ins-&gt;detach();</div>
<div class="line"><span class="lineno">   64</span>      <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;destroy(ins);</div>
<div class="line"><span class="lineno">   65</span>    }</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>    bag-&gt;replaceWith(<span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   68</span>    <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;bag()-&gt;destroy(bag);</div>
<div class="line"><span class="lineno">   69</span>  }</div>
<div class="line"><span class="lineno">   70</span>}</div>
<div class="ttc" id="a_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_html_aa73e018b04368e7afaded77ef0ac69db"><div class="ttname"><a href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a></div><div class="ttdeci">std::mutex m</div><div class="ttdef"><b>Definition:</b> <a href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">NEGEMMMatrixAccumulateBiasesKernel.cpp:135</a></div></div>
<div class="ttc" id="anamespacecoco_html_a3a41e99ef1a6fd7f98187d240886b8a8"><div class="ttname"><a href="namespacecoco.html#a3a41e99ef1a6fd7f98187d240886b8a8">coco::updaters</a></div><div class="ttdeci">Bag::UpdaterSet updaters(const Bag *)</div><div class="ttdoc">Return a set of updaters that updates a given bag.</div><div class="ttdef"><b>Definition:</b> <a href="_bag_8cpp_source.html#l00125">Bag.cpp:125</a></div></div>
<div class="ttc" id="anamespaceenco_html_a3d4e56ec31be86ad47be84f20622bc0e"><div class="ttname"><a href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">enco::code</a></div><div class="ttdeci">Code * code(const SessionID &amp;sess)</div><div class="ttdef"><b>Definition:</b> <a href="enco_2core_2src_2_session_8cpp_source.html#l00054">Session.cpp:54</a></div></div>
<div class="ttc" id="astructenco_1_1_code_html_a022dab73aea454d37ada345303b6e848"><div class="ttname"><a href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">enco::Code::module</a></div><div class="ttdeci">coco::Module * module(void) const</div><div class="ttdef"><b>Definition:</b> <a href="_code_8h_source.html#l00037">Code.h:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>, <a class="el" href="_code_8h_source.html#l00037">enco::Code::module()</a>, and <a class="el" href="_bag_8cpp_source.html#l00125">coco::updaters()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dead_bag_elimination_8h_source.html#l00043">enco::DeadBagEliminationPass::run()</a>.</p>

</div>
</div>
<a id="a35fa9b69d5b5ef2c1f76a0621edf2519" name="a35fa9b69d5b5ef2c1f76a0621edf2519"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35fa9b69d5b5ef2c1f76a0621edf2519">&#9670;&#160;</a></span>eliminate_dead_object()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::eliminate_dead_object </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Eliminate dead objects in IR. </p>
<p >An object whose backing bag is unused is referred to as a dead object.</p>
<p >Dead Object Elimination (DOE) eliminates such dead objects along with their producer. </p>

<p class="definition">Definition at line <a class="el" href="_dead_object_elimination_8cpp_source.html#l00057">57</a> of file <a class="el" href="_dead_object_elimination_8cpp_source.html">DeadObjectElimination.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>{</div>
<div class="line"><span class="lineno">   59</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a> = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">module</a>();</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>  <span class="comment">// Destroy a dead object and its producer</span></div>
<div class="line"><span class="lineno">   62</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> obj : dead_objects(<a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>))</div>
<div class="line"><span class="lineno">   63</span>  {</div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span> producer = <a class="code hl_function" href="namespacecoco.html#a54e6ea819f6bdd415a5f11e836362b61">coco::producer</a>(obj))</div>
<div class="line"><span class="lineno">   65</span>    {</div>
<div class="line"><span class="lineno">   66</span>      <span class="keyword">auto</span> ins = producer-&gt;loc();</div>
<div class="line"><span class="lineno">   67</span>      assert(ins != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>      ins-&gt;detach();</div>
<div class="line"><span class="lineno">   70</span>      <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;destroy(ins);</div>
<div class="line"><span class="lineno">   71</span>    }</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>    <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;object()-&gt;destroy(obj);</div>
<div class="line"><span class="lineno">   74</span>  }</div>
<div class="line"><span class="lineno">   75</span>}</div>
<div class="ttc" id="anamespacecoco_html_a54e6ea819f6bdd415a5f11e836362b61"><div class="ttname"><a href="namespacecoco.html#a54e6ea819f6bdd415a5f11e836362b61">coco::producer</a></div><div class="ttdeci">Object::Producer * producer(const Object *)</div><div class="ttdoc">Return the producer of a given object if it exists.</div><div class="ttdef"><b>Definition:</b> <a href="_object_8cpp_source.html#l00055">Object.cpp:55</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>, <a class="el" href="_code_8h_source.html#l00037">enco::Code::module()</a>, and <a class="el" href="_object_8cpp_source.html#l00055">coco::producer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dead_object_elimination_8h_source.html#l00042">enco::DeadObjectEliminationPass::run()</a>.</p>

</div>
</div>
<a id="aaccbaaf5bbeba1ba56d4d9044d5b7a1b" name="aaccbaaf5bbeba1ba56d4d9044d5b7a1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaccbaaf5bbeba1ba56d4d9044d5b7a1b">&#9670;&#160;</a></span>eliminate_free_instr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::eliminate_free_instr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcoco_1_1_module.html">coco::Module</a> *&#160;</td>
          <td class="paramname"><em>mod</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Eliminate free instructions. </p>
<p >An instruction is referred to as "free" if it is not bound to any "block" </p>

<p class="definition">Definition at line <a class="el" href="_free_instr_elimination_8cpp_source.html#l00057">57</a> of file <a class="el" href="_free_instr_elimination_8cpp_source.html">FreeInstrElimination.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>{</div>
<div class="line"><span class="lineno">   59</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> ins : free_instrs(<a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>))</div>
<div class="line"><span class="lineno">   60</span>  {</div>
<div class="line"><span class="lineno">   61</span>    destroy(ins);</div>
<div class="line"><span class="lineno">   62</span>  }</div>
<div class="line"><span class="lineno">   63</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>.</p>

<p class="reference">Referenced by <a class="el" href="_free_instr_elimination_8h_source.html#l00049">enco::FreeInstrEliminationPass::run()</a>.</p>

</div>
</div>
<a id="a3f74cb35d79da97e807fd6b83c0c3261" name="a3f74cb35d79da97e807fd6b83c0c3261"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f74cb35d79da97e807fd6b83c0c3261">&#9670;&#160;</a></span>eliminate_free_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::eliminate_free_op </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcoco_1_1_module.html">coco::Module</a> *&#160;</td>
          <td class="paramname"><em>mod</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Eliminate free op. </p>
<p >An op is referred to as "free" if it is not bound to any "instruction" </p>

<p class="definition">Definition at line <a class="el" href="_free_op_elimination_8cpp_source.html#l00051">51</a> of file <a class="el" href="_free_op_elimination_8cpp_source.html">FreeOpElimination.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   52</span>{</div>
<div class="line"><span class="lineno">   53</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> op : candidates(<a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>))</div>
<div class="line"><span class="lineno">   54</span>  {</div>
<div class="line"><span class="lineno">   55</span>    <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;op()-&gt;destroy_all(op);</div>
<div class="line"><span class="lineno">   56</span>  }</div>
<div class="line"><span class="lineno">   57</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>.</p>

<p class="reference">Referenced by <a class="el" href="_free_op_elimination_8h_source.html#l00049">enco::FreeOpEliminationPass::run()</a>.</p>

</div>
</div>
<a id="a4f0518cc02a4ac36303ba0d03dce5ba0" name="a4f0518cc02a4ac36303ba0d03dce5ba0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f0518cc02a4ac36303ba0d03dce5ba0">&#9670;&#160;</a></span>eliminate_indirect_copy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::eliminate_indirect_copy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert all the indirect copies as a direct copy. </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p >&zwj;BEFORE &lt;&lt;&lt; </p>
</blockquote>
</blockquote>
</blockquote>
<p>obj_0 = ... obj_1 = ... obj_2 = ...</p>
<p >copy(from: obj_0, into: obj_1) copy(from: obj_1, into: obj_2)</p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p >&zwj;AFTER &lt;&lt;&lt; </p>
</blockquote>
</blockquote>
</blockquote>
<p>obj_0 = ... obj_1 = ... obj_2 = ...</p>
<p >copy(from: obj_0, into: obj_1) copy(from: obj_0, into: obj_2) </p>

<p class="definition">Definition at line <a class="el" href="_indirect_copy_elimination_8cpp_source.html#l00055">55</a> of file <a class="el" href="_indirect_copy_elimination_8cpp_source.html">IndirectCopyElimination.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   56</span>{</div>
<div class="line"><span class="lineno">   57</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a> = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">module</a>();</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> child : linked_copy_instrs(<a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>))</div>
<div class="line"><span class="lineno">   60</span>  {</div>
<div class="line"><span class="lineno">   61</span>    <span class="keyword">auto</span> from = child-&gt;from();</div>
<div class="line"><span class="lineno">   62</span>    assert(from != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>    <span class="comment">// Find the irreducible origin</span></div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">   66</span>    {</div>
<div class="line"><span class="lineno">   67</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span> producer = <a class="code hl_function" href="namespacecoco.html#a54e6ea819f6bdd415a5f11e836362b61">coco::producer</a>(from))</div>
<div class="line"><span class="lineno">   68</span>      {</div>
<div class="line"><span class="lineno">   69</span>        <span class="keywordflow">if</span> (<span class="keyword">auto</span> parent = as_copy(producer-&gt;loc()))</div>
<div class="line"><span class="lineno">   70</span>        {</div>
<div class="line"><span class="lineno">   71</span>          assert(parent-&gt;from() != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   72</span>          from = parent-&gt;from();</div>
<div class="line"><span class="lineno">   73</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   74</span>        }</div>
<div class="line"><span class="lineno">   75</span>      }</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   78</span>    }</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>    child-&gt;from(from);</div>
<div class="line"><span class="lineno">   81</span>  }</div>
<div class="line"><span class="lineno">   82</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>, <a class="el" href="_code_8h_source.html#l00037">enco::Code::module()</a>, and <a class="el" href="_object_8cpp_source.html#l00055">coco::producer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_indirect_copy_elimination_8h_source.html#l00055">enco::IndirectCopyEliminationPass::run()</a>.</p>

</div>
</div>
<a id="a001ec80a2b05be0926ea09c1ad6eed1f" name="a001ec80a2b05be0926ea09c1ad6eed1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a001ec80a2b05be0926ea09c1ad6eed1f">&#9670;&#160;</a></span>fold_constants()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::fold_constants </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evaluate "constant" expressions at compile time. </p>

<p class="definition">Definition at line <a class="el" href="_constant_folding_8cpp_source.html#l00419">419</a> of file <a class="el" href="_constant_folding_8cpp_source.html">ConstantFolding.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  420</span>{</div>
<div class="line"><span class="lineno">  421</span>  std::queue&lt;coco::Bag *&gt; q;</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>  <span class="comment">// Collect the initial set of &quot;constant&quot; bag</span></div>
<div class="line"><span class="lineno">  424</span>  constant_bag_enumerator(code) &lt;&lt; [&amp;q](<a class="code hl_class" href="classcoco_1_1_bag.html">coco::Bag</a> *bag) { q.push(bag); };</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>  <span class="keywordflow">while</span> (!q.empty())</div>
<div class="line"><span class="lineno">  427</span>  {</div>
<div class="line"><span class="lineno">  428</span>    <span class="keyword">auto</span> candidate_bag = take(q);</div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span>    <span class="comment">// Scan the readers of each candidate bag</span></div>
<div class="line"><span class="lineno">  431</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> reader : <a class="code hl_function" href="namespacecoco.html#ab2cf693361d21ba0b1d02fcb4fbd0332">coco::readers</a>(candidate_bag))</div>
<div class="line"><span class="lineno">  432</span>    {</div>
<div class="line"><span class="lineno">  433</span>      <span class="comment">// TODO Decide how to handle the reader with unknown instruction</span></div>
<div class="line"><span class="lineno">  434</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span> ins = reader-&gt;loc())</div>
<div class="line"><span class="lineno">  435</span>      {</div>
<div class="line"><span class="lineno">  436</span>        fold_constant(q, ins);</div>
<div class="line"><span class="lineno">  437</span>      }</div>
<div class="line"><span class="lineno">  438</span>    }</div>
<div class="line"><span class="lineno">  439</span>  }</div>
<div class="line"><span class="lineno">  440</span>}</div>
<div class="ttc" id="aclasscoco_1_1_bag_html"><div class="ttname"><a href="classcoco_1_1_bag.html">coco::Bag</a></div><div class="ttdoc">A collection of (abstracted) elements of the same type.</div><div class="ttdef"><b>Definition:</b> <a href="_bag_8h_source.html#l00047">Bag.h:48</a></div></div>
<div class="ttc" id="anamespacecoco_html_ab2cf693361d21ba0b1d02fcb4fbd0332"><div class="ttname"><a href="namespacecoco.html#ab2cf693361d21ba0b1d02fcb4fbd0332">coco::readers</a></div><div class="ttdeci">Bag::ReaderSet readers(const Bag *)</div><div class="ttdoc">Return a set of readers that reads a given bag.</div><div class="ttdef"><b>Definition:</b> <a href="_bag_8cpp_source.html#l00102">Bag.cpp:102</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, and <a class="el" href="_bag_8cpp_source.html#l00102">coco::readers()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_constant_folding_8h_source.html#l00038">enco::ConstantFoldingPass::run()</a>.</p>

</div>
</div>
<a id="ab3cc83e6040b60f16d1cd9e5a61eb0be" name="ab3cc83e6040b60f16d1cd9e5a61eb0be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3cc83e6040b60f16d1cd9e5a61eb0be">&#9670;&#160;</a></span>generate_bypass_shuffle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::generate_bypass_shuffle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a bypass Shuffle if two continued Shuffles map same from-into. </p>
<p >bag_1 = Bag(size: N) bag_2 = Bag(size: N) bag_3 = Bag(size: N)</p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p >&zwj;BEFORE &lt;&lt;&lt; </p>
</blockquote>
</blockquote>
</blockquote>
<p>Shuffle(from: bag_1, into: bag_2, [0 -&gt; 0]) Shuffle(from: bag_2, into: bag_3, [0 -&gt; 0])</p>
<p >Let's refer to the former shuffle as Shuffle 1 and the latter one as Shuffle 2. We can replace Shuffle 2 with new Shuffle 3 as follows when Shuffle 1 and Shuffle 2 map to the same position.</p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p >&zwj;AFTER &lt;&lt;&lt; </p>
</blockquote>
</blockquote>
</blockquote>
<p>Shuffle(from: bag_1, into: bag_2, [0 -&gt; 0]) &lt;- Shuffle 1 Shuffle(from: bag_1, into: bag_3, [0 -&gt; 0]) &lt;- Shuffle 3</p>
<p >Note that Shuffle 1 can be eliminated when bag_2 is not used </p>

<p class="definition">Definition at line <a class="el" href="_optimizations_8cpp_source.html#l00025">25</a> of file <a class="el" href="_optimizations_8cpp_source.html">Optimizations.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   26</span>{</div>
<div class="line"><span class="lineno">   27</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a> = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">module</a>();</div>
<div class="line"><span class="lineno">   28</span> </div>
<div class="line"><span class="lineno">   29</span>  <span class="keywordflow">for</span> (uint32_t n = 0; n &lt; <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;bag()-&gt;size(); ++n)</div>
<div class="line"><span class="lineno">   30</span>  {</div>
<div class="line"><span class="lineno">   31</span>    <span class="keyword">auto</span> bag = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;bag()-&gt;at(n);</div>
<div class="line"><span class="lineno">   32</span> </div>
<div class="line"><span class="lineno">   33</span>    <span class="comment">// NOTE The current implementation assumes that all the updates occurs before the first read</span></div>
<div class="line"><span class="lineno">   34</span>    <span class="comment">// TODO Remove this assumption</span></div>
<div class="line"><span class="lineno">   35</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> u : <a class="code hl_function" href="namespacecoco.html#a3a41e99ef1a6fd7f98187d240886b8a8">coco::updaters</a>(bag))</div>
<div class="line"><span class="lineno">   36</span>    {</div>
<div class="line"><span class="lineno">   37</span>      <span class="keywordflow">if</span> ((u-&gt;loc() == <span class="keyword">nullptr</span>) || (u-&gt;loc()-&gt;asShuffle() == <span class="keyword">nullptr</span>))</div>
<div class="line"><span class="lineno">   38</span>      {</div>
<div class="line"><span class="lineno">   39</span>        <span class="comment">// Skip if updater is not a Shuffle instruction</span></div>
<div class="line"><span class="lineno">   40</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   41</span>      }</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> r : <a class="code hl_function" href="namespacecoco.html#ab2cf693361d21ba0b1d02fcb4fbd0332">coco::readers</a>(bag))</div>
<div class="line"><span class="lineno">   44</span>      {</div>
<div class="line"><span class="lineno">   45</span>        <span class="keywordflow">if</span> ((r-&gt;loc() == <span class="keyword">nullptr</span>) || (r-&gt;loc()-&gt;asShuffle() == <span class="keyword">nullptr</span>))</div>
<div class="line"><span class="lineno">   46</span>        {</div>
<div class="line"><span class="lineno">   47</span>          <span class="comment">// Skip if reader is not a Shuffle instruction</span></div>
<div class="line"><span class="lineno">   48</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   49</span>        }</div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span>        <span class="keyword">auto</span> shuffle_1 = u-&gt;loc()-&gt;asShuffle();</div>
<div class="line"><span class="lineno">   52</span>        <span class="keyword">auto</span> shuffle_2 = <a class="code hl_variable" href="namespacejpeg2hdf5.html#a58a5106a4f3aa3bddd71f4ace1245a0c">r</a>-&gt;loc()-&gt;asShuffle();</div>
<div class="line"><span class="lineno">   53</span> </div>
<div class="line"><span class="lineno">   54</span>        <span class="comment">// Construct a shuffle instruction</span></div>
<div class="line"><span class="lineno">   55</span>        <span class="keyword">auto</span> shuffle_3 = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;create&lt;<a class="code hl_class" href="classcoco_1_1_shuffle.html">coco::Shuffle</a>&gt;();</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span>        shuffle_3-&gt;<a class="code hl_function" href="classcoco_1_1_shuffle.html#a038f3c6c4c1f619a37164ff5517ea08c">from</a>(shuffle_1-&gt;from());</div>
<div class="line"><span class="lineno">   58</span>        shuffle_3-&gt;into(shuffle_2-&gt;into());</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>        <span class="comment">// Attempt to construct a valid bypass shuffle instruction</span></div>
<div class="line"><span class="lineno">   61</span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="namespacecwrap.html#afa0fb0fd415f44ef83e60757f2fd0580">valid</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;C : shuffle_2-&gt;range())</div>
<div class="line"><span class="lineno">   64</span>        {</div>
<div class="line"><span class="lineno">   65</span>          <span class="keyword">auto</span> B = shuffle_2-&gt;at(C);</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>          <span class="keywordflow">if</span> (!shuffle_1-&gt;defined(B))</div>
<div class="line"><span class="lineno">   68</span>          {</div>
<div class="line"><span class="lineno">   69</span>            <a class="code hl_function" href="namespacecwrap.html#afa0fb0fd415f44ef83e60757f2fd0580">valid</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   70</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   71</span>          }</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>          <span class="keyword">auto</span> A = shuffle_1-&gt;at(B);</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>          shuffle_3-&gt;insert(A, C);</div>
<div class="line"><span class="lineno">   76</span>        }</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span>        <span class="keywordflow">if</span> (valid)</div>
<div class="line"><span class="lineno">   79</span>        {</div>
<div class="line"><span class="lineno">   80</span>          <span class="comment">// Insert shuffle_3 before shuffle_2 if shuffle_3 is a valid bypass of shuffle_2</span></div>
<div class="line"><span class="lineno">   81</span>          shuffle_3-&gt;insertBefore(shuffle_2);</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>          <span class="comment">// NOTE shuffle_2 SHOULD BE detached and destroyed after shuffle_3 is inserted</span></div>
<div class="line"><span class="lineno">   84</span>          shuffle_2-&gt;detach();</div>
<div class="line"><span class="lineno">   85</span>          <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;destroy(shuffle_2);</div>
<div class="line"><span class="lineno">   86</span>        }</div>
<div class="line"><span class="lineno">   87</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   88</span>        {</div>
<div class="line"><span class="lineno">   89</span>          <span class="comment">// Destroy shuffle_3 (bypass shuffle) if it is invalid</span></div>
<div class="line"><span class="lineno">   90</span>          <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;destroy(shuffle_3);</div>
<div class="line"><span class="lineno">   91</span>        }</div>
<div class="line"><span class="lineno">   92</span>      }</div>
<div class="line"><span class="lineno">   93</span>    }</div>
<div class="line"><span class="lineno">   94</span>  }</div>
<div class="line"><span class="lineno">   95</span>}</div>
<div class="ttc" id="aclasscoco_1_1_shuffle_html"><div class="ttname"><a href="classcoco_1_1_shuffle.html">coco::Shuffle</a></div><div class="ttdoc">Generic element transfer.</div><div class="ttdef"><b>Definition:</b> <a href="_instrs_8h_source.html#l00115">Instrs.h:116</a></div></div>
<div class="ttc" id="aclasscoco_1_1_shuffle_html_a038f3c6c4c1f619a37164ff5517ea08c"><div class="ttname"><a href="classcoco_1_1_shuffle.html#a038f3c6c4c1f619a37164ff5517ea08c">coco::Shuffle::from</a></div><div class="ttdeci">Bag * from(void) const</div><div class="ttdef"><b>Definition:</b> <a href="_instrs_8h_source.html#l00131">Instrs.h:131</a></div></div>
<div class="ttc" id="anamespacecwrap_html_afa0fb0fd415f44ef83e60757f2fd0580"><div class="ttname"><a href="namespacecwrap.html#afa0fb0fd415f44ef83e60757f2fd0580">cwrap::valid</a></div><div class="ttdeci">bool valid(const Fildes &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="_fildes_8cpp_source.html#l00098">Fildes.cpp:98</a></div></div>
<div class="ttc" id="anamespacejpeg2hdf5_html_a58a5106a4f3aa3bddd71f4ace1245a0c"><div class="ttname"><a href="namespacejpeg2hdf5.html#a58a5106a4f3aa3bddd71f4ace1245a0c">jpeg2hdf5.r</a></div><div class="ttdeci">r</div><div class="ttdef"><b>Definition:</b> <a href="jpeg2hdf5_8py_source.html#l00105">jpeg2hdf5.py:105</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="_instrs_8h_source.html#l00131">coco::Shuffle::from()</a>, <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>, <a class="el" href="_code_8h_source.html#l00037">enco::Code::module()</a>, <a class="el" href="_bag_8cpp_source.html#l00102">coco::readers()</a>, and <a class="el" href="_bag_8cpp_source.html#l00125">coco::updaters()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_optimizations_8h_source.html#l00056">enco::BypassGenerationPass::run()</a>.</p>

</div>
</div>
<a id="a24990c06c9bf79de7411e1e1d0e4afaa" name="a24990c06c9bf79de7411e1e1d0e4afaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24990c06c9bf79de7411e1e1d0e4afaa">&#9670;&#160;</a></span>generate_global_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::generate_global_data </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate 'Global' weight array. </p>
<p >NOTE Succeeding passes can access offsets via "GlobalData" </p>

<p class="definition">Definition at line <a class="el" href="_global_data_generation_8cpp_source.html#l00109">109</a> of file <a class="el" href="_global_data_generation_8cpp_source.html">GlobalDataGeneration.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  110</span>{</div>
<div class="line"><span class="lineno">  111</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a> = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">module</a>();</div>
<div class="line"><span class="lineno">  112</span>  <span class="keyword">auto</span> d = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a6bc0f12c7cbe99f0d43855f9964969d2">data</a>();</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>  <span class="keyword">auto</span> ann_ctx = <a class="code hl_function" href="structenco_1_1_subnet_manager.html#a2f6092b07560f62155c895f0dbb90704">enco::SubnetManager::context</a>(<a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>);</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>  <span class="keyword">auto</span> global = make_unique&lt;Global&gt;(os);</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>  <span class="comment">//</span></div>
<div class="line"><span class="lineno">  119</span>  <span class="comment">// Emit Bag&#39;s weight</span></div>
<div class="line"><span class="lineno">  120</span>  <span class="comment">//</span></div>
<div class="line"><span class="lineno">  121</span>  <span class="keywordflow">for</span> (uint32_t n = 0; n &lt; <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;bag()-&gt;size(); ++n)</div>
<div class="line"><span class="lineno">  122</span>  {</div>
<div class="line"><span class="lineno">  123</span>    <span class="keyword">auto</span> bag = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;bag()-&gt;at(n);</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">if</span> (!d-&gt;allocated(bag))</div>
<div class="line"><span class="lineno">  126</span>    {</div>
<div class="line"><span class="lineno">  127</span>      <span class="comment">// Skip if the weight value does not exist for a given bag</span></div>
<div class="line"><span class="lineno">  128</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  129</span>    }</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>    <span class="comment">// NOTE The current implementation assumes that all the values are of float(fp32) type</span></div>
<div class="line"><span class="lineno">  132</span>    <span class="comment">// TODO Support non-float values</span></div>
<div class="line"><span class="lineno">  133</span>    <span class="keyword">auto</span> span = d-&gt;f32()-&gt;weight(bag);</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>    assert(span.data() != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  136</span>    assert(span.size() &gt; 0);</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>    <span class="keyword">auto</span> <span class="keyword">const</span> base = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t *<span class="keyword">&gt;</span>(span.data());</div>
<div class="line"><span class="lineno">  139</span>    uint32_t <span class="keyword">const</span> size = span.size() * <span class="keyword">sizeof</span>(float);</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>    assert(bag_data_offset_ctx.find(bag) == bag_data_offset_ctx.end());</div>
<div class="line"><span class="lineno">  142</span>    bag_data_offset_ctx[bag] = global-&gt;constant(base, size);</div>
<div class="line"><span class="lineno">  143</span>  }</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>  <span class="keywordflow">for</span> (uint32_t n = 0; n &lt; ann_ctx-&gt;count(); ++n)</div>
<div class="line"><span class="lineno">  146</span>  {</div>
<div class="line"><span class="lineno">  147</span>    <span class="keyword">auto</span> binder = ann_ctx-&gt;nth(n);</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>    <span class="keyword">auto</span> emit = [&amp;](<span class="keyword">const</span> <a class="code hl_class" href="classann_1_1_operand_i_d.html">ann::OperandID</a> &amp; <span class="comment">/*id*/</span>, <span class="keyword">const</span> <a class="code hl_class" href="classann_1_1_operand.html">ann::Operand</a> *<a class="code hl_variable" href="library__info_8cc.html#a54f2e176d30fe963addf60c313ccd9ca">info</a>) {</div>
<div class="line"><span class="lineno">  150</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="library__info_8cc.html#a54f2e176d30fe963addf60c313ccd9ca">info</a>-&gt;weight())</div>
<div class="line"><span class="lineno">  151</span>      {</div>
<div class="line"><span class="lineno">  152</span>        <span class="keyword">auto</span> base = <a class="code hl_variable" href="library__info_8cc.html#a54f2e176d30fe963addf60c313ccd9ca">info</a>-&gt;weight()-&gt;base();</div>
<div class="line"><span class="lineno">  153</span>        <span class="keyword">auto</span> <a class="code hl_function" href="namespaceloco.html#a4d01930bc9d64546f93776723542b22d">size</a> = <a class="code hl_variable" href="library__info_8cc.html#a54f2e176d30fe963addf60c313ccd9ca">info</a>-&gt;weight()-&gt;size();</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>        data_offset_ctx[<a class="code hl_variable" href="library__info_8cc.html#a54f2e176d30fe963addf60c313ccd9ca">info</a>] = global-&gt;constant(base, size);</div>
<div class="line"><span class="lineno">  156</span>      }</div>
<div class="line"><span class="lineno">  157</span>    };</div>
<div class="line"><span class="lineno">  158</span>    binder-&gt;module()-&gt;operand()-&gt;each(emit);</div>
<div class="line"><span class="lineno">  159</span>  }</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>  <span class="keywordflow">for</span> (uint32_t n = 0; n &lt; <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;input()-&gt;size(); ++n)</div>
<div class="line"><span class="lineno">  162</span>  {</div>
<div class="line"><span class="lineno">  163</span>    <span class="keyword">auto</span> <a class="code hl_variable" href="namespacegen__h5__explicit__inputs.html#a48dd077479f23bb4552c2d7d6a7a4d37">input</a> = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;input()-&gt;at(n);</div>
<div class="line"><span class="lineno">  164</span>    <span class="keyword">auto</span> dims = <a class="code hl_function" href="namespacemorph.html#aa99b14b3992c5801d3e46acfc4f19909">as_dims</a>(<a class="code hl_variable" href="namespacegen__h5__explicit__inputs.html#a48dd077479f23bb4552c2d7d6a7a4d37">input</a>-&gt;shape());</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>    name_offset_ctx[<a class="code hl_variable" href="namespacegen__h5__explicit__inputs.html#a48dd077479f23bb4552c2d7d6a7a4d37">input</a>] = global-&gt;constant(<a class="code hl_variable" href="namespacegen__h5__explicit__inputs.html#a48dd077479f23bb4552c2d7d6a7a4d37">input</a>-&gt;name());</div>
<div class="line"><span class="lineno">  167</span>    dims_offset_ctx[<a class="code hl_variable" href="namespacegen__h5__explicit__inputs.html#a48dd077479f23bb4552c2d7d6a7a4d37">input</a>] = global-&gt;constant&lt;uint32_t&gt;(dims);</div>
<div class="line"><span class="lineno">  168</span>  }</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>  <span class="keywordflow">for</span> (uint32_t n = 0; n &lt; <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;output()-&gt;size(); ++n)</div>
<div class="line"><span class="lineno">  171</span>  {</div>
<div class="line"><span class="lineno">  172</span>    <span class="keyword">auto</span> <a class="code hl_variable" href="namespacegen__h5__explicit__inputs.html#acd1aa9ba45d45c6b619b723e6e34c576">output</a> = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;output()-&gt;at(n);</div>
<div class="line"><span class="lineno">  173</span>    <span class="keyword">auto</span> dims = <a class="code hl_function" href="namespacemorph.html#aa99b14b3992c5801d3e46acfc4f19909">as_dims</a>(<a class="code hl_variable" href="namespacegen__h5__explicit__inputs.html#acd1aa9ba45d45c6b619b723e6e34c576">output</a>-&gt;shape());</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>    name_offset_ctx[<a class="code hl_variable" href="namespacegen__h5__explicit__inputs.html#acd1aa9ba45d45c6b619b723e6e34c576">output</a>] = global-&gt;constant(<a class="code hl_variable" href="namespacegen__h5__explicit__inputs.html#acd1aa9ba45d45c6b619b723e6e34c576">output</a>-&gt;name());</div>
<div class="line"><span class="lineno">  176</span>    dims_offset_ctx[<a class="code hl_variable" href="namespacegen__h5__explicit__inputs.html#acd1aa9ba45d45c6b619b723e6e34c576">output</a>] = global-&gt;constant&lt;uint32_t&gt;(dims);</div>
<div class="line"><span class="lineno">  177</span>  }</div>
<div class="line"><span class="lineno">  178</span>}</div>
<div class="ttc" id="aclassann_1_1_operand_html"><div class="ttname"><a href="classann_1_1_operand.html">ann::Operand</a></div><div class="ttdef"><b>Definition:</b> <a href="compiler_2enco_2core_2src_2_a_n_n_2_i_r_2_operand_8h_source.html#l00028">Operand.h:29</a></div></div>
<div class="ttc" id="aclassann_1_1_operand_i_d_html"><div class="ttname"><a href="classann_1_1_operand_i_d.html">ann::OperandID</a></div><div class="ttdef"><b>Definition:</b> <a href="_operand_i_d_8h_source.html#l00025">OperandID.h:26</a></div></div>
<div class="ttc" id="alibrary__info_8cc_html_a54f2e176d30fe963addf60c313ccd9ca"><div class="ttname"><a href="library__info_8cc.html#a54f2e176d30fe963addf60c313ccd9ca">info</a></div><div class="ttdeci">volatile const char info[]</div><div class="ttdef"><b>Definition:</b> <a href="library__info_8cc_source.html#l00017">library_info.cc:17</a></div></div>
<div class="ttc" id="anamespacegen__h5__explicit__inputs_html_a48dd077479f23bb4552c2d7d6a7a4d37"><div class="ttname"><a href="namespacegen__h5__explicit__inputs.html#a48dd077479f23bb4552c2d7d6a7a4d37">gen_h5_explicit_inputs.input</a></div><div class="ttdeci">input</div><div class="ttdef"><b>Definition:</b> <a href="gen__h5__explicit__inputs_8py_source.html#l00034">gen_h5_explicit_inputs.py:34</a></div></div>
<div class="ttc" id="anamespacegen__h5__explicit__inputs_html_acd1aa9ba45d45c6b619b723e6e34c576"><div class="ttname"><a href="namespacegen__h5__explicit__inputs.html#acd1aa9ba45d45c6b619b723e6e34c576">gen_h5_explicit_inputs.output</a></div><div class="ttdeci">output</div><div class="ttdef"><b>Definition:</b> <a href="gen__h5__explicit__inputs_8py_source.html#l00035">gen_h5_explicit_inputs.py:35</a></div></div>
<div class="ttc" id="anamespaceloco_html_a4d01930bc9d64546f93776723542b22d"><div class="ttname"><a href="namespaceloco.html#a4d01930bc9d64546f93776723542b22d">loco::size</a></div><div class="ttdeci">uint32_t size(DataType data_type)</div><div class="ttdoc">Returns the size of the data type.</div><div class="ttdef"><b>Definition:</b> <a href="_data_type_traits_8h_source.html#l00122">DataTypeTraits.h:122</a></div></div>
<div class="ttc" id="anamespacemorph_html_aa99b14b3992c5801d3e46acfc4f19909"><div class="ttname"><a href="namespacemorph.html#aa99b14b3992c5801d3e46acfc4f19909">morph::as_dims</a></div><div class="ttdeci">Dims&lt; uint32_t &gt; as_dims(const nncc::core::ADT::tensor::Shape &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="morph_2src_2dims_8cpp_source.html#l00024">dims.cpp:24</a></div></div>
<div class="ttc" id="astructenco_1_1_code_html_a6bc0f12c7cbe99f0d43855f9964969d2"><div class="ttname"><a href="structenco_1_1_code.html#a6bc0f12c7cbe99f0d43855f9964969d2">enco::Code::data</a></div><div class="ttdeci">coco::Data * data(void) const</div><div class="ttdef"><b>Definition:</b> <a href="_code_8h_source.html#l00038">Code.h:38</a></div></div>
<div class="ttc" id="astructenco_1_1_subnet_manager_html_a2f6092b07560f62155c895f0dbb90704"><div class="ttname"><a href="structenco_1_1_subnet_manager.html#a2f6092b07560f62155c895f0dbb90704">enco::SubnetManager::context</a></div><div class="ttdeci">static const ANNContext * context(const coco::Module *m)</div><div class="ttdef"><b>Definition:</b> <a href="compiler_2enco_2core_2src_2_transforms_2_split_8cpp_source.html#l00043">Split.cpp:43</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="compiler_2enco_2core_2src_2_transforms_2_split_8cpp_source.html#l00043">enco::SubnetManager::context()</a>, <a class="el" href="_code_8h_source.html#l00038">enco::Code::data()</a>, <a class="el" href="library__info_8cc_source.html#l00017">info</a>, <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>, and <a class="el" href="_code_8h_source.html#l00037">enco::Code::module()</a>.</p>

</div>
</div>
<a id="a3ec5886b4893e8f1a13f7d13b22f5abc" name="a3ec5886b4893e8f1a13f7d13b22f5abc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ec5886b4893e8f1a13f7d13b22f5abc">&#9670;&#160;</a></span>hoist_object()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::hoist_object </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the base bag of each object if possible. </p>
<p >&mdash; Case 1 &mdash; Let us consider the following code:</p>
<p >bag_1 = Bag(size: 4) bag_2 = Bag(size: 1)</p>
<p >obj_1 = ... at bag_1 obj_2 = ... at bag_2</p>
<p >... Shuffle(from: bag_1, into: bag_2, [0 -&gt; 0]) &lt;- shuffle ...</p>
<p >Note that the content of bag_2 after shuffle is identical to a part of bag_1, so the following code is identical to the above code</p>
<p >bag_1 = Bag(size: 4) bag_2 = Bag(size: 1)</p>
<p >obj_1 = ... at bag_1 obj_2 = ... at bag_1</p>
<p >... Shuffle(from: bag_1, into: bag_2, [0 -&gt; 0]) ...</p>
<p >&mdash; Case 2 &mdash; Let us consider the following code:</p>
<p >bag_1 = Bag(size: 4) bag_2 = Bag(size: 1) bag_3 = Bag(size: 1)</p>
<p >obj_1 = ... at bag_2 obj_2 = ... at bag_3</p>
<p >Shuffle(from: bag_1, into: bag_2, [0 -&gt; 0]) &lt;- shuffle_1 Shuffle(from: bag_1, into: bag_3, [0 -&gt; 0]) &lt;- shuffle_2</p>
<p >Note that the content of bag_3 after shuffle_2 is identical to that of bag_2 after shuffle_1, so the following code is identical to the above one:</p>
<p >bag_1 = Bag(size: 4) bag_2 = Bag(size: 1) bag_3 = Bag(size: 1)</p>
<p >obj_1 = ... at bag_2 obj_2 = ... at bag_2 &lt;- HERE</p>
<p >Shuffle(from: bag_1, into: bag_2, [0 -&gt; 0]) &lt;- shuffle_1 Shuffle(from: bag_1, into: bag_3, [0 -&gt; 0]) &lt;- shuffle_2</p>
<p >"hoist_object" optimization rewrites the former code as the latter one.</p>
<p >NOTE "hoist_object" DOES NOT change any instruction. It just updates the base bag of objects of interest. </p>

<p class="definition">Definition at line <a class="el" href="_optimizations_8cpp_source.html#l00175">175</a> of file <a class="el" href="_optimizations_8cpp_source.html">Optimizations.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  176</span>{</div>
<div class="line"><span class="lineno">  177</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a> = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">module</a>();</div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>  <span class="comment">//</span></div>
<div class="line"><span class="lineno">  180</span>  <span class="comment">// Case 1</span></div>
<div class="line"><span class="lineno">  181</span>  <span class="comment">//</span></div>
<div class="line"><span class="lineno">  182</span>  <span class="keywordflow">for</span> (uint32_t n = 0; n &lt; <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;size(); ++n)</div>
<div class="line"><span class="lineno">  183</span>  {</div>
<div class="line"><span class="lineno">  184</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span> shuffle = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;at(n)-&gt;asShuffle())</div>
<div class="line"><span class="lineno">  185</span>    {</div>
<div class="line"><span class="lineno">  186</span>      <span class="keywordflow">if</span> (shuffle-&gt;parent() == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno">  187</span>      {</div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  189</span>      }</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>      <span class="keywordflow">if</span> (hoistable(shuffle))</div>
<div class="line"><span class="lineno">  192</span>      {</div>
<div class="line"><span class="lineno">  193</span>        <span class="keyword">auto</span> from = shuffle-&gt;from();</div>
<div class="line"><span class="lineno">  194</span>        <span class="keyword">auto</span> into = shuffle-&gt;into();</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>        into-&gt;replaceAllDepsWith(from);</div>
<div class="line"><span class="lineno">  197</span>      }</div>
<div class="line"><span class="lineno">  198</span>    }</div>
<div class="line"><span class="lineno">  199</span>  }</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>  <span class="comment">//</span></div>
<div class="line"><span class="lineno">  202</span>  <span class="comment">// Case 2</span></div>
<div class="line"><span class="lineno">  203</span>  <span class="comment">//</span></div>
<div class="line"><span class="lineno">  204</span>  <span class="keywordflow">for</span> (uint32_t n = 0; n &lt; <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;bag()-&gt;<a class="code hl_function" href="namespaceloco.html#a4d01930bc9d64546f93776723542b22d">size</a>(); ++n)</div>
<div class="line"><span class="lineno">  205</span>  {</div>
<div class="line"><span class="lineno">  206</span>    <span class="keyword">auto</span> bag = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;bag()-&gt;at(n);</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>    std::map&lt;CodeIndex, coco::Shuffle *&gt; collected;</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> reader : <a class="code hl_function" href="namespacecoco.html#ab2cf693361d21ba0b1d02fcb4fbd0332">coco::readers</a>(bag))</div>
<div class="line"><span class="lineno">  211</span>    {</div>
<div class="line"><span class="lineno">  212</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span> ins = reader-&gt;loc())</div>
<div class="line"><span class="lineno">  213</span>      {</div>
<div class="line"><span class="lineno">  214</span>        <span class="keywordflow">if</span> (<span class="keyword">auto</span> shuffle = ins-&gt;asShuffle())</div>
<div class="line"><span class="lineno">  215</span>        {</div>
<div class="line"><span class="lineno">  216</span>          collected[code_index(shuffle)] = shuffle;</div>
<div class="line"><span class="lineno">  217</span>        }</div>
<div class="line"><span class="lineno">  218</span>      }</div>
<div class="line"><span class="lineno">  219</span>    }</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>    std::vector&lt;coco::Shuffle *&gt; sorted;</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = collected.begin(); it != collected.end(); ++it)</div>
<div class="line"><span class="lineno">  224</span>    {</div>
<div class="line"><span class="lineno">  225</span>      sorted.emplace_back(it-&gt;second);</div>
<div class="line"><span class="lineno">  226</span>    }</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordflow">for</span> (uint32_t curr = 0; curr &lt; sorted.size(); ++curr)</div>
<div class="line"><span class="lineno">  229</span>    {</div>
<div class="line"><span class="lineno">  230</span>      <span class="keyword">auto</span> <span class="keyword">const</span> curr_ins = sorted.at(curr);</div>
<div class="line"><span class="lineno">  231</span>      <span class="keyword">auto</span> <span class="keyword">const</span> curr_bag = curr_ins-&gt;into();</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>      <span class="keywordflow">if</span> (!complete(curr_ins))</div>
<div class="line"><span class="lineno">  234</span>      {</div>
<div class="line"><span class="lineno">  235</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  236</span>      }</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>      <span class="keywordflow">for</span> (uint32_t next = curr + 1; next &lt; sorted.size(); ++next)</div>
<div class="line"><span class="lineno">  239</span>      {</div>
<div class="line"><span class="lineno">  240</span>        <span class="keyword">auto</span> <span class="keyword">const</span> next_ins = sorted.at(next);</div>
<div class="line"><span class="lineno">  241</span>        <span class="keyword">auto</span> <span class="keyword">const</span> next_bag = next_ins-&gt;into();</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>        <span class="keywordflow">if</span> (!complete(next_ins))</div>
<div class="line"><span class="lineno">  244</span>        {</div>
<div class="line"><span class="lineno">  245</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  246</span>        }</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>        <span class="keywordflow">if</span> (compatible(curr_ins, next_ins))</div>
<div class="line"><span class="lineno">  249</span>        {</div>
<div class="line"><span class="lineno">  250</span>          next_bag-&gt;replaceAllDepsWith(curr_bag);</div>
<div class="line"><span class="lineno">  251</span>        }</div>
<div class="line"><span class="lineno">  252</span>      }</div>
<div class="line"><span class="lineno">  253</span>    }</div>
<div class="line"><span class="lineno">  254</span>  }</div>
<div class="line"><span class="lineno">  255</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instrs_8h_source.html#l00124">coco::Shuffle::asShuffle()</a>, <a class="el" href="_instrs_8h_source.html#l00160">coco::Shuffle::at()</a>, <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="_instrs_8h_source.html#l00131">coco::Shuffle::from()</a>, <a class="el" href="_instrs_8h_source.html#l00135">coco::Shuffle::into()</a>, <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>, <a class="el" href="_code_8h_source.html#l00037">enco::Code::module()</a>, <a class="el" href="_d_linked_list_8h_source.html#l00186">coco::DLinkedList&lt; Child, Parent &gt;::Node::parent()</a>, <a class="el" href="_bag_8cpp_source.html#l00102">coco::readers()</a>, and <a class="el" href="_bag_8cpp_source.html#l00076">coco::Bag::replaceAllDepsWith()</a>.</p>

</div>
</div>
<a id="ae66b49465b449bbcf6c0939062122730" name="ae66b49465b449bbcf6c0939062122730"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66b49465b449bbcf6c0939062122730">&#9670;&#160;</a></span>instr_sequence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="classcoco_1_1_instr.html">coco::Instr</a> * &gt; enco::instr_sequence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcoco_1_1_module.html">coco::Module</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return instructions in execution order. </p>

<p class="definition">Definition at line <a class="el" href="_i_r_utils_8cpp_source.html#l00050">50</a> of file <a class="el" href="_i_r_utils_8cpp_source.html">IRUtils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   51</span>{</div>
<div class="line"><span class="lineno">   52</span>  std::vector&lt;coco::Instr *&gt; res;</div>
<div class="line"><span class="lineno">   53</span> </div>
<div class="line"><span class="lineno">   54</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> B = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;block()-&gt;head(); B; B = B-&gt;next())</div>
<div class="line"><span class="lineno">   55</span>  {</div>
<div class="line"><span class="lineno">   56</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> I = B-&gt;instr()-&gt;head(); I; I = I-&gt;next())</div>
<div class="line"><span class="lineno">   57</span>    {</div>
<div class="line"><span class="lineno">   58</span>      res.emplace_back(I);</div>
<div class="line"><span class="lineno">   59</span>    }</div>
<div class="line"><span class="lineno">   60</span>  }</div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span>  <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">   63</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>.</p>

<p class="reference">Referenced by <a class="el" href="_identical_object_reduction_8cpp_source.html#l00025">reduce_identical_object()</a>.</p>

</div>
</div>
<a id="a0f62cafee294961f520182917510c361" name="a0f62cafee294961f520182917510c361"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f62cafee294961f520182917510c361">&#9670;&#160;</a></span>lower_avgpool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::lower_avgpool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rewrite NN API-incompatible average pooling. </p>

<p class="definition">Definition at line <a class="el" href="_avg_pool_lowering_8cpp_source.html#l00223">223</a> of file <a class="el" href="_avg_pool_lowering_8cpp_source.html">AvgPoolLowering.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  224</span>{</div>
<div class="line"><span class="lineno">  225</span>  AvgPoolRewritePass pass;</div>
<div class="line"><span class="lineno">  226</span>  pass.runOnCode(code);</div>
<div class="line"><span class="lineno">  227</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_avg_pool_lowering_8h_source.html#l00038">enco::AvgPoolLoweringPass::run()</a>.</p>

</div>
</div>
<a id="a557ffc07108fac5ea7e599e74175a6d1" name="a557ffc07108fac5ea7e599e74175a6d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a557ffc07108fac5ea7e599e74175a6d1">&#9670;&#160;</a></span>lower_concat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::lower_concat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lower eval(Concat(...)) as a sequence of shuffle instructions. </p>

<p class="definition">Definition at line <a class="el" href="_concat_lowering_8cpp_source.html#l00101">101</a> of file <a class="el" href="_concat_lowering_8cpp_source.html">ConcatLowering.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  102</span>{</div>
<div class="line"><span class="lineno">  103</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a> = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">module</a>();</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> eval : candidates(<a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>))</div>
<div class="line"><span class="lineno">  106</span>  {</div>
<div class="line"><span class="lineno">  107</span>    <span class="keyword">auto</span> concat_f = eval-&gt;op()-&gt;asConcatF();</div>
<div class="line"><span class="lineno">  108</span>    assert(concat_f != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>    <span class="keyword">auto</span> left_feature = concat_f-&gt;left()-&gt;asLoad()-&gt;object()-&gt;asFeature();</div>
<div class="line"><span class="lineno">  111</span>    assert(left_feature != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  112</span>    <span class="keyword">auto</span> left_shape = as_tensor_shape(left_feature-&gt;layout());</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    <span class="keyword">auto</span> right_feature = concat_f-&gt;right()-&gt;asLoad()-&gt;object()-&gt;asFeature();</div>
<div class="line"><span class="lineno">  115</span>    assert(right_feature != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  116</span>    <span class="keyword">auto</span> right_shape = as_tensor_shape(right_feature-&gt;layout());</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>    <span class="keyword">auto</span> out_feature = eval-&gt;out()-&gt;asFeature();</div>
<div class="line"><span class="lineno">  119</span>    assert(out_feature != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  120</span>    <span class="keyword">auto</span> out_shape = as_tensor_shape(out_feature-&gt;layout());</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    <span class="keyword">auto</span> concat_axe = as_tensor_axis(concat_f-&gt;axis());</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>    <span class="comment">// Lower: Left -&gt; Output</span></div>
<div class="line"><span class="lineno">  125</span>    {</div>
<div class="line"><span class="lineno">  126</span>      <span class="keyword">auto</span> src_feature = left_feature;</div>
<div class="line"><span class="lineno">  127</span>      <span class="keyword">auto</span> src_shape = left_shape;</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>      <span class="keyword">auto</span> ins = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;create&lt;<a class="code hl_class" href="classcoco_1_1_shuffle.html">coco::Shuffle</a>&gt;();</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>      assert(src_feature-&gt;bag() != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  132</span>      assert(out_feature-&gt;bag() != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>      ins-&gt;from(src_feature-&gt;bag());</div>
<div class="line"><span class="lineno">  135</span>      ins-&gt;into(out_feature-&gt;bag());</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>      <span class="keywordflow">for</span> (<a class="code hl_class" href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index_enumerator.html">tensor::IndexEnumerator</a> e{src_shape}; e.<a class="code hl_function" href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index_enumerator.html#a7d38413b3958e778d3471e14b71d97d1">valid</a>(); e.advance())</div>
<div class="line"><span class="lineno">  138</span>      {</div>
<div class="line"><span class="lineno">  139</span>        <a class="code hl_class" href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index.html">tensor::Index</a> src_index = e.current();</div>
<div class="line"><span class="lineno">  140</span>        <a class="code hl_class" href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index.html">tensor::Index</a> out_index = e.current();</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>        <span class="keyword">auto</span> from = as_element_index(src_feature-&gt;layout(), src_index);</div>
<div class="line"><span class="lineno">  143</span>        <span class="keyword">auto</span> into = as_element_index(out_feature-&gt;layout(), out_index);</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>        ins-&gt;insert(from, into);</div>
<div class="line"><span class="lineno">  146</span>      }</div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>      ins-&gt;insertAfter(eval);</div>
<div class="line"><span class="lineno">  149</span>    }</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>    <span class="comment">// Lower: Right -&gt; Output</span></div>
<div class="line"><span class="lineno">  152</span>    {</div>
<div class="line"><span class="lineno">  153</span>      <span class="keyword">auto</span> src_feature = right_feature;</div>
<div class="line"><span class="lineno">  154</span>      <span class="keyword">auto</span> src_shape = right_shape;</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>      <span class="keyword">auto</span> ins = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;create&lt;<a class="code hl_class" href="classcoco_1_1_shuffle.html">coco::Shuffle</a>&gt;();</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>      assert(src_feature-&gt;bag() != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  159</span>      assert(out_feature-&gt;bag() != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>      ins-&gt;from(src_feature-&gt;bag());</div>
<div class="line"><span class="lineno">  162</span>      ins-&gt;into(out_feature-&gt;bag());</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>      <span class="keywordflow">for</span> (<a class="code hl_class" href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index_enumerator.html">tensor::IndexEnumerator</a> e{src_shape}; e.<a class="code hl_function" href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index_enumerator.html#a7d38413b3958e778d3471e14b71d97d1">valid</a>(); e.advance())</div>
<div class="line"><span class="lineno">  165</span>      {</div>
<div class="line"><span class="lineno">  166</span>        <a class="code hl_class" href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index.html">tensor::Index</a> src_index = e.current();</div>
<div class="line"><span class="lineno">  167</span>        <a class="code hl_class" href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index.html">tensor::Index</a> out_index = e.current();</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>        out_index.<a class="code hl_function" href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index.html#a7ce9215b5f11496eeb3242b63415fb18">at</a>(concat_axe) = out_index.<a class="code hl_function" href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index.html#a7ce9215b5f11496eeb3242b63415fb18">at</a>(concat_axe) + left_shape.dim(concat_axe);</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>        <span class="keyword">auto</span> from = as_element_index(src_feature-&gt;layout(), src_index);</div>
<div class="line"><span class="lineno">  172</span>        <span class="keyword">auto</span> into = as_element_index(out_feature-&gt;layout(), out_index);</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>        ins-&gt;insert(from, into);</div>
<div class="line"><span class="lineno">  175</span>      }</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>      ins-&gt;insertAfter(eval);</div>
<div class="line"><span class="lineno">  178</span>    }</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>    <span class="comment">// Unlink &quot;Eval&quot; and &quot;ConcatF&quot; op tree</span></div>
<div class="line"><span class="lineno">  181</span>    eval-&gt;op(<span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>    <span class="comment">// Delete &quot;Concat&quot; op tree</span></div>
<div class="line"><span class="lineno">  184</span>    <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;op()-&gt;destroy(concat_f-&gt;left());</div>
<div class="line"><span class="lineno">  185</span>    <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;op()-&gt;destroy(concat_f-&gt;right());</div>
<div class="line"><span class="lineno">  186</span>    <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;op()-&gt;destroy(concat_f);</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>    <span class="comment">// Deatch &quot;Eval&quot; instruction from the block</span></div>
<div class="line"><span class="lineno">  189</span>    eval-&gt;detach();</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>    <span class="comment">// Delete &quot;Eval&quot; instruction</span></div>
<div class="line"><span class="lineno">  192</span>    <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;destroy(eval);</div>
<div class="line"><span class="lineno">  193</span>  }</div>
<div class="line"><span class="lineno">  194</span>}</div>
<div class="ttc" id="aclassnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index_enumerator_html"><div class="ttname"><a href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index_enumerator.html">nncc::core::ADT::tensor::IndexEnumerator</a></div><div class="ttdef"><b>Definition:</b> <a href="compiler_2angkor_2include_2nncc_2core_2_a_d_t_2tensor_2_index_enumerator_8h_source.html#l00032">IndexEnumerator.h:33</a></div></div>
<div class="ttc" id="aclassnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index_enumerator_html_a7d38413b3958e778d3471e14b71d97d1"><div class="ttname"><a href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index_enumerator.html#a7d38413b3958e778d3471e14b71d97d1">nncc::core::ADT::tensor::IndexEnumerator::valid</a></div><div class="ttdeci">bool valid(void) const</div><div class="ttdef"><b>Definition:</b> <a href="compiler_2angkor_2include_2nncc_2core_2_a_d_t_2tensor_2_index_enumerator_8h_source.html#l00042">IndexEnumerator.h:42</a></div></div>
<div class="ttc" id="aclassnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index_html"><div class="ttname"><a href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index.html">nncc::core::ADT::tensor::Index</a></div><div class="ttdef"><b>Definition:</b> <a href="compiler_2angkor_2include_2nncc_2core_2_a_d_t_2tensor_2_index_8h_source.html#l00033">Index.h:34</a></div></div>
<div class="ttc" id="aclassnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index_html_a7ce9215b5f11496eeb3242b63415fb18"><div class="ttname"><a href="classnncc_1_1core_1_1_a_d_t_1_1tensor_1_1_index.html#a7ce9215b5f11496eeb3242b63415fb18">nncc::core::ADT::tensor::Index::at</a></div><div class="ttdeci">uint32_t &amp; at(uint32_t axis)</div><div class="ttdef"><b>Definition:</b> <a href="angkor_2src_2_a_d_t_2tensor_2_index_8cpp_source.html#l00049">Index.cpp:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="angkor_2src_2_a_d_t_2tensor_2_index_8cpp_source.html#l00049">nncc::core::ADT::tensor::Index::at()</a>, <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>, <a class="el" href="_code_8h_source.html#l00037">enco::Code::module()</a>, and <a class="el" href="compiler_2angkor_2include_2nncc_2core_2_a_d_t_2tensor_2_index_enumerator_8h_source.html#l00042">nncc::core::ADT::tensor::IndexEnumerator::valid()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_concat_lowering_8h_source.html#l00038">enco::ConcatLoweringPass::run()</a>.</p>

</div>
</div>
<a id="a9096629d7162d7dac7730c489ab5e29a" name="a9096629d7162d7dac7730c489ab5e29a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9096629d7162d7dac7730c489ab5e29a">&#9670;&#160;</a></span>lower_copy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::lower_copy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lower copy(...) instruction into shuffle(...) </p>

<p class="definition">Definition at line <a class="el" href="_copy_lowering_8cpp_source.html#l00028">28</a> of file <a class="el" href="_copy_lowering_8cpp_source.html">CopyLowering.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   29</span>{</div>
<div class="line"><span class="lineno">   30</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a> = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">module</a>();</div>
<div class="line"><span class="lineno">   31</span> </div>
<div class="line"><span class="lineno">   32</span>  std::set&lt;coco::Copy *&gt; lowered_copies;</div>
<div class="line"><span class="lineno">   33</span> </div>
<div class="line"><span class="lineno">   34</span>  <span class="keywordflow">for</span> (uint32_t n = 0; n &lt; <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;size(); ++n)</div>
<div class="line"><span class="lineno">   35</span>  {</div>
<div class="line"><span class="lineno">   36</span>    <span class="keyword">auto</span> ins = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;at(n);</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>    assert(ins != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>    <span class="keywordflow">if</span> (ins-&gt;parent() == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno">   41</span>    {</div>
<div class="line"><span class="lineno">   42</span>      <span class="comment">// Skip if instruction does not belong to a list</span></div>
<div class="line"><span class="lineno">   43</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   44</span>    }</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>    <span class="keyword">auto</span> copy = ins-&gt;asCopy();</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span>    <span class="keywordflow">if</span> (copy == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno">   49</span>    {</div>
<div class="line"><span class="lineno">   50</span>      <span class="comment">// Skip if instruction is not a copy</span></div>
<div class="line"><span class="lineno">   51</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   52</span>    }</div>
<div class="line"><span class="lineno">   53</span> </div>
<div class="line"><span class="lineno">   54</span>    <span class="comment">// TODO Support non-Feature objects</span></div>
<div class="line"><span class="lineno">   55</span>    <span class="keyword">auto</span> ifm = copy-&gt;from()-&gt;asFeature();</div>
<div class="line"><span class="lineno">   56</span>    <span class="keyword">auto</span> ofm = copy-&gt;into()-&gt;asFeature();</div>
<div class="line"><span class="lineno">   57</span> </div>
<div class="line"><span class="lineno">   58</span>    <span class="keywordflow">if</span> ((ifm == <span class="keyword">nullptr</span>) || (ofm == <span class="keyword">nullptr</span>))</div>
<div class="line"><span class="lineno">   59</span>    {</div>
<div class="line"><span class="lineno">   60</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   61</span>    }</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>    assert(ifm-&gt;layout()-&gt;batch() == ofm-&gt;layout()-&gt;batch());</div>
<div class="line"><span class="lineno">   64</span>    assert(ifm-&gt;layout()-&gt;shape() == ofm-&gt;layout()-&gt;shape());</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>    <span class="keyword">auto</span> shuffle = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;create&lt;<a class="code hl_class" href="classcoco_1_1_shuffle.html">coco::Shuffle</a>&gt;();</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>    shuffle-&gt;<a class="code hl_function" href="classcoco_1_1_shuffle.html#a038f3c6c4c1f619a37164ff5517ea08c">from</a>(ifm-&gt;bag());</div>
<div class="line"><span class="lineno">   69</span>    shuffle-&gt;into(ofm-&gt;bag());</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>    <span class="keyword">const</span> uint32_t B = ifm-&gt;layout()-&gt;batch();</div>
<div class="line"><span class="lineno">   72</span>    <span class="keyword">const</span> uint32_t C = ifm-&gt;layout()-&gt;shape().depth();</div>
<div class="line"><span class="lineno">   73</span>    <span class="keyword">const</span> uint32_t H = ifm-&gt;layout()-&gt;shape().height();</div>
<div class="line"><span class="lineno">   74</span>    <span class="keyword">const</span> uint32_t W = ifm-&gt;layout()-&gt;shape().width();</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordflow">for</span> (uint32_t b = 0; <a class="code hl_variable" href="namespacejpeg2hdf5.html#a1a0fe2ec4c2bc8757bcf4f0fcd4f74c1">b</a> &lt; B; ++<a class="code hl_variable" href="namespacejpeg2hdf5.html#a1a0fe2ec4c2bc8757bcf4f0fcd4f74c1">b</a>)</div>
<div class="line"><span class="lineno">   77</span>    {</div>
<div class="line"><span class="lineno">   78</span>      <span class="keywordflow">for</span> (uint32_t ch = 0; ch &lt; C; ++ch)</div>
<div class="line"><span class="lineno">   79</span>      {</div>
<div class="line"><span class="lineno">   80</span>        <span class="keywordflow">for</span> (uint32_t row = 0; row &lt; H; ++row)</div>
<div class="line"><span class="lineno">   81</span>        {</div>
<div class="line"><span class="lineno">   82</span>          <span class="keywordflow">for</span> (uint32_t col = 0; col &lt; W; ++col)</div>
<div class="line"><span class="lineno">   83</span>          {</div>
<div class="line"><span class="lineno">   84</span>            <span class="keyword">const</span> <span class="keyword">auto</span> from = ifm-&gt;layout()-&gt;at(b, ch, row, col);</div>
<div class="line"><span class="lineno">   85</span>            <span class="keyword">const</span> <span class="keyword">auto</span> into = ofm-&gt;layout()-&gt;at(b, ch, row, col);</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>            shuffle-&gt;insert(from, into);</div>
<div class="line"><span class="lineno">   88</span>          }</div>
<div class="line"><span class="lineno">   89</span>        }</div>
<div class="line"><span class="lineno">   90</span>      }</div>
<div class="line"><span class="lineno">   91</span>    }</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>    shuffle-&gt;insertBefore(copy);</div>
<div class="line"><span class="lineno">   94</span>    lowered_copies.insert(copy);</div>
<div class="line"><span class="lineno">   95</span>  }</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span>  <span class="comment">// Destroy lowered copy</span></div>
<div class="line"><span class="lineno">   98</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;copy : lowered_copies)</div>
<div class="line"><span class="lineno">   99</span>  {</div>
<div class="line"><span class="lineno">  100</span>    copy-&gt;detach();</div>
<div class="line"><span class="lineno">  101</span>    <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;destroy(copy);</div>
<div class="line"><span class="lineno">  102</span>  }</div>
<div class="line"><span class="lineno">  103</span>}</div>
<div class="ttc" id="anamespacejpeg2hdf5_html_a1a0fe2ec4c2bc8757bcf4f0fcd4f74c1"><div class="ttname"><a href="namespacejpeg2hdf5.html#a1a0fe2ec4c2bc8757bcf4f0fcd4f74c1">jpeg2hdf5.b</a></div><div class="ttdeci">b</div><div class="ttdef"><b>Definition:</b> <a href="jpeg2hdf5_8py_source.html#l00105">jpeg2hdf5.py:105</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="_instrs_8h_source.html#l00131">coco::Shuffle::from()</a>, <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>, and <a class="el" href="_code_8h_source.html#l00037">enco::Code::module()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_copy_lowering_8h_source.html#l00038">enco::CopyLoweringPass::run()</a>.</p>

</div>
</div>
<a id="aefd397d582b84e2ef95c0f755531d502" name="aefd397d582b84e2ef95c0f755531d502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefd397d582b84e2ef95c0f755531d502">&#9670;&#160;</a></span>make_session()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a> enco::make_session </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcoco_1_1_module.html">coco::Module</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcoco_1_1_data.html">coco::Data</a> *&#160;</td>
          <td class="paramname"><em>d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00036">36</a> of file <a class="el" href="enco_2core_2src_2_session_8cpp_source.html">Session.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   37</span>{</div>
<div class="line"><span class="lineno">   38</span>  <span class="keyword">static</span> uint32_t sess = 0;</div>
<div class="line"><span class="lineno">   39</span>  <a class="code hl_typedef" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a> curr{sess++};</div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>  sess_to_code[curr] = make_unique&lt;Code&gt;(<a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>, d);</div>
<div class="line"><span class="lineno">   42</span>  module_to_sess[<a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>] = curr;</div>
<div class="line"><span class="lineno">   43</span>  data_to_sess[d] = curr;</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>  <span class="keywordflow">return</span> curr;</div>
<div class="line"><span class="lineno">   46</span>}</div>
<div class="ttc" id="anamespaceenco_html_a846843be0066d3f26c1c218b3f46315f"><div class="ttname"><a href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">enco::SessionID</a></div><div class="ttdeci">uint32_t SessionID</div><div class="ttdef"><b>Definition:</b> <a href="compiler_2enco_2core_2src_2_session_8h_source.html#l00026">Session.h:26</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>.</p>

</div>
</div>
<a id="ae4807d2384277227645837acf9c92a01" name="ae4807d2384277227645837acf9c92a01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4807d2384277227645837acf9c92a01">&#9670;&#160;</a></span>module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcoco_1_1_module.html">coco::Module</a> * enco::module </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a> &amp;&#160;</td>
          <td class="paramname"><em>sess</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00051">51</a> of file <a class="el" href="enco_2core_2src_2_session_8cpp_source.html">Session.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   51</span>{ <span class="keywordflow">return</span> sess_to_code.at(sess)-&gt;module(); }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_i_r_validator_8cpp_source.html#l00051">validate_output_shape()</a>.</p>

</div>
</div>
<a id="ab5e79df2f445286b1b0624cd1ba6026a" name="ab5e79df2f445286b1b0624cd1ba6026a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5e79df2f445286b1b0624cd1ba6026a">&#9670;&#160;</a></span>output_shape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcoco_1_1_feature_shape.html">coco::FeatureShape</a> enco::output_shape </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcoco_1_1_conv2_d.html">coco::Conv2D</a> *&#160;</td>
          <td class="paramname"><em>conv2D</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_i_r_validator_8cpp_source.html#l00024">24</a> of file <a class="el" href="_i_r_validator_8cpp_source.html">IRValidator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   25</span>{</div>
<div class="line"><span class="lineno">   26</span>  <span class="keyword">auto</span> load = conv2D-&gt;<a class="code hl_function" href="classcoco_1_1_conv2_d.html#ade87fe47355fbf8d362dc08e64c5e848">arg</a>()-&gt;asLoad();</div>
<div class="line"><span class="lineno">   27</span>  assert(load);</div>
<div class="line"><span class="lineno">   28</span> </div>
<div class="line"><span class="lineno">   29</span>  <span class="keyword">auto</span> ifm = load-&gt;object()-&gt;asFeature();</div>
<div class="line"><span class="lineno">   30</span>  assert(ifm);</div>
<div class="line"><span class="lineno">   31</span> </div>
<div class="line"><span class="lineno">   32</span>  <span class="keyword">auto</span> ker = conv2D-&gt;<a class="code hl_function" href="classcoco_1_1_conv2_d.html#acd4f65712d78a76015906ddac257c8e8">ker</a>();</div>
<div class="line"><span class="lineno">   33</span>  <span class="keyword">auto</span> stride = conv2D-&gt;<a class="code hl_function" href="classcoco_1_1_conv2_d.html#ad3357c642ad65fc1294184e75f7c8a01">stride</a>();</div>
<div class="line"><span class="lineno">   34</span>  <span class="keyword">auto</span> pad = conv2D-&gt;<a class="code hl_function" href="classcoco_1_1_conv2_d.html#a6683fb08b7e5f7cd3d4fa2c0177f95e8">pad</a>();</div>
<div class="line"><span class="lineno">   35</span> </div>
<div class="line"><span class="lineno">   36</span>  <span class="keyword">auto</span> striding_width = ifm-&gt;shape().width() + pad-&gt;<a class="code hl_function" href="classcoco_1_1_padding2_d.html#a15daab9d755d048ce4c71f7ba80ec1c8">left</a>() + pad-&gt;right() - ker-&gt;shape().width();</div>
<div class="line"><span class="lineno">   37</span>  <span class="keyword">auto</span> striding_height = ifm-&gt;shape().height() + pad-&gt;top() + pad-&gt;bottom() - ker-&gt;shape().height();</div>
<div class="line"><span class="lineno">   38</span> </div>
<div class="line"><span class="lineno">   39</span>  <span class="comment">// Normally the formula is round(striding_width)/stride-&gt;horizontal.</span></div>
<div class="line"><span class="lineno">   40</span>  <span class="comment">// in coco IR, striding_width should be a multiple of stride-&gt;horizontal(), so round(...) was</span></div>
<div class="line"><span class="lineno">   41</span>  <span class="comment">// removed. So does striding_height.</span></div>
<div class="line"><span class="lineno">   42</span>  assert(striding_width % stride-&gt;horizontal() == 0);</div>
<div class="line"><span class="lineno">   43</span>  assert(striding_height % stride-&gt;vertical() == 0);</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>  <span class="keyword">auto</span> ofm_width = striding_width / stride-&gt;horizontal() + 1;</div>
<div class="line"><span class="lineno">   46</span>  <span class="keyword">auto</span> ofm_height = striding_height / stride-&gt;vertical() + 1;</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span>  <span class="keywordflow">return</span> <a class="code hl_class" href="classcoco_1_1_feature_shape.html">coco::FeatureShape</a>(ifm-&gt;shape().batch(), ker-&gt;shape().count(), ofm_height, ofm_width);</div>
<div class="line"><span class="lineno">   49</span>}</div>
<div class="ttc" id="aclasscoco_1_1_conv2_d_html_a6683fb08b7e5f7cd3d4fa2c0177f95e8"><div class="ttname"><a href="classcoco_1_1_conv2_d.html#a6683fb08b7e5f7cd3d4fa2c0177f95e8">coco::Conv2D::pad</a></div><div class="ttdeci">Padding2D * pad(void)</div><div class="ttdef"><b>Definition:</b> <a href="_ops_8h_source.html#l00120">Ops.h:120</a></div></div>
<div class="ttc" id="aclasscoco_1_1_conv2_d_html_acd4f65712d78a76015906ddac257c8e8"><div class="ttname"><a href="classcoco_1_1_conv2_d.html#acd4f65712d78a76015906ddac257c8e8">coco::Conv2D::ker</a></div><div class="ttdeci">KernelObject * ker(void) const</div><div class="ttdef"><b>Definition:</b> <a href="compiler_2coco_2core_2src_2_i_r_2_conv2_d_8cpp_source.html#l00064">Conv2D.cpp:64</a></div></div>
<div class="ttc" id="aclasscoco_1_1_conv2_d_html_ad3357c642ad65fc1294184e75f7c8a01"><div class="ttname"><a href="classcoco_1_1_conv2_d.html#ad3357c642ad65fc1294184e75f7c8a01">coco::Conv2D::stride</a></div><div class="ttdeci">Stride2D * stride(void)</div><div class="ttdef"><b>Definition:</b> <a href="_ops_8h_source.html#l00124">Ops.h:124</a></div></div>
<div class="ttc" id="aclasscoco_1_1_conv2_d_html_ade87fe47355fbf8d362dc08e64c5e848"><div class="ttname"><a href="classcoco_1_1_conv2_d.html#ade87fe47355fbf8d362dc08e64c5e848">coco::Conv2D::arg</a></div><div class="ttdeci">Op * arg(uint32_t n) const final</div><div class="ttdoc">Return N-th argument.</div></div>
<div class="ttc" id="aclasscoco_1_1_feature_shape_html"><div class="ttname"><a href="classcoco_1_1_feature_shape.html">coco::FeatureShape</a></div><div class="ttdoc">The shape of a feature map.</div><div class="ttdef"><b>Definition:</b> <a href="coco_2core_2include_2coco_2_i_r_2_feature_shape_8h_source.html#l00030">FeatureShape.h:31</a></div></div>
<div class="ttc" id="aclasscoco_1_1_padding2_d_html_a15daab9d755d048ce4c71f7ba80ec1c8"><div class="ttname"><a href="classcoco_1_1_padding2_d.html#a15daab9d755d048ce4c71f7ba80ec1c8">coco::Padding2D::left</a></div><div class="ttdeci">uint32_t left(void) const</div><div class="ttdef"><b>Definition:</b> <a href="coco_2core_2include_2coco_2_i_r_2_padding2_d_8h_source.html#l00049">Padding2D.h:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classcoco_1_1_conv2_d.html#ade87fe47355fbf8d362dc08e64c5e848">coco::Conv2D::arg()</a>, <a class="el" href="compiler_2coco_2core_2src_2_i_r_2_conv2_d_8cpp_source.html#l00064">coco::Conv2D::ker()</a>, <a class="el" href="coco_2core_2include_2coco_2_i_r_2_padding2_d_8h_source.html#l00049">coco::Padding2D::left()</a>, <a class="el" href="_ops_8h_source.html#l00120">coco::Conv2D::pad()</a>, and <a class="el" href="_ops_8h_source.html#l00124">coco::Conv2D::stride()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_i_r_validator_8cpp_source.html#l00051">validate_output_shape()</a>.</p>

</div>
</div>
<a id="a0f847509e0324ff458c26b4d5e840399" name="a0f847509e0324ff458c26b4d5e840399"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f847509e0324ff458c26b4d5e840399">&#9670;&#160;</a></span>readers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; <a class="el" href="classcoco_1_1_block.html">coco::Block</a> * &gt; enco::readers </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcoco_1_1_bag.html">coco::Bag</a> *&#160;</td>
          <td class="paramname"><em>bag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the set of blocks that reads a given bag. </p>

<p class="definition">Definition at line <a class="el" href="_usage_8cpp_source.html#l00022">22</a> of file <a class="el" href="_usage_8cpp_source.html">Usage.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   23</span>{</div>
<div class="line"><span class="lineno">   24</span>  std::set&lt;coco::Block *&gt; res;</div>
<div class="line"><span class="lineno">   25</span> </div>
<div class="line"><span class="lineno">   26</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> read : <a class="code hl_function" href="namespacecoco.html#ab2cf693361d21ba0b1d02fcb4fbd0332">coco::readers</a>(bag))</div>
<div class="line"><span class="lineno">   27</span>  {</div>
<div class="line"><span class="lineno">   28</span>    assert(read != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   29</span>    <span class="keyword">auto</span> instr = read-&gt;loc();</div>
<div class="line"><span class="lineno">   30</span>    assert(instr != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   31</span>    <span class="keyword">auto</span> block = instr-&gt;parent();</div>
<div class="line"><span class="lineno">   32</span>    assert(block != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   33</span> </div>
<div class="line"><span class="lineno">   34</span>    res.insert(block);</div>
<div class="line"><span class="lineno">   35</span>  }</div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span>  <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">   38</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_bag_8cpp_source.html#l00102">coco::readers()</a>.</p>

</div>
</div>
<a id="a9737bdf1cf46deb3c78dc3efae659114" name="a9737bdf1cf46deb3c78dc3efae659114"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9737bdf1cf46deb3c78dc3efae659114">&#9670;&#160;</a></span>reduce_duplicated_object()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::reduce_duplicated_object </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reduce duplicated feature objects as its dominating feature object. </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p >&zwj;BEFORE &lt;&lt;&lt; </p>
</blockquote>
</blockquote>
</blockquote>
<p>obj_0 = Feature(layout: ???) at ... obj_1 = Feature(layout: BHWC) at ... obj_2 = Feature(layout: BHWC) at ...</p>
<p >copy(from: obj_0, into: obj_1) copy(from: obj_0, into: obj_2)</p>
<p >... Use(obj_1) Use(obj_2) ...</p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p >&zwj;AFTER &lt;&lt;&lt; </p>
</blockquote>
</blockquote>
</blockquote>
<p>obj_0 = Feature(layout: ???) at ... obj_1 = Feature(layout: BHWC) at ... obj_2 = Feature(layout: BHWC) at ...</p>
<p >copy(from: obj_0, into: obj_1) copy(from: obj_0, into: obj_2)</p>
<p >... Use(obj_1) Use(obj_1) &lt;&ndash; CHANGED ...</p>
<p >NOTE Given a set of feature objects, a feature object referred to as a dominating feature object if its producer proceeds the producer of every feature object in the given set </p>

<p class="definition">Definition at line <a class="el" href="_duplicated_object_reduction_8cpp_source.html#l00081">81</a> of file <a class="el" href="_duplicated_object_reduction_8cpp_source.html">DuplicatedObjectReduction.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   82</span>{</div>
<div class="line"><span class="lineno">   83</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a> = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">module</a>();</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;src : features(<a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>))</div>
<div class="line"><span class="lineno">   86</span>  {</div>
<div class="line"><span class="lineno">   87</span>    <span class="keyword">auto</span> copied = candidates(src);</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">if</span> (copied.size() &lt;= 1)</div>
<div class="line"><span class="lineno">   90</span>    {</div>
<div class="line"><span class="lineno">   91</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   92</span>    }</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>    <span class="comment">// Find the dominator</span></div>
<div class="line"><span class="lineno">   95</span>    <a class="code hl_class" href="classcoco_1_1_feature_object.html">coco::FeatureObject</a> *dominator = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> candidate : copied)</div>
<div class="line"><span class="lineno">   98</span>    {</div>
<div class="line"><span class="lineno">   99</span>      <span class="keywordflow">if</span> (dominator == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno">  100</span>      {</div>
<div class="line"><span class="lineno">  101</span>        dominator = candidate;</div>
<div class="line"><span class="lineno">  102</span>      }</div>
<div class="line"><span class="lineno">  103</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (code_index(<a class="code hl_function" href="namespacecoco.html#a54e6ea819f6bdd415a5f11e836362b61">coco::producer</a>(candidate)) &lt; code_index(<a class="code hl_function" href="namespacecoco.html#a54e6ea819f6bdd415a5f11e836362b61">coco::producer</a>(dominator)))</div>
<div class="line"><span class="lineno">  104</span>      {</div>
<div class="line"><span class="lineno">  105</span>        dominator = candidate;</div>
<div class="line"><span class="lineno">  106</span>      }</div>
<div class="line"><span class="lineno">  107</span>    }</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>    <span class="comment">// Replace all the occurunce of dominated objects with its dominator</span></div>
<div class="line"><span class="lineno">  110</span>    copied.erase(dominator);</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> dominatee : copied)</div>
<div class="line"><span class="lineno">  113</span>    {</div>
<div class="line"><span class="lineno">  114</span>      <a class="code hl_function" href="namespaceenco.html#a577bf7d7b1d4373230201000570e3b13">subst</a>(dominatee, dominator);</div>
<div class="line"><span class="lineno">  115</span>    }</div>
<div class="line"><span class="lineno">  116</span>  }</div>
<div class="line"><span class="lineno">  117</span>}</div>
<div class="ttc" id="aclasscoco_1_1_feature_object_html"><div class="ttname"><a href="classcoco_1_1_feature_object.html">coco::FeatureObject</a></div><div class="ttdoc">FeatureMap values (used in CNN)</div><div class="ttdef"><b>Definition:</b> <a href="_feature_object_8h_source.html#l00035">FeatureObject.h:36</a></div></div>
<div class="ttc" id="anamespaceenco_html_a577bf7d7b1d4373230201000570e3b13"><div class="ttname"><a href="namespaceenco.html#a577bf7d7b1d4373230201000570e3b13">enco::subst</a></div><div class="ttdeci">void subst(coco::Object *from, coco::Object *into)</div><div class="ttdoc">Substitute all the USE occurrences of an object with another object.</div><div class="ttdef"><b>Definition:</b> <a href="_i_r_utils_8cpp_source.html#l00038">IRUtils.cpp:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>, <a class="el" href="_code_8h_source.html#l00037">enco::Code::module()</a>, <a class="el" href="_object_8cpp_source.html#l00055">coco::producer()</a>, and <a class="el" href="_i_r_utils_8cpp_source.html#l00038">subst()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_duplicated_object_reduction_8h_source.html#l00068">enco::DuplicatedObjectReductionPass::run()</a>.</p>

</div>
</div>
<a id="ad2e3c9a7350ce0fde00213ed2e8b34a9" name="ad2e3c9a7350ce0fde00213ed2e8b34a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2e3c9a7350ce0fde00213ed2e8b34a9">&#9670;&#160;</a></span>reduce_identical_object()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::reduce_identical_object </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reduce identically copied objects as its original object. </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p >&zwj;BEFORE &lt;&lt;&lt; </p>
</blockquote>
</blockquote>
</blockquote>
<p>bag_0 = Bag(size: N) bag_1 = Bag(size: N)</p>
<p >obj_0 = Feature(layout: BHWC) at bag_0 obj_1 = Feature(layout: BHWC) at bag_1</p>
<p >copy(from: obj_0, into: obj_1) ... Use(obj_0) Use(obj_1) ...</p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p >&zwj;AFTER &lt;&lt;&lt; </p>
</blockquote>
</blockquote>
</blockquote>
<p>bag_0 = Bag(size: N) bag_1 = Bag(size: N)</p>
<p >obj_0 = Feature(layout: BHWC) at bag_0 obj_1 = Feature(layout: BHWC) at bag_1</p>
<p >copy(from: obj_0, into: obj_1) ... Use(obj_0) Use(obj_0) &lt;- obj_1 is replaced ... </p>

<p class="definition">Definition at line <a class="el" href="_identical_object_reduction_8cpp_source.html#l00025">25</a> of file <a class="el" href="_identical_object_reduction_8cpp_source.html">IdenticalObjectReduction.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   26</span>{</div>
<div class="line"><span class="lineno">   27</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a> = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">module</a>();</div>
<div class="line"><span class="lineno">   28</span> </div>
<div class="line"><span class="lineno">   29</span>  std::set&lt;coco::Copy *&gt; detached;</div>
<div class="line"><span class="lineno">   30</span> </div>
<div class="line"><span class="lineno">   31</span>  <span class="comment">// Preceding optimizations may generate &quot;free&quot; instructions.</span></div>
<div class="line"><span class="lineno">   32</span>  <span class="comment">//  - i.e. an instruction not linked to a block</span></div>
<div class="line"><span class="lineno">   33</span>  <span class="comment">//</span></div>
<div class="line"><span class="lineno">   34</span>  <span class="comment">// Let&#39;s iterate over only a sequence of &quot;bounded&quot; instructions.</span></div>
<div class="line"><span class="lineno">   35</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> ins : <a class="code hl_function" href="namespaceenco.html#ae66b49465b449bbcf6c0939062122730">instr_sequence</a>(<a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>))</div>
<div class="line"><span class="lineno">   36</span>  {</div>
<div class="line"><span class="lineno">   37</span>    assert(ins != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   38</span>    assert(ins-&gt;parent() != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>    <span class="keyword">auto</span> copy = ins-&gt;asCopy();</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>    <span class="keywordflow">if</span> (copy == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno">   43</span>    {</div>
<div class="line"><span class="lineno">   44</span>      <span class="comment">// Skip if instruction is not a copy</span></div>
<div class="line"><span class="lineno">   45</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   46</span>    }</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span>    <span class="comment">// TODO Support non-Feature Objects</span></div>
<div class="line"><span class="lineno">   49</span>    <span class="keyword">auto</span> ifm = copy-&gt;from()-&gt;asFeature();</div>
<div class="line"><span class="lineno">   50</span>    <span class="keyword">auto</span> ofm = copy-&gt;into()-&gt;asFeature();</div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>    assert(ofm-&gt;bag() != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   53</span> </div>
<div class="line"><span class="lineno">   54</span>    <span class="keywordflow">if</span> (ifm-&gt;layout()-&gt;id() != ofm-&gt;layout()-&gt;id())</div>
<div class="line"><span class="lineno">   55</span>    {</div>
<div class="line"><span class="lineno">   56</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   57</span>    }</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>    <span class="keywordflow">if</span> (ifm-&gt;layout()-&gt;id() != <a class="code hl_function" href="classcoco_1_1_feature_layouts_1_1_b_h_w_c.html#ab172fe51ba69236b8aaa3955d4b53852">coco::FeatureLayouts::BHWC::uid</a>())</div>
<div class="line"><span class="lineno">   60</span>    {</div>
<div class="line"><span class="lineno">   61</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   62</span>    }</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>    <span class="comment">// Skip if this copy produces network output</span></div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">if</span> (ofm-&gt;bag()-&gt;output())</div>
<div class="line"><span class="lineno">   66</span>    {</div>
<div class="line"><span class="lineno">   67</span>      <span class="comment">// TODO Optimize this case</span></div>
<div class="line"><span class="lineno">   68</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">   69</span>      <span class="comment">// Note that the code under optimization is of the following form:</span></div>
<div class="line"><span class="lineno">   70</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">   71</span>      <span class="comment">//   %ifm &lt;- Instr(...)</span></div>
<div class="line"><span class="lineno">   72</span>      <span class="comment">//   %ofm &lt;- Copy(%ifm)</span></div>
<div class="line"><span class="lineno">   73</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">   74</span>      <span class="comment">// Let&#39;s assume that &quot;Copy&quot; is the only reader of %ifm (to be precise, its bag).</span></div>
<div class="line"><span class="lineno">   75</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">   76</span>      <span class="comment">// Then, it is possible to rewrite the above fragment as follows:</span></div>
<div class="line"><span class="lineno">   77</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">   78</span>      <span class="comment">//   %ofm &lt;- Instr(...)</span></div>
<div class="line"><span class="lineno">   79</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">   80</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   81</span>    }</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>    <span class="keywordflow">if</span> (ofm-&gt;bag()-&gt;reads()-&gt;size() &gt; 0)</div>
<div class="line"><span class="lineno">   84</span>    {</div>
<div class="line"><span class="lineno">   85</span>      <span class="comment">// Let us consider the following code:</span></div>
<div class="line"><span class="lineno">   86</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">   87</span>      <span class="comment">// Bag:</span></div>
<div class="line"><span class="lineno">   88</span>      <span class="comment">//   %bag_0 = Bag(...)</span></div>
<div class="line"><span class="lineno">   89</span>      <span class="comment">//   %bag_1 = Bag(...)</span></div>
<div class="line"><span class="lineno">   90</span>      <span class="comment">//   %bag_2 = Bag(...)</span></div>
<div class="line"><span class="lineno">   91</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">   92</span>      <span class="comment">// Object:</span></div>
<div class="line"><span class="lineno">   93</span>      <span class="comment">//   %obj_0 = FeatureObject(bag: %bag_0)</span></div>
<div class="line"><span class="lineno">   94</span>      <span class="comment">//   %obj_1 = FeatureObject(bag: %bag_1)</span></div>
<div class="line"><span class="lineno">   95</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">   96</span>      <span class="comment">// Instr:</span></div>
<div class="line"><span class="lineno">   97</span>      <span class="comment">//   copy an object from %obj_0 into %obj_1</span></div>
<div class="line"><span class="lineno">   98</span>      <span class="comment">//   shuffle values from %bag_1 into %bag_2</span></div>
<div class="line"><span class="lineno">   99</span>      <span class="comment">//   eval Conv2D with %obj_1</span></div>
<div class="line"><span class="lineno">  100</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  101</span>      <span class="comment">// Identical Object Reduction (IOR) tries to eliminate the first copy via</span></div>
<div class="line"><span class="lineno">  102</span>      <span class="comment">// substitution (substitute all the occurrence of %obj_1 as use with %obj_0).</span></div>
<div class="line"><span class="lineno">  103</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  104</span>      <span class="comment">// Here is the code transformed by IOR:</span></div>
<div class="line"><span class="lineno">  105</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  106</span>      <span class="comment">// Bag:</span></div>
<div class="line"><span class="lineno">  107</span>      <span class="comment">//   %bag_0 = Bag(...)</span></div>
<div class="line"><span class="lineno">  108</span>      <span class="comment">//   %bag_1 = Bag(...)</span></div>
<div class="line"><span class="lineno">  109</span>      <span class="comment">//   %bag_2 = Bag(...)</span></div>
<div class="line"><span class="lineno">  110</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  111</span>      <span class="comment">// Object:</span></div>
<div class="line"><span class="lineno">  112</span>      <span class="comment">//   %obj_0 = FeatureObject(bag: %bag_0)</span></div>
<div class="line"><span class="lineno">  113</span>      <span class="comment">//   %obj_1 = FeatureObject(bag: %bag_1)</span></div>
<div class="line"><span class="lineno">  114</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  115</span>      <span class="comment">// Instr:</span></div>
<div class="line"><span class="lineno">  116</span>      <span class="comment">//   shuffle values from %bag_1 into %bag_2</span></div>
<div class="line"><span class="lineno">  117</span>      <span class="comment">//   eval Conv2D with %obj_0</span></div>
<div class="line"><span class="lineno">  118</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  119</span>      <span class="comment">// Note that there is no updater of %bag_1 after IOR, and thus the behavior</span></div>
<div class="line"><span class="lineno">  120</span>      <span class="comment">// of the first shuffle instruction has changed.</span></div>
<div class="line"><span class="lineno">  121</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  122</span>      <span class="comment">// This examples shows that it is impossible to simply substitute %obj_1</span></div>
<div class="line"><span class="lineno">  123</span>      <span class="comment">// with %obj_0 in the presence of readers over its backing bag.</span></div>
<div class="line"><span class="lineno">  124</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  125</span>    }</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>    <a class="code hl_function" href="namespaceenco.html#a577bf7d7b1d4373230201000570e3b13">subst</a>(copy-&gt;into(), copy-&gt;from());</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>    copy-&gt;detach();</div>
<div class="line"><span class="lineno">  130</span>    detached.insert(copy);</div>
<div class="line"><span class="lineno">  131</span>  }</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> copy : detached)</div>
<div class="line"><span class="lineno">  134</span>  {</div>
<div class="line"><span class="lineno">  135</span>    <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;instr()-&gt;destroy(copy);</div>
<div class="line"><span class="lineno">  136</span>  }</div>
<div class="line"><span class="lineno">  137</span>}</div>
<div class="ttc" id="aclasscoco_1_1_feature_layouts_1_1_b_h_w_c_html_ab172fe51ba69236b8aaa3955d4b53852"><div class="ttname"><a href="classcoco_1_1_feature_layouts_1_1_b_h_w_c.html#ab172fe51ba69236b8aaa3955d4b53852">coco::FeatureLayouts::BHWC::uid</a></div><div class="ttdeci">static const FeatureLayout::ID * uid(void)</div><div class="ttdef"><b>Definition:</b> <a href="_feature_layouts_8cpp_source.html#l00070">FeatureLayouts.cpp:70</a></div></div>
<div class="ttc" id="anamespaceenco_html_ae66b49465b449bbcf6c0939062122730"><div class="ttname"><a href="namespaceenco.html#ae66b49465b449bbcf6c0939062122730">enco::instr_sequence</a></div><div class="ttdeci">std::vector&lt; coco::Instr * &gt; instr_sequence(coco::Module *m)</div><div class="ttdoc">Return instructions in execution order.</div><div class="ttdef"><b>Definition:</b> <a href="_i_r_utils_8cpp_source.html#l00050">IRUtils.cpp:50</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="_i_r_utils_8cpp_source.html#l00050">instr_sequence()</a>, <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>, <a class="el" href="_code_8h_source.html#l00037">enco::Code::module()</a>, <a class="el" href="_i_r_utils_8cpp_source.html#l00038">subst()</a>, and <a class="el" href="_feature_layouts_8cpp_source.html#l00070">coco::FeatureLayouts::BHWC::uid()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_identical_object_reduction_8h_source.html#l00064">enco::IdenticalObjectReductionPass::run()</a>.</p>

</div>
</div>
<a id="ab25b418d78ede9bce080ce499afb446a" name="ab25b418d78ede9bce080ce499afb446a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab25b418d78ede9bce080ce499afb446a">&#9670;&#160;</a></span>select_intrinsic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::select_intrinsic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Select Intricsic (API) to be used. </p>
<p >This pass is analogue of "Instruction Selection" pass. This "Intrisic Selection" pass will replace a general coco IR instruction into a backend-specific coco (extended) IR instruction. </p>

<p class="definition">Definition at line <a class="el" href="_intrinsic_selection_8cpp_source.html#l00077">77</a> of file <a class="el" href="_intrinsic_selection_8cpp_source.html">IntrinsicSelection.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   78</span>{</div>
<div class="line"><span class="lineno">   79</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a> = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">module</a>();</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> blk = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;block()-&gt;head(); blk; blk = blk-&gt;next())</div>
<div class="line"><span class="lineno">   82</span>  {</div>
<div class="line"><span class="lineno">   83</span>    <span class="keyword">auto</span> ins = blk-&gt;instr()-&gt;head();</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>    <span class="keywordflow">while</span> (ins)</div>
<div class="line"><span class="lineno">   86</span>    {</div>
<div class="line"><span class="lineno">   87</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span> rewritten_ins = rewrite(ins))</div>
<div class="line"><span class="lineno">   88</span>      {</div>
<div class="line"><span class="lineno">   89</span>        rewritten_ins-&gt;insertBefore(ins);</div>
<div class="line"><span class="lineno">   90</span>        ins-&gt;detach();</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>        ins = rewritten_ins;</div>
<div class="line"><span class="lineno">   93</span>      }</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>      ins = ins-&gt;next();</div>
<div class="line"><span class="lineno">   96</span>    }</div>
<div class="line"><span class="lineno">   97</span>  }</div>
<div class="line"><span class="lineno">   98</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>, and <a class="el" href="_code_8h_source.html#l00037">enco::Code::module()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_intrinsic_selection_8h_source.html#l00042">enco::IntrinsicSelectionPass::run()</a>.</p>

</div>
</div>
<a id="ab4ea7b45ac6067ad00008badfe5ea560" name="ab4ea7b45ac6067ad00008badfe5ea560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4ea7b45ac6067ad00008badfe5ea560">&#9670;&#160;</a></span>session() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a> enco::session </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcoco_1_1_data.html">coco::Data</a> *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00049">49</a> of file <a class="el" href="enco_2core_2src_2_session_8cpp_source.html">Session.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   49</span>{ <span class="keywordflow">return</span> data_to_sess.at(d); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a862eb4da6e8b0c8f2bf11c7a8df6d684" name="a862eb4da6e8b0c8f2bf11c7a8df6d684"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a862eb4da6e8b0c8f2bf11c7a8df6d684">&#9670;&#160;</a></span>session() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceenco.html#a846843be0066d3f26c1c218b3f46315f">SessionID</a> enco::session </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcoco_1_1_module.html">coco::Module</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00048">48</a> of file <a class="el" href="enco_2core_2src_2_session_8cpp_source.html">Session.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   48</span>{ <span class="keywordflow">return</span> module_to_sess.at(<a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>.</p>

</div>
</div>
<a id="abdf064233e67371d5b1f14b576b507de" name="abdf064233e67371d5b1f14b576b507de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdf064233e67371d5b1f14b576b507de">&#9670;&#160;</a></span>split_into_phases()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::split_into_phases </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Split instructions into a set of phases. </p>

<p class="definition">Definition at line <a class="el" href="compiler_2enco_2core_2src_2_transforms_2_split_8cpp_source.html#l01227">1227</a> of file <a class="el" href="compiler_2enco_2core_2src_2_transforms_2_split_8cpp_source.html">Split.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1228</span>{</div>
<div class="line"><span class="lineno"> 1229</span>  SplitPass split;</div>
<div class="line"><span class="lineno"> 1230</span>  split.runOnCode(code);</div>
<div class="line"><span class="lineno"> 1231</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>.</p>

<p class="reference">Referenced by <a class="el" href="compiler_2enco_2core_2src_2_transforms_2_split_8h_source.html#l00043">enco::PhaseConstructionPass::run()</a>.</p>

</div>
</div>
<a id="a577bf7d7b1d4373230201000570e3b13" name="a577bf7d7b1d4373230201000570e3b13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a577bf7d7b1d4373230201000570e3b13">&#9670;&#160;</a></span>subst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::subst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcoco_1_1_object.html">coco::Object</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcoco_1_1_object.html">coco::Object</a> *&#160;</td>
          <td class="paramname"><em>into</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Substitute all the USE occurrences of an object with another object. </p>
<p >Replace all the "USE" of 'from' with 'into'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">from</td><td>Object to be replaced </td></tr>
    <tr><td class="paramname">into</td><td>Object to be used instead NOTE This maybe used when something like &ndash; 'from' will be removed so we need to replace object Consumers that use 'from' to 'into' EXAMPLE { subst(child, bigone); m-&gt;entity()-&gt;object()-&gt;destroy(child); } This code will change all the Consumers that use 'child' to 'bigone' and destroy the 'child' object.</td></tr>
  </table>
  </dd>
</dl>
<p >NOTE subst(from, into) WILL NOT update 'DEF' </p>

<p class="definition">Definition at line <a class="el" href="_i_r_utils_8cpp_source.html#l00038">38</a> of file <a class="el" href="_i_r_utils_8cpp_source.html">IRUtils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   39</span>{</div>
<div class="line"><span class="lineno">   40</span>  assert(from != into);</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>  <span class="keywordflow">while</span> (!from-&gt;<a class="code hl_function" href="classcoco_1_1_object.html#a4af6039a707babcfd138c5da2ea350ea">uses</a>()-&gt;empty())</div>
<div class="line"><span class="lineno">   43</span>  {</div>
<div class="line"><span class="lineno">   44</span>    <span class="keyword">auto</span> use = *(from-&gt;<a class="code hl_function" href="classcoco_1_1_object.html#a4af6039a707babcfd138c5da2ea350ea">uses</a>()-&gt;begin());</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>    use-&gt;value(into);</div>
<div class="line"><span class="lineno">   47</span>  }</div>
<div class="line"><span class="lineno">   48</span>}</div>
<div class="ttc" id="aclasscoco_1_1_object_html_a4af6039a707babcfd138c5da2ea350ea"><div class="ttname"><a href="classcoco_1_1_object.html#a4af6039a707babcfd138c5da2ea350ea">coco::Object::uses</a></div><div class="ttdeci">const UseSet * uses(void) const</div><div class="ttdef"><b>Definition:</b> <a href="_object_8cpp_source.html#l00052">Object.cpp:52</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_object_8cpp_source.html#l00052">coco::Object::uses()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_duplicated_object_reduction_8cpp_source.html#l00081">reduce_duplicated_object()</a>, <a class="el" href="_identical_object_reduction_8cpp_source.html#l00025">reduce_identical_object()</a>, and <a class="el" href="_feature_unification_8cpp_source.html#l00151">unify_feature()</a>.</p>

</div>
</div>
<a id="a03d7d5a8f802ca59ce16f241fed0a7e3" name="a03d7d5a8f802ca59ce16f241fed0a7e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03d7d5a8f802ca59ce16f241fed0a7e3">&#9670;&#160;</a></span>unify_feature()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enco::unify_feature </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">enco::Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove duplicated feature objects inside each bag. </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p >&zwj;BEFORE &lt;&lt;&lt; </p>
</blockquote>
</blockquote>
</blockquote>
<p>b = Bag(...)</p>
<p >feature_0 = Feature(...) at b feature_1 = Feature(...) at b</p>
<p >... Use(feature_0) ... Use(feature_1) ...</p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p >&zwj;AFTER &lt;&lt;&lt; </p>
</blockquote>
</blockquote>
</blockquote>
<p>b = Bag(...)</p>
<p >feature_0 = Feature(...) at b <strike>feature_1 = Feature(...) at b</strike> &lt;- REMOVED</p>
<p >... Use(feature_0) ... Use(feature_0) ...</p>
<p >Note that all the occurrences of "%feature_1" are replaced with "%feature_0" </p>

<p class="definition">Definition at line <a class="el" href="_feature_unification_8cpp_source.html#l00151">151</a> of file <a class="el" href="_feature_unification_8cpp_source.html">FeatureUnification.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  152</span>{</div>
<div class="line"><span class="lineno">  153</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a> = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">module</a>();</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>  <span class="keywordflow">for</span> (uint32_t n = 0; n &lt; <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;bag()-&gt;size(); ++n)</div>
<div class="line"><span class="lineno">  156</span>  {</div>
<div class="line"><span class="lineno">  157</span>    std::vector&lt;std::unique_ptr&lt;FeatureGroup&gt;&gt; groups;</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>    <span class="keyword">auto</span> assign_group = [&amp;](<a class="code hl_class" href="classcoco_1_1_feature_object.html">coco::FeatureObject</a> *feature) {</div>
<div class="line"><span class="lineno">  160</span>      <span class="comment">// Find a compatible FeatureGroup</span></div>
<div class="line"><span class="lineno">  161</span>      FeatureGroup *group = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;g : groups)</div>
<div class="line"><span class="lineno">  164</span>      {</div>
<div class="line"><span class="lineno">  165</span>        FeatureGroup *candidate = g.get();</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>        <span class="keywordflow">if</span> (!compatible(candidate-&gt;parent(), feature))</div>
<div class="line"><span class="lineno">  168</span>        {</div>
<div class="line"><span class="lineno">  169</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  170</span>        }</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>        group = candidate;</div>
<div class="line"><span class="lineno">  173</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  174</span>      }</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>      <span class="keywordflow">if</span> (group == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno">  177</span>      {</div>
<div class="line"><span class="lineno">  178</span>        <span class="comment">// Insert FeatureObject into a new FeatureGroup</span></div>
<div class="line"><span class="lineno">  179</span>        groups.emplace_back(make_unique&lt;FeatureGroup&gt;(feature));</div>
<div class="line"><span class="lineno">  180</span>      }</div>
<div class="line"><span class="lineno">  181</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  182</span>      {</div>
<div class="line"><span class="lineno">  183</span>        <span class="comment">// Insert FeatureObject into the compatible FeatureGroup</span></div>
<div class="line"><span class="lineno">  184</span>        <a class="code hl_variable" href="namespace_gen_h5_random_inputs.html#a4261d1713284ff94edd1a7bfb3ef3547">group</a>-&gt;insert(feature);</div>
<div class="line"><span class="lineno">  185</span>      }</div>
<div class="line"><span class="lineno">  186</span>    };</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>    <span class="keyword">auto</span> bag = <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;bag()-&gt;at(n);</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> o : <a class="code hl_function" href="namespacecoco.html#a61ac73d9e2aa4735a924a141cd2c03d3">coco::dependent_objects</a>(bag))</div>
<div class="line"><span class="lineno">  191</span>    {</div>
<div class="line"><span class="lineno">  192</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span> feature = o-&gt;asFeature())</div>
<div class="line"><span class="lineno">  193</span>      {</div>
<div class="line"><span class="lineno">  194</span>        <span class="keywordflow">if</span> (candidate(feature))</div>
<div class="line"><span class="lineno">  195</span>        {</div>
<div class="line"><span class="lineno">  196</span>          assign_group(feature);</div>
<div class="line"><span class="lineno">  197</span>        }</div>
<div class="line"><span class="lineno">  198</span>      }</div>
<div class="line"><span class="lineno">  199</span>    }</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;g : groups)</div>
<div class="line"><span class="lineno">  202</span>    {</div>
<div class="line"><span class="lineno">  203</span>      <span class="keyword">auto</span> <a class="code hl_variable" href="namespace_gen_h5_random_inputs.html#a4261d1713284ff94edd1a7bfb3ef3547">group</a> = <a class="code hl_variable" href="namespace_gen_h5_random_inputs.html#a7210f017c15aa9fb47b012adefcf31dd">g</a>.get();</div>
<div class="line"><span class="lineno">  204</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> child : <a class="code hl_variable" href="namespace_gen_h5_random_inputs.html#a4261d1713284ff94edd1a7bfb3ef3547">group</a>-&gt;children())</div>
<div class="line"><span class="lineno">  205</span>      {</div>
<div class="line"><span class="lineno">  206</span>        <a class="code hl_function" href="namespaceenco.html#a577bf7d7b1d4373230201000570e3b13">subst</a>(child, <a class="code hl_variable" href="namespace_gen_h5_random_inputs.html#a4261d1713284ff94edd1a7bfb3ef3547">group</a>-&gt;parent());</div>
<div class="line"><span class="lineno">  207</span>        assert(child-&gt;def() == <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  208</span>        assert(child-&gt;uses()-&gt;size() == 0);</div>
<div class="line"><span class="lineno">  209</span>        <a class="code hl_variable" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp.html#aa73e018b04368e7afaded77ef0ac69db">m</a>-&gt;entity()-&gt;object()-&gt;destroy(child);</div>
<div class="line"><span class="lineno">  210</span>      }</div>
<div class="line"><span class="lineno">  211</span>    }</div>
<div class="line"><span class="lineno">  212</span>  }</div>
<div class="line"><span class="lineno">  213</span>}</div>
<div class="ttc" id="anamespace_gen_h5_random_inputs_html_a4261d1713284ff94edd1a7bfb3ef3547"><div class="ttname"><a href="namespace_gen_h5_random_inputs.html#a4261d1713284ff94edd1a7bfb3ef3547">GenH5RandomInputs.group</a></div><div class="ttdeci">group</div><div class="ttdef"><b>Definition:</b> <a href="_gen_h5_random_inputs_8py_source.html#l00053">GenH5RandomInputs.py:53</a></div></div>
<div class="ttc" id="anamespace_gen_h5_random_inputs_html_a7210f017c15aa9fb47b012adefcf31dd"><div class="ttname"><a href="namespace_gen_h5_random_inputs.html#a7210f017c15aa9fb47b012adefcf31dd">GenH5RandomInputs.g</a></div><div class="ttdeci">g</div><div class="ttdef"><b>Definition:</b> <a href="_gen_h5_random_inputs_8py_source.html#l00062">GenH5RandomInputs.py:62</a></div></div>
<div class="ttc" id="anamespacecoco_html_a61ac73d9e2aa4735a924a141cd2c03d3"><div class="ttname"><a href="namespacecoco.html#a61ac73d9e2aa4735a924a141cd2c03d3">coco::dependent_objects</a></div><div class="ttdeci">ObjectSet dependent_objects(const Bag *)</div><div class="ttdoc">Return a set of objects that depends on a given bag.</div><div class="ttdef"><b>Definition:</b> <a href="_bag_8cpp_source.html#l00087">Bag.cpp:87</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_feature_object_8h_source.html#l00047">coco::FeatureObject::asFeature()</a>, <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="_bag_8cpp_source.html#l00087">coco::dependent_objects()</a>, <a class="el" href="_n_e_g_e_m_m_matrix_accumulate_biases_kernel_8cpp_source.html#l00135">m</a>, <a class="el" href="_code_8h_source.html#l00037">enco::Code::module()</a>, and <a class="el" href="_i_r_utils_8cpp_source.html#l00038">subst()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_feature_unification_8h_source.html#l00063">enco::FeatureUnificationPass::run()</a>.</p>

</div>
</div>
<a id="ac986b450ed8a39d5721a646501b09d46" name="ac986b450ed8a39d5721a646501b09d46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac986b450ed8a39d5721a646501b09d46">&#9670;&#160;</a></span>updaters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; <a class="el" href="classcoco_1_1_block.html">coco::Block</a> * &gt; enco::updaters </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcoco_1_1_bag.html">coco::Bag</a> *&#160;</td>
          <td class="paramname"><em>bag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the set of blocks that updates a given bag. </p>

<p class="definition">Definition at line <a class="el" href="_usage_8cpp_source.html#l00040">40</a> of file <a class="el" href="_usage_8cpp_source.html">Usage.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   41</span>{</div>
<div class="line"><span class="lineno">   42</span>  std::set&lt;coco::Block *&gt; res;</div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> update : <a class="code hl_function" href="namespacecoco.html#a3a41e99ef1a6fd7f98187d240886b8a8">coco::updaters</a>(bag))</div>
<div class="line"><span class="lineno">   45</span>  {</div>
<div class="line"><span class="lineno">   46</span>    assert(update != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   47</span>    <span class="keyword">auto</span> instr = update-&gt;loc();</div>
<div class="line"><span class="lineno">   48</span>    assert(instr != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   49</span>    <span class="keyword">auto</span> block = instr-&gt;parent();</div>
<div class="line"><span class="lineno">   50</span>    assert(block != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>    res.insert(block);</div>
<div class="line"><span class="lineno">   53</span>  }</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>  <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">   56</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_bag_8cpp_source.html#l00125">coco::updaters()</a>.</p>

</div>
</div>
<a id="af0e745d9916ba307aaa323a54f10c92d" name="af0e745d9916ba307aaa323a54f10c92d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0e745d9916ba307aaa323a54f10c92d">&#9670;&#160;</a></span>validate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool enco::validate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_i_r_validator_8cpp_source.html#l00083">83</a> of file <a class="el" href="_i_r_validator_8cpp_source.html">IRValidator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   83</span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="namespaceenco.html#abe6f08bb68e612fcf8efcb5aa1c080a9">validate_output_shape</a>(code); }</div>
<div class="ttc" id="anamespaceenco_html_abe6f08bb68e612fcf8efcb5aa1c080a9"><div class="ttname"><a href="namespaceenco.html#abe6f08bb68e612fcf8efcb5aa1c080a9">enco::validate_output_shape</a></div><div class="ttdeci">bool validate_output_shape(Code *code)</div><div class="ttdef"><b>Definition:</b> <a href="_i_r_validator_8cpp_source.html#l00051">IRValidator.cpp:51</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="_i_r_validator_8cpp_source.html#l00083">validate()</a>, and <a class="el" href="_i_r_validator_8cpp_source.html#l00051">validate_output_shape()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_i_r_validator_8cpp_source.html#l00083">validate()</a>.</p>

</div>
</div>
<a id="abe6f08bb68e612fcf8efcb5aa1c080a9" name="abe6f08bb68e612fcf8efcb5aa1c080a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe6f08bb68e612fcf8efcb5aa1c080a9">&#9670;&#160;</a></span>validate_output_shape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool enco::validate_output_shape </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structenco_1_1_code.html">Code</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_i_r_validator_8cpp_source.html#l00051">51</a> of file <a class="el" href="_i_r_validator_8cpp_source.html">IRValidator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   52</span>{</div>
<div class="line"><span class="lineno">   53</span>  <span class="keyword">auto</span> <a class="code hl_function" href="namespaceenco.html#ae4807d2384277227645837acf9c92a01">module</a> = <a class="code hl_function" href="namespaceenco.html#a3d4e56ec31be86ad47be84f20622bc0e">code</a>-&gt;<a class="code hl_function" href="structenco_1_1_code.html#a022dab73aea454d37ada345303b6e848">module</a>();</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>  <span class="comment">// for each eval ( conv2d ( ... ) ), check the output shape of conv2D matches output of eval</span></div>
<div class="line"><span class="lineno">   56</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> blk = <a class="code hl_function" href="namespaceenco.html#ae4807d2384277227645837acf9c92a01">module</a>-&gt;<a class="code hl_function" href="classcoco_1_1_module.html#a4e6fa3a38e38be0b51c0ffb9c5e8984a">block</a>()-&gt;<a class="code hl_function" href="classcoco_1_1_d_linked_list_1_1_head.html#a4151d6209d11f236e325d4cc90dce934">head</a>(); blk; blk = blk-&gt;next())</div>
<div class="line"><span class="lineno">   57</span>  {</div>
<div class="line"><span class="lineno">   58</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> instr = blk-&gt;instr()-&gt;head(); instr; instr = instr-&gt;next())</div>
<div class="line"><span class="lineno">   59</span>    {</div>
<div class="line"><span class="lineno">   60</span>      <span class="keyword">auto</span> eval = instr-&gt;asEval();</div>
<div class="line"><span class="lineno">   61</span>      <span class="keywordflow">if</span> (eval == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno">   62</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>      <span class="keyword">auto</span> op = eval-&gt;op();</div>
<div class="line"><span class="lineno">   65</span>      <span class="keywordflow">if</span> (!op-&gt;asConv2D())</div>
<div class="line"><span class="lineno">   66</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>      <span class="keyword">auto</span> conv2D = op-&gt;asConv2D();</div>
<div class="line"><span class="lineno">   69</span>      <span class="keyword">auto</span> expected_shape = output_shape(conv2D);</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>      <span class="keyword">auto</span> eval_out = eval-&gt;out()-&gt;asFeature();</div>
<div class="line"><span class="lineno">   72</span>      assert(eval_out);</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>      <span class="keyword">auto</span> actual_shape = eval_out-&gt;shape();</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>      <span class="keywordflow">if</span> (actual_shape != expected_shape)</div>
<div class="line"><span class="lineno">   77</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   78</span>    }</div>
<div class="line"><span class="lineno">   79</span>  }</div>
<div class="line"><span class="lineno">   80</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   81</span>}</div>
<div class="ttc" id="aclasscoco_1_1_d_linked_list_1_1_head_html_a4151d6209d11f236e325d4cc90dce934"><div class="ttname"><a href="classcoco_1_1_d_linked_list_1_1_head.html#a4151d6209d11f236e325d4cc90dce934">coco::DLinkedList::Head::head</a></div><div class="ttdeci">Child * head(void) const</div><div class="ttdef"><b>Definition:</b> <a href="_d_linked_list_8h_source.html#l00048">DLinkedList.h:48</a></div></div>
<div class="ttc" id="aclasscoco_1_1_module_html_a4e6fa3a38e38be0b51c0ffb9c5e8984a"><div class="ttname"><a href="classcoco_1_1_module.html#a4e6fa3a38e38be0b51c0ffb9c5e8984a">coco::Module::block</a></div><div class="ttdeci">virtual BlockList * block(void)=0</div></div>
<div class="ttc" id="anamespaceenco_html_ae4807d2384277227645837acf9c92a01"><div class="ttname"><a href="namespaceenco.html#ae4807d2384277227645837acf9c92a01">enco::module</a></div><div class="ttdeci">coco::Module * module(const SessionID &amp;sess)</div><div class="ttdef"><b>Definition:</b> <a href="enco_2core_2src_2_session_8cpp_source.html#l00051">Session.cpp:51</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classcoco_1_1_module.html#a4e6fa3a38e38be0b51c0ffb9c5e8984a">coco::Module::block()</a>, <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00054">code()</a>, <a class="el" href="_d_linked_list_8h_source.html#l00048">coco::DLinkedList&lt; Child, Parent &gt;::Head::head()</a>, <a class="el" href="enco_2core_2src_2_session_8cpp_source.html#l00051">module()</a>, <a class="el" href="_code_8h_source.html#l00037">enco::Code::module()</a>, and <a class="el" href="_i_r_validator_8cpp_source.html#l00024">output_shape()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_i_r_validator_8cpp_source.html#l00083">validate()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceenco.html">enco</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
