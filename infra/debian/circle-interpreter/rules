#!/usr/bin/make -f

export NNCC_INSTALL_PREFIX=$(CURDIR)/build/debian.install
export DEBIAN_PREFIX=$(CURDIR)/debian/tmp

%:
	dh $@

override_dh_auto_clean:
	# Nothing to clean
	true

override_dh_auto_configure:
	# No configure step needed
	true

override_dh_auto_build:
	# No build step needed
	true

override_dh_auto_test:
	# No test step needed
	true

override_dh_auto_install:
	# copy the bin file
	mkdir -p ${DEBIAN_PREFIX}/bin
	cp ${NNCC_INSTALL_PREFIX}/bin/circle-interpreter ${DEBIAN_PREFIX}/bin/
	
	# copy the lib files
	mkdir -p ${DEBIAN_PREFIX}/lib
	cp ${NNCC_INSTALL_PREFIX}/lib/libloco.so ${DEBIAN_PREFIX}/lib/
	cp ${NNCC_INSTALL_PREFIX}/lib/libluci_env.so ${DEBIAN_PREFIX}/lib/
	cp ${NNCC_INSTALL_PREFIX}/lib/libluci_import.so ${DEBIAN_PREFIX}/lib/
	cp ${NNCC_INSTALL_PREFIX}/lib/libluci_interpreter.so ${DEBIAN_PREFIX}/lib/
	cp ${NNCC_INSTALL_PREFIX}/lib/libluci_lang.so ${DEBIAN_PREFIX}/lib/
	cp ${NNCC_INSTALL_PREFIX}/lib/libluci_logex.so ${DEBIAN_PREFIX}/lib/
	cp ${NNCC_INSTALL_PREFIX}/lib/libluci_log.so ${DEBIAN_PREFIX}/lib/
	cp ${NNCC_INSTALL_PREFIX}/lib/libluci_plan.so ${DEBIAN_PREFIX}/lib/
	cp ${NNCC_INSTALL_PREFIX}/lib/libluci_profile.so ${DEBIAN_PREFIX}/lib/

override_dh_shlibdeps:
	dh_shlibdeps --dpkg-shlibdeps-params=--ignore-missing-info

override_dh_strip:
	dh_strip --no-automatic-dbgsym

override_dh_builddeb:
	dh_builddeb
