#!/usr/bin/make -f

CURRENT_DIR=$(shell pwd)
export NNCC_WORKSPACE=build/debian
export NNCC_INSTALL_PREFIX=${CURRENT_DIR}/${NNCC_WORKSPACE}.install

%:
	dh $@

debian-clean:
	rm -rf build

debian-configure:
	CIRCLEINT_ITEMS="angkor;cwrap;pepper-str;pepper-strcast;pepper-csv2vec;pp"
	CIRCLEINT_ITEMS="${CIRCLEINT_ITEMS};oops;loco;logo-core;logo;locop"
	CIRCLEINT_ITEMS="${CIRCLEINT_ITEMS};hermes;hermes-std;safemain;mio-circle08"
	CIRCLEINT_ITEMS="${CIRCLEINT_ITEMS};luci-compute;luci;luci-interpreter"
	CIRCLEINT_ITEMS="${CIRCLEINT_ITEMS};foder;arser;vconone;circle-interpreter"
	
	 ./nncc configure \
		-DENABLE_STRICT_BUILD=ON \
		-DENABLE_TEST=OFF \
		-DCMAKE_BUILD_TYPE=Release \
		-DEXTERNALS_BUILD_THREADS=4 \
		-DCMAKE_INSTALL_PREFIX=${NNCC_INSTALL_PREFIX} \
		-DBUILD_WHITELIST="${CIRCLEINT_ITEMS}"

debian-build:
	./nncc build -j16

debian-test:
	# skip test

debian-install:
	./nncc install

