<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ONE - On-device Neural Engine: utils Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ONE - On-device Neural Engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespaceutils.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">utils Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a66ff6299a3aa2cd739690cc9e16861f8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#a66ff6299a3aa2cd739690cc9e16861f8">add_default_arg</a> (parser)</td></tr>
<tr class="separator:a66ff6299a3aa2cd739690cc9e16861f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30a5194170a622b2b4b6fa7858b722ad"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#a30a5194170a622b2b4b6fa7858b722ad">add_default_arg_no_CS</a> (parser)</td></tr>
<tr class="separator:a30a5194170a622b2b4b6fa7858b722ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad13a165085daeb423dd6cd590294d08d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#ad13a165085daeb423dd6cd590294d08d">is_accumulated_arg</a> (arg, driver)</td></tr>
<tr class="separator:ad13a165085daeb423dd6cd590294d08d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5211bbee1d05ea1992619d36bb4d3449"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#a5211bbee1d05ea1992619d36bb4d3449">is_valid_attr</a> (args, attr)</td></tr>
<tr class="separator:a5211bbee1d05ea1992619d36bb4d3449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacdc65b1ce9d59feb823c9c2d9d9b0b6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#aacdc65b1ce9d59feb823c9c2d9d9b0b6">parse_cfg_and_overwrite</a> (config_path, section, args)</td></tr>
<tr class="separator:aacdc65b1ce9d59feb823c9c2d9d9b0b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73038798a5f91a88c37a2ba2b6d2ff23"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#a73038798a5f91a88c37a2ba2b6d2ff23">parse_cfg</a> (args, driver_name)</td></tr>
<tr class="separator:a73038798a5f91a88c37a2ba2b6d2ff23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe630f340739016339ee8436b206e461"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#abe630f340739016339ee8436b206e461">print_version_and_exit</a> (file_path)</td></tr>
<tr class="separator:abe630f340739016339ee8436b206e461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fbf6d2f678260c3856380193db659a8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#a2fbf6d2f678260c3856380193db659a8">safemain</a> (<a class="el" href="caffe2circle_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>, mainpath)</td></tr>
<tr class="separator:a2fbf6d2f678260c3856380193db659a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad76a188ab0b80880d0c6c0d4f7770818"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#ad76a188ab0b80880d0c6c0d4f7770818">run</a> (cmd, err_prefix=None, logfile=None)</td></tr>
<tr class="separator:ad76a188ab0b80880d0c6c0d4f7770818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4772690cf9827d7505592b095f5069f3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#a4772690cf9827d7505592b095f5069f3">remove_prefix</a> (str, prefix)</td></tr>
<tr class="separator:a4772690cf9827d7505592b095f5069f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c9d950acf492b7ad693c52b84924cd6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#a8c9d950acf492b7ad693c52b84924cd6">remove_suffix</a> (str, suffix)</td></tr>
<tr class="separator:a8c9d950acf492b7ad693c52b84924cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcd2b699ac90fd167f8377d1bda19dbd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#adcd2b699ac90fd167f8377d1bda19dbd">get_optimization_list</a> (get_name=False)</td></tr>
<tr class="separator:adcd2b699ac90fd167f8377d1bda19dbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc4dea9a3ff47cb71093a3de1a0cadab"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#adc4dea9a3ff47cb71093a3de1a0cadab">detect_one_import_drivers</a> (search_path)</td></tr>
<tr class="separator:adc4dea9a3ff47cb71093a3de1a0cadab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a66ff6299a3aa2cd739690cc9e16861f8" name="a66ff6299a3aa2cd739690cc9e16861f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66ff6299a3aa2cd739690cc9e16861f8">&#9670;&#160;</a></span>add_default_arg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def utils.add_default_arg </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>parser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00029">29</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   29</span><span class="keyword">def </span>add_default_arg(parser):</div>
<div class="line"><span class="lineno">   30</span>    <span class="comment"># version</span></div>
<div class="line"><span class="lineno">   31</span>    parser.add_argument(</div>
<div class="line"><span class="lineno">   32</span>        <span class="stringliteral">&#39;-v&#39;</span>,</div>
<div class="line"><span class="lineno">   33</span>        <span class="stringliteral">&#39;--version&#39;</span>,</div>
<div class="line"><span class="lineno">   34</span>        action=<span class="stringliteral">&#39;store_true&#39;</span>,</div>
<div class="line"><span class="lineno">   35</span>        help=<span class="stringliteral">&#39;show program\&#39;s version number and exit&#39;</span>)</div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span>    <span class="comment"># verbose</span></div>
<div class="line"><span class="lineno">   38</span>    parser.add_argument(</div>
<div class="line"><span class="lineno">   39</span>        <span class="stringliteral">&#39;-V&#39;</span>,</div>
<div class="line"><span class="lineno">   40</span>        <span class="stringliteral">&#39;--verbose&#39;</span>,</div>
<div class="line"><span class="lineno">   41</span>        action=<span class="stringliteral">&#39;store_true&#39;</span>,</div>
<div class="line"><span class="lineno">   42</span>        help=<span class="stringliteral">&#39;output additional information to stdout or stderr&#39;</span>)</div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span>    <span class="comment"># configuration file</span></div>
<div class="line"><span class="lineno">   45</span>    parser.add_argument(<span class="stringliteral">&#39;-C&#39;</span>, <span class="stringliteral">&#39;--config&#39;</span>, type=str, help=<span class="stringliteral">&#39;run with configuation file&#39;</span>)</div>
<div class="line"><span class="lineno">   46</span>    <span class="comment"># section name that you want to run in configuration file</span></div>
<div class="line"><span class="lineno">   47</span>    parser.add_argument(<span class="stringliteral">&#39;-S&#39;</span>, <span class="stringliteral">&#39;--section&#39;</span>, type=str, help=argparse.SUPPRESS)</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a30a5194170a622b2b4b6fa7858b722ad" name="a30a5194170a622b2b4b6fa7858b722ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30a5194170a622b2b4b6fa7858b722ad">&#9670;&#160;</a></span>add_default_arg_no_CS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def utils.add_default_arg_no_CS </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>parser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">This adds -v -V args only (no -C nor -S)
</pre> 
<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00050">50</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   50</span><span class="keyword">def </span>add_default_arg_no_CS(parser):</div>
<div class="line"><span class="lineno">   51</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">    This adds -v -V args only (no -C nor -S)</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">    </span><span class="comment"># version</span></div>
<div class="line"><span class="lineno">   55</span>    parser.add_argument(</div>
<div class="line"><span class="lineno">   56</span>        <span class="stringliteral">&#39;-v&#39;</span>,</div>
<div class="line"><span class="lineno">   57</span>        <span class="stringliteral">&#39;--version&#39;</span>,</div>
<div class="line"><span class="lineno">   58</span>        action=<span class="stringliteral">&#39;store_true&#39;</span>,</div>
<div class="line"><span class="lineno">   59</span>        help=<span class="stringliteral">&#39;show program\&#39;s version number and exit&#39;</span>)</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>    <span class="comment"># verbose</span></div>
<div class="line"><span class="lineno">   62</span>    parser.add_argument(</div>
<div class="line"><span class="lineno">   63</span>        <span class="stringliteral">&#39;-V&#39;</span>,</div>
<div class="line"><span class="lineno">   64</span>        <span class="stringliteral">&#39;--verbose&#39;</span>,</div>
<div class="line"><span class="lineno">   65</span>        action=<span class="stringliteral">&#39;store_true&#39;</span>,</div>
<div class="line"><span class="lineno">   66</span>        help=<span class="stringliteral">&#39;output additional information to stdout or stderr&#39;</span>)</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adc4dea9a3ff47cb71093a3de1a0cadab" name="adc4dea9a3ff47cb71093a3de1a0cadab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc4dea9a3ff47cb71093a3de1a0cadab">&#9670;&#160;</a></span>detect_one_import_drivers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def utils.detect_one_import_drivers </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>search_path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Looks for import drivers in given directory

Args:
    search_path: path to the directory where to search import drivers

Returns:
dict: each entry is related to single detected driver,
      key is a config section name, value is a driver name</pre> 
<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00252">252</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  252</span><span class="keyword">def </span>detect_one_import_drivers(search_path):</div>
<div class="line"><span class="lineno">  253</span>    <span class="stringliteral">&quot;&quot;&quot;Looks for import drivers in given directory</span></div>
<div class="line"><span class="lineno">  254</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  255</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  256</span><span class="stringliteral">        search_path: path to the directory where to search </span><span class="keyword">import</span> drivers</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>    Returns:</div>
<div class="line"><span class="lineno">  259</span>    dict: each entry <span class="keywordflow">is</span> related to single detected driver,</div>
<div class="line"><span class="lineno">  260</span>          key <span class="keywordflow">is</span> a config section name, value <span class="keywordflow">is</span> a driver name</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  263</span><span class="stringliteral">    import_drivers_dict = {}</span></div>
<div class="line"><span class="lineno">  264</span><span class="stringliteral">    </span><span class="keywordflow">for</span> module_name <span class="keywordflow">in</span> os.listdir(search_path):</div>
<div class="line"><span class="lineno">  265</span>        full_path = os.path.join(search_path, module_name)</div>
<div class="line"><span class="lineno">  266</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.isfile(full_path):</div>
<div class="line"><span class="lineno">  267</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  268</span>        <span class="keywordflow">if</span> module_name.find(<span class="stringliteral">&quot;one-import-&quot;</span>) != 0:</div>
<div class="line"><span class="lineno">  269</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  270</span>        module_loader = importlib.machinery.SourceFileLoader(module_name, full_path)</div>
<div class="line"><span class="lineno">  271</span>        module_spec = importlib.util.spec_from_loader(module_name, module_loader)</div>
<div class="line"><span class="lineno">  272</span>        module = importlib.util.module_from_spec(module_spec)</div>
<div class="line"><span class="lineno">  273</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  274</span>            module_loader.exec_module(module)</div>
<div class="line"><span class="lineno">  275</span>            <span class="keywordflow">if</span> hasattr(module, <span class="stringliteral">&quot;get_driver_cfg_section&quot;</span>):</div>
<div class="line"><span class="lineno">  276</span>                section = module.get_driver_cfg_section()</div>
<div class="line"><span class="lineno">  277</span>                import_drivers_dict[section] = module_name</div>
<div class="line"><span class="lineno">  278</span>        <span class="keywordflow">except</span>:</div>
<div class="line"><span class="lineno">  279</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  280</span>    <span class="keywordflow">return</span> import_drivers_dict</div>
</div><!-- fragment -->
</div>
</div>
<a id="adcd2b699ac90fd167f8377d1bda19dbd" name="adcd2b699ac90fd167f8377d1bda19dbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcd2b699ac90fd167f8377d1bda19dbd">&#9670;&#160;</a></span>get_optimization_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def utils.get_optimization_list </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>get_name</em> = <code>False</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">returns a list of optimization. If `get_name` is True,
only basename without extension is returned rather than full file path.

[one hierarchy]
one
├── backends
├── bin
├── doc
├── include
├── lib
├── optimization
└── test

Optimization options must be placed in `optimization` folder
</pre> 
<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00211">211</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  211</span><span class="keyword">def </span>get_optimization_list(get_name=False):</div>
<div class="line"><span class="lineno">  212</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  213</span><span class="stringliteral">    returns a list of optimization. If `get_name` </span><span class="keywordflow">is</span> <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  214</span>    only basename without extension <span class="keywordflow">is</span> returned rather than full file path.</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>    [one hierarchy]</div>
<div class="line"><span class="lineno">  217</span>    one</div>
<div class="line"><span class="lineno">  218</span>    ├── backends</div>
<div class="line"><span class="lineno">  219</span>    ├── bin</div>
<div class="line"><span class="lineno">  220</span>    ├── doc</div>
<div class="line"><span class="lineno">  221</span>    ├── include</div>
<div class="line"><span class="lineno">  222</span>    ├── lib</div>
<div class="line"><span class="lineno">  223</span>    ├── optimization</div>
<div class="line"><span class="lineno">  224</span>    └── test</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>    Optimization options must be placed <span class="keywordflow">in</span> `optimization` folder</div>
<div class="line"><span class="lineno">  227</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  228</span><span class="stringliteral">    dir_path = os.path.dirname(os.path.realpath(__file__))</span></div>
<div class="line"><span class="lineno">  229</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  230</span><span class="stringliteral">    </span><span class="comment"># optimization folder</span></div>
<div class="line"><span class="lineno">  231</span>    files = [</div>
<div class="line"><span class="lineno">  232</span>        f <span class="keywordflow">for</span> f <span class="keywordflow">in</span> glob.glob(dir_path + <span class="stringliteral">&#39;/../../optimization/O*.cfg&#39;</span>, recursive=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  233</span>    ]</div>
<div class="line"><span class="lineno">  234</span>    <span class="comment"># exclude if the name has space</span></div>
<div class="line"><span class="lineno">  235</span>    files = [s <span class="keywordflow">for</span> s <span class="keywordflow">in</span> files <span class="keywordflow">if</span> <span class="keywordflow">not</span> <span class="stringliteral">&#39; &#39;</span> <span class="keywordflow">in</span> s]</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    opt_list = []</div>
<div class="line"><span class="lineno">  238</span>    <span class="keywordflow">for</span> cand <span class="keywordflow">in</span> files:</div>
<div class="line"><span class="lineno">  239</span>        base = ntpath.basename(cand)</div>
<div class="line"><span class="lineno">  240</span>        <span class="keywordflow">if</span> os.path.isfile(cand) <span class="keywordflow">and</span> os.access(cand, os.R_OK):</div>
<div class="line"><span class="lineno">  241</span>            opt_list.append(cand)</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>    <span class="keywordflow">if</span> get_name == <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">  244</span>        <span class="comment"># NOTE the name includes prefix &#39;O&#39;</span></div>
<div class="line"><span class="lineno">  245</span>        <span class="comment"># e.g. O1, O2, ONCHW not just 1, 2, NCHW</span></div>
<div class="line"><span class="lineno">  246</span>        opt_list = [ntpath.basename(f) <span class="keywordflow">for</span> f <span class="keywordflow">in</span> opt_list]</div>
<div class="line"><span class="lineno">  247</span>        opt_list = [remove_suffix(s, <span class="stringliteral">&#39;.cfg&#39;</span>) <span class="keywordflow">for</span> s <span class="keywordflow">in</span> opt_list]</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>    <span class="keywordflow">return</span> opt_list</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="utils_8py_source.html#l00205">remove_suffix()</a>.</p>

</div>
</div>
<a id="ad13a165085daeb423dd6cd590294d08d" name="ad13a165085daeb423dd6cd590294d08d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad13a165085daeb423dd6cd590294d08d">&#9670;&#160;</a></span>is_accumulated_arg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def utils.is_accumulated_arg </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>driver</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00069">69</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span><span class="keyword">def </span>is_accumulated_arg(arg, driver):</div>
<div class="line"><span class="lineno">   70</span>    <span class="keywordflow">if</span> driver == <span class="stringliteral">&quot;one-quantize&quot;</span>:</div>
<div class="line"><span class="lineno">   71</span>        accumulables = [</div>
<div class="line"><span class="lineno">   72</span>            <span class="stringliteral">&quot;tensor_name&quot;</span>, <span class="stringliteral">&quot;scale&quot;</span>, <span class="stringliteral">&quot;zero_point&quot;</span>, <span class="stringliteral">&quot;src_tensor_name&quot;</span>, <span class="stringliteral">&quot;dst_tensor_name&quot;</span></div>
<div class="line"><span class="lineno">   73</span>        ]</div>
<div class="line"><span class="lineno">   74</span>        <span class="keywordflow">if</span> arg <span class="keywordflow">in</span> accumulables:</div>
<div class="line"><span class="lineno">   75</span>            <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>    <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="utils_8py_source.html#l00107">parse_cfg()</a>.</p>

</div>
</div>
<a id="a5211bbee1d05ea1992619d36bb4d3449" name="a5211bbee1d05ea1992619d36bb4d3449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5211bbee1d05ea1992619d36bb4d3449">&#9670;&#160;</a></span>is_valid_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def utils.is_valid_attr </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00080">80</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   80</span><span class="keyword">def </span>is_valid_attr(args, attr):</div>
<div class="line"><span class="lineno">   81</span>    <span class="keywordflow">return</span> hasattr(args, attr) <span class="keywordflow">and</span> getattr(args, attr)</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="utils_8py_source.html#l00107">parse_cfg()</a>.</p>

</div>
</div>
<a id="a73038798a5f91a88c37a2ba2b6d2ff23" name="a73038798a5f91a88c37a2ba2b6d2ff23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73038798a5f91a88c37a2ba2b6d2ff23">&#9670;&#160;</a></span>parse_cfg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def utils.parse_cfg </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>driver_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">parse configuration file. If the option is directly given to the command line,
   the option is processed prior to the configuration file.
   That is, if the values parsed from the configuration file already exist in args,
   the values are ignored.</pre> 
<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00107">107</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  107</span><span class="keyword">def </span>parse_cfg(args, driver_name):</div>
<div class="line"><span class="lineno">  108</span>    <span class="stringliteral">&quot;&quot;&quot;parse configuration file. If the option is directly given to the command line,</span></div>
<div class="line"><span class="lineno">  109</span><span class="stringliteral">       the option </span><span class="keywordflow">is</span> processed prior to the configuration file.</div>
<div class="line"><span class="lineno">  110</span>       That <span class="keywordflow">is</span>, <span class="keywordflow">if</span> the values parsed <span class="keyword">from</span> the configuration file already exist <span class="keywordflow">in</span> args,</div>
<div class="line"><span class="lineno">  111</span>       the values are ignored.<span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  112</span><span class="stringliteral">    </span><span class="keywordflow">if</span> is_valid_attr(args, <span class="stringliteral">&#39;config&#39;</span>):</div>
<div class="line"><span class="lineno">  113</span>        config = configparser.ConfigParser()</div>
<div class="line"><span class="lineno">  114</span>        config.optionxform = str</div>
<div class="line"><span class="lineno">  115</span>        config.read(args.config)</div>
<div class="line"><span class="lineno">  116</span>        <span class="comment"># if section is given, verify given section</span></div>
<div class="line"><span class="lineno">  117</span>        <span class="keywordflow">if</span> is_valid_attr(args, <span class="stringliteral">&#39;section&#39;</span>):</div>
<div class="line"><span class="lineno">  118</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> config.has_section(args.section):</div>
<div class="line"><span class="lineno">  119</span>                <span class="keywordflow">raise</span> AssertionError(<span class="stringliteral">&#39;configuration file must have \&#39;&#39;</span> + driver_name +</div>
<div class="line"><span class="lineno">  120</span>                                     <span class="stringliteral">&#39;\&#39; section&#39;</span>)</div>
<div class="line"><span class="lineno">  121</span>            <span class="keywordflow">for</span> key <span class="keywordflow">in</span> config[args.section]:</div>
<div class="line"><span class="lineno">  122</span>                <span class="keywordflow">if</span> is_accumulated_arg(key, driver_name):</div>
<div class="line"><span class="lineno">  123</span>                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> is_valid_attr(args, key):</div>
<div class="line"><span class="lineno">  124</span>                        setattr(args, key, [config[args.section][key]])</div>
<div class="line"><span class="lineno">  125</span>                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  126</span>                        getattr(args, key).append(config[args.section][key])</div>
<div class="line"><span class="lineno">  127</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  128</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> is_valid_attr(args, key):</div>
<div class="line"><span class="lineno">  129</span>                    setattr(args, key, config[args.section][key])</div>
<div class="line"><span class="lineno">  130</span>        <span class="comment"># if section is not given, section name is same with its driver name</span></div>
<div class="line"><span class="lineno">  131</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  132</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> config.has_section(driver_name):</div>
<div class="line"><span class="lineno">  133</span>                <span class="keywordflow">raise</span> AssertionError(<span class="stringliteral">&#39;configuration file must have \&#39;&#39;</span> + driver_name +</div>
<div class="line"><span class="lineno">  134</span>                                     <span class="stringliteral">&#39;\&#39; section&#39;</span>)</div>
<div class="line"><span class="lineno">  135</span>            secton_to_run = driver_name</div>
<div class="line"><span class="lineno">  136</span>            <span class="keywordflow">for</span> key <span class="keywordflow">in</span> config[secton_to_run]:</div>
<div class="line"><span class="lineno">  137</span>                <span class="keywordflow">if</span> is_accumulated_arg(key, driver_name):</div>
<div class="line"><span class="lineno">  138</span>                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> is_valid_attr(args, key):</div>
<div class="line"><span class="lineno">  139</span>                        setattr(args, key, [config[secton_to_run][key]])</div>
<div class="line"><span class="lineno">  140</span>                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  141</span>                        getattr(args, key).append(config[secton_to_run][key])</div>
<div class="line"><span class="lineno">  142</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  143</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> is_valid_attr(args, key):</div>
<div class="line"><span class="lineno">  144</span>                    setattr(args, key, config[secton_to_run][key])</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="utils_8py_source.html#l00069">is_accumulated_arg()</a>, and <a class="el" href="utils_8py_source.html#l00080">is_valid_attr()</a>.</p>

</div>
</div>
<a id="aacdc65b1ce9d59feb823c9c2d9d9b0b6" name="aacdc65b1ce9d59feb823c9c2d9d9b0b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacdc65b1ce9d59feb823c9c2d9d9b0b6">&#9670;&#160;</a></span>parse_cfg_and_overwrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def utils.parse_cfg_and_overwrite </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>section</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">parse given section of configuration file and set the values of args.
Even if the values parsed from the configuration file already exist in args,
the values are overwritten.
</pre> 
<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00084">84</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   84</span><span class="keyword">def </span>parse_cfg_and_overwrite(config_path, section, args):</div>
<div class="line"><span class="lineno">   85</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">    parse given section of configuration file </span><span class="keywordflow">and</span> set the values of args.</div>
<div class="line"><span class="lineno">   87</span>    Even <span class="keywordflow">if</span> the values parsed <span class="keyword">from</span> the configuration file already exist <span class="keywordflow">in</span> args,</div>
<div class="line"><span class="lineno">   88</span>    the values are overwritten.</div>
<div class="line"><span class="lineno">   89</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   90</span><span class="stringliteral">    </span><span class="keywordflow">if</span> config_path == <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   91</span>        <span class="comment"># DO NOTHING</span></div>
<div class="line"><span class="lineno">   92</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">   93</span>    config = configparser.ConfigParser()</div>
<div class="line"><span class="lineno">   94</span>    <span class="comment"># make option names case sensitive</span></div>
<div class="line"><span class="lineno">   95</span>    config.optionxform = str</div>
<div class="line"><span class="lineno">   96</span>    parsed = config.read(config_path)</div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> parsed:</div>
<div class="line"><span class="lineno">   98</span>        <span class="keywordflow">raise</span> FileNotFoundError(<span class="stringliteral">&#39;Not found given configuration file&#39;</span>)</div>
<div class="line"><span class="lineno">   99</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> config.has_section(section):</div>
<div class="line"><span class="lineno">  100</span>        <span class="keywordflow">raise</span> AssertionError(<span class="stringliteral">&#39;configuration file doesn\&#39;t have \&#39;&#39;</span> + section +</div>
<div class="line"><span class="lineno">  101</span>                             <span class="stringliteral">&#39;\&#39; section&#39;</span>)</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> config[section]:</div>
<div class="line"><span class="lineno">  103</span>        setattr(args, key, config[section][key])</div>
<div class="line"><span class="lineno">  104</span>    <span class="comment"># TODO support accumulated arguments</span></div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="abe630f340739016339ee8436b206e461" name="abe630f340739016339ee8436b206e461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe630f340739016339ee8436b206e461">&#9670;&#160;</a></span>print_version_and_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def utils.print_version_and_exit </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>file_path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">print version of the file located in the file_path</pre> 
<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00147">147</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  147</span><span class="keyword">def </span>print_version_and_exit(file_path):</div>
<div class="line"><span class="lineno">  148</span>    <span class="stringliteral">&quot;&quot;&quot;print version of the file located in the file_path&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  149</span>    script_path = os.path.realpath(file_path)</div>
<div class="line"><span class="lineno">  150</span>    dir_path = os.path.dirname(script_path)</div>
<div class="line"><span class="lineno">  151</span>    script_name = os.path.splitext(os.path.basename(script_path))[0]</div>
<div class="line"><span class="lineno">  152</span>    <span class="comment"># run one-version</span></div>
<div class="line"><span class="lineno">  153</span>    subprocess.call([os.path.join(dir_path, <span class="stringliteral">&#39;one-version&#39;</span>), script_name])</div>
<div class="line"><span class="lineno">  154</span>    sys.exit()</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4772690cf9827d7505592b095f5069f3" name="a4772690cf9827d7505592b095f5069f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4772690cf9827d7505592b095f5069f3">&#9670;&#160;</a></span>remove_prefix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def utils.remove_prefix </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>prefix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00199">199</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  199</span><span class="keyword">def </span>remove_prefix(str, prefix):</div>
<div class="line"><span class="lineno">  200</span>    <span class="keywordflow">if</span> str.startswith(prefix):</div>
<div class="line"><span class="lineno">  201</span>        <span class="keywordflow">return</span> str[len(prefix):]</div>
<div class="line"><span class="lineno">  202</span>    <span class="keywordflow">return</span> str</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c9d950acf492b7ad693c52b84924cd6" name="a8c9d950acf492b7ad693c52b84924cd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c9d950acf492b7ad693c52b84924cd6">&#9670;&#160;</a></span>remove_suffix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def utils.remove_suffix </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>suffix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00205">205</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  205</span><span class="keyword">def </span>remove_suffix(str, suffix):</div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">if</span> str.endswith(suffix):</div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">return</span> str[:-len(suffix)]</div>
<div class="line"><span class="lineno">  208</span>    <span class="keywordflow">return</span> str</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="utils_8py_source.html#l00211">get_optimization_list()</a>.</p>

</div>
</div>
<a id="ad76a188ab0b80880d0c6c0d4f7770818" name="ad76a188ab0b80880d0c6c0d4f7770818"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad76a188ab0b80880d0c6c0d4f7770818">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def utils.run </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>err_prefix</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logfile</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Execute command in subprocess

Args:
    cmd: command to be executed in subprocess
    err_prefix: prefix to be put before every stderr lines
    logfile: file stream to which both of stdout and stderr lines will be written
</pre> 
<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00167">167</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  167</span><span class="keyword">def </span><a class="code hl_function" href="_generate_kernels_list_helper_8cpp.html#a3b45f71347f9da730e585edad717d140">run</a>(cmd, err_prefix=None, logfile=None):</div>
<div class="line"><span class="lineno">  168</span>    <span class="stringliteral">&quot;&quot;&quot;Execute command in subprocess</span></div>
<div class="line"><span class="lineno">  169</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  170</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  171</span><span class="stringliteral">        cmd: command to be executed </span><span class="keywordflow">in</span> subprocess</div>
<div class="line"><span class="lineno">  172</span>        err_prefix: prefix to be put before every stderr lines</div>
<div class="line"><span class="lineno">  173</span>        logfile: file stream to which both of stdout <span class="keywordflow">and</span> stderr lines will be written</div>
<div class="line"><span class="lineno">  174</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  175</span><span class="stringliteral">    </span><span class="keyword">with</span> subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE) <span class="keyword">as</span> p:</div>
<div class="line"><span class="lineno">  176</span>        <span class="keyword">import</span> select</div>
<div class="line"><span class="lineno">  177</span>        inputs = set([p.stdout, p.stderr])</div>
<div class="line"><span class="lineno">  178</span>        <span class="keywordflow">while</span> inputs:</div>
<div class="line"><span class="lineno">  179</span>            readable, _, _ = select.select(inputs, [], [])</div>
<div class="line"><span class="lineno">  180</span>            <span class="keywordflow">for</span> x <span class="keywordflow">in</span> readable:</div>
<div class="line"><span class="lineno">  181</span>                line = x.readline()</div>
<div class="line"><span class="lineno">  182</span>                <span class="keywordflow">if</span> len(line) == 0:</div>
<div class="line"><span class="lineno">  183</span>                    inputs.discard(x)</div>
<div class="line"><span class="lineno">  184</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  185</span>                <span class="keywordflow">if</span> x == p.stdout:</div>
<div class="line"><span class="lineno">  186</span>                    out = sys.stdout</div>
<div class="line"><span class="lineno">  187</span>                <span class="keywordflow">if</span> x == p.stderr:</div>
<div class="line"><span class="lineno">  188</span>                    out = sys.stderr</div>
<div class="line"><span class="lineno">  189</span>                    <span class="keywordflow">if</span> err_prefix:</div>
<div class="line"><span class="lineno">  190</span>                        line = f<span class="stringliteral">&quot;{err_prefix}: &quot;</span>.encode() + line</div>
<div class="line"><span class="lineno">  191</span>                out.buffer.write(line)</div>
<div class="line"><span class="lineno">  192</span>                out.buffer.flush()</div>
<div class="line"><span class="lineno">  193</span>                <span class="keywordflow">if</span> logfile != <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  194</span>                    logfile.write(line)</div>
<div class="line"><span class="lineno">  195</span>    <span class="keywordflow">if</span> p.returncode != 0:</div>
<div class="line"><span class="lineno">  196</span>        sys.exit(p.returncode)</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="ttc" id="a_generate_kernels_list_helper_8cpp_html_a3b45f71347f9da730e585edad717d140"><div class="ttname"><a href="_generate_kernels_list_helper_8cpp.html#a3b45f71347f9da730e585edad717d140">run</a></div><div class="ttdeci">void run(std::ofstream &amp;os, const circle::Model *model)</div><div class="ttdef"><b>Definition:</b> <a href="_generate_kernels_list_helper_8cpp_source.html#l00182">GenerateKernelsListHelper.cpp:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2fbf6d2f678260c3856380193db659a8" name="a2fbf6d2f678260c3856380193db659a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fbf6d2f678260c3856380193db659a8">&#9670;&#160;</a></span>safemain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def utils.safemain </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>main</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mainpath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">execute given method and print with program name for all uncaught exceptions</pre> 
<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00157">157</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  157</span><span class="keyword">def </span>safemain(main, mainpath):</div>
<div class="line"><span class="lineno">  158</span>    <span class="stringliteral">&quot;&quot;&quot;execute given method and print with program name for all uncaught exceptions&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  160</span>        <a class="code hl_function" href="example__array_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>()</div>
<div class="line"><span class="lineno">  161</span>    <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  162</span>        prog_name = os.path.basename(mainpath)</div>
<div class="line"><span class="lineno">  163</span>        print(f<span class="stringliteral">&quot;{prog_name}: {type(e).__name__}: &quot;</span> + str(e), file=sys.stderr)</div>
<div class="line"><span class="lineno">  164</span>        sys.exit(255)</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="ttc" id="aexample__array_8cpp_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="example__array_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>Definition:</b> <a href="example__array_8cpp_source.html#l00040">example_array.cpp:40</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="example__array_8cpp_source.html#l00040">main()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceutils.html">utils</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
